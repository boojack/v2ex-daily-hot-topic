[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168551,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"fx777","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/e5f9/d437/201189_mini.png?m=1592646871","bio":null,"url":"https://www.v2ex.com/u/fx777","tagline":null,"twitter":null,"created":1479090720,"avatar_large":"https://cdn.v2ex.com/avatar/e5f9/d437/201189_mini.png?m=1592646871","avatar_mini":"https://cdn.v2ex.com/avatar/e5f9/d437/201189_mini.png?m=1592646871","location":null,"btc":null,"id":201189},"last_reply_by":"cabing","last_touched":1612956176,"title":"今天最后一天，你还在坚守岗位上（mo）班（yu）吗？","url":"https://www.v2ex.com/t/752755","created":1612922257,"content":"我正在摸鱼","content_rendered":"<p>我正在摸鱼</p>\n","last_modified":1612922257,"replies":88,"id":752755},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168551,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"BerlinUang","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/1e22/710b/521501_mini.png?m=1612923243","bio":null,"url":"https://www.v2ex.com/u/BerlinUang","tagline":null,"twitter":null,"created":1606797281,"avatar_large":"https://cdn.v2ex.com/avatar/1e22/710b/521501_mini.png?m=1612923243","avatar_mini":"https://cdn.v2ex.com/avatar/1e22/710b/521501_mini.png?m=1612923243","location":null,"btc":null,"id":521501},"last_reply_by":"wenjiu","last_touched":1612974892,"title":"普通人家庭，花 30 万读复旦全日制金融硕士值得吗？","url":"https://www.v2ex.com/t/752766","created":1612923802,"content":"LZ 工作一年不到，对现状十分不满，想彻底告别现在的行业，一直考虑重新回校园。\r\n\r\n考虑到就业、考试难度和学历含金量，复旦算是比较平衡。\r\n\r\n但是这个费用真的肉痛，传统行业打一年工不够学费的。\r\n\r\nLZ 这样已经工作的是不是不考虑回校园更好？\r\n\r\n另外，还单纯想讨论，一路升学的学生，30w 的复旦金融硕士值得选择吗？","content_rendered":"LZ 工作一年不到，对现状十分不满，想彻底告别现在的行业，一直考虑重新回校园。<br /><br />考虑到就业、考试难度和学历含金量，复旦算是比较平衡。<br /><br />但是这个费用真的肉痛，传统行业打一年工不够学费的。<br /><br />LZ 这样已经工作的是不是不考虑回校园更好？<br /><br />另外，还单纯想讨论，一路升学的学生，30w 的复旦金融硕士值得选择吗？","last_modified":1612923802,"replies":88,"id":752766},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/53c0/4118/1055_large.png?m=1588961982","name":"rss","avatar_normal":"https://cdn.v2ex.com/navatar/53c0/4118/1055_normal.png?m=1588961982","title":"RSS","url":"https://www.v2ex.com/go/rss","topics":24,"footer":"","header":"一种古老而高效的信息获取方式。这个节点讨论 RSS 源的实现及各种阅读器。","title_alternative":"RSS","avatar_mini":"https://cdn.v2ex.com/navatar/53c0/4118/1055_mini.png?m=1588961982","stars":95,"aliases":[],"root":false,"id":1055,"parent_node_name":"geek"},"member":{"username":"guyskk0x0","website":"http://blog.guyskk.com","github":"guyskk","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/e315/ef15/255705_mini.png?m=1506007530","bio":"","url":"https://www.v2ex.com/u/guyskk0x0","tagline":"这个世界就是以去过多远的地方，见过多少人，来衡量一个人的人生价值！","twitter":"","created":1506007441,"avatar_large":"https://cdn.v2ex.com/avatar/e315/ef15/255705_mini.png?m=1506007530","avatar_mini":"https://cdn.v2ex.com/avatar/e315/ef15/255705_mini.png?m=1506007530","location":"","btc":"","id":255705},"last_reply_by":"guyskk0x0","last_touched":1612973923,"title":"蚁阅 - RSS 轻松订阅 - 正式发售","url":"https://www.v2ex.com/t/752795","created":1612932973,"content":"时光匆匆，回首，又是一年岁末时。[/t/633265](/t/633265)  [/t/659854](/t/659854)  \r\n经过一年时间迭代，蚁阅完善了很多功能，包括 **适配桌面端**， **订阅分组**，**夜间模式**，**抓取全文** 等等。\r\n\r\n蚁阅主要特点：\r\n\r\n- 全平台，无广告，无推荐，专注阅读\r\n- 支持全文阅读，支持播客和视频内容\r\n- 智能查找订阅源，智能裂图修复\r\n- 支持夜间模式，全球 RSS 均可订阅\r\n- 开源，开箱即用，也支持自己部署\r\n\r\n蚁阅在发布后开始接受捐赠，在 2020 年国庆后开始预售，共收款 100+ 次，非常感谢大家的认可！  \r\n金额虽不多，如果大家能继续支持的话，基本可以抵消服务器费用，我会让它长期稳定运行下去。\r\n\r\n**开箱即用地址**: [https://rss.anyant.com/]( https://rss.anyant.com/)  \r\n**GitHub 地址**: [https://github.com/anyant/rssant]( https://github.com/anyant/rssant) (求🌟)\r\n\r\n**送 10 枚兑换码**：V2EX2021   \r\n在本贴回复，提供反馈建议，或留下你的博客 RSS 地址，我会送出更多兑换码！  \r\n在博客，公众号，论坛社区上推荐蚁阅，可联系我获取超级兑换码。","content_rendered":"<p>时光匆匆，回首，又是一年岁末时。<a href=\"/t/633265\" rel=\"nofollow\">/t/633265</a> <a href=\"/t/659854\" rel=\"nofollow\">/t/659854</a><br/>\n经过一年时间迭代，蚁阅完善了很多功能，包括 <strong>适配桌面端</strong>， <strong>订阅分组</strong>，<strong>夜间模式</strong>，<strong>抓取全文</strong> 等等。</p>\n<p>蚁阅主要特点：</p>\n<ul>\n<li>全平台，无广告，无推荐，专注阅读</li>\n<li>支持全文阅读，支持播客和视频内容</li>\n<li>智能查找订阅源，智能裂图修复</li>\n<li>支持夜间模式，全球 RSS 均可订阅</li>\n<li>开源，开箱即用，也支持自己部署</li>\n</ul>\n<p>蚁阅在发布后开始接受捐赠，在 2020 年国庆后开始预售，共收款 100+ 次，非常感谢大家的认可！<br/>\n金额虽不多，如果大家能继续支持的话，基本可以抵消服务器费用，我会让它长期稳定运行下去。</p>\n<p><strong>开箱即用地址</strong>: <a href=\"https://rss.anyant.com/\" rel=\"nofollow\">https://rss.anyant.com/</a><br/>\n<strong>GitHub 地址</strong>: <a href=\"https://github.com/anyant/rssant\" rel=\"nofollow\">https://github.com/anyant/rssant</a> (求🌟)</p>\n<p><strong>送 10 枚兑换码</strong>：V2EX2021<br/>\n在本贴回复，提供反馈建议，或留下你的博客 RSS 地址，我会送出更多兑换码！<br/>\n在博客，公众号，论坛社区上推荐蚁阅，可联系我获取超级兑换码。</p>\n","last_modified":1612932973,"replies":84,"id":752795},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1611468499","name":"apple","avatar_normal":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1611468499","title":"Apple","url":"https://www.v2ex.com/go/apple","topics":13962,"footer":"","header":"设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。","title_alternative":"Apple","avatar_mini":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1611468499","stars":1710,"aliases":[],"root":false,"id":184,"parent_node_name":"hardware"},"member":{"username":"zhaidoudou123","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/92e4/843a/24513_mini.png?m=1501346547","bio":null,"url":"https://www.v2ex.com/u/zhaidoudou123","tagline":null,"twitter":null,"created":1343649694,"avatar_large":"https://cdn.v2ex.com/avatar/92e4/843a/24513_mini.png?m=1501346547","avatar_mini":"https://cdn.v2ex.com/avatar/92e4/843a/24513_mini.png?m=1501346547","location":null,"btc":null,"id":24513},"last_reply_by":"zhaidoudou123","last_touched":1612971427,"title":"在给 1Password 个人版付了几年钱以后，我觉得自己不能再做冤大头了。","url":"https://www.v2ex.com/t/752805","created":1612935597,"content":"1Password 确实很好用，在云同步出现之前我也买过买断版。  \r\n后来云同步出来以后不需要走 dropbox，不需要梯子，我很开心，就付费订阅了个人版。  \r\n从 17 年还是 18 年开始，一直用到了今天。  \r\n但是今天我实在是觉得自己是冤大头，把密码库转移到之前申请的试用版账户了。  \r\n\r\n这玩意年年送家庭版，年年送，年年送，年年送！  \r\n19 年 6 月又一次活动，我实在忍不了了发邮件质问客服，你年年送给新用户，我们老用户是冤大头吗？  \r\n最后给我优惠了$10，然后 20 年我还是续费了。  \r\n结果 20 年 11 月又来，好嘛，我这次不想发邮件了，准备直接停掉订阅白嫖了。  \r\n\r\n终于还有 2 天订阅就到期了，果断停掉订阅，登陆之前注册的家庭版账户，全选项目，直接复制到新密码库。\r\n舒服了，不花钱真的舒服。  \r\n\r\n这种年年搞老用户的促销办法，我是真的觉得很恶心人。  \r\n不知道该发在哪，就发在 Apple 版吧，毕竟苹果用户用 1p 的应该比较多。","content_rendered":"<p>1Password 确实很好用，在云同步出现之前我也买过买断版。<br/>\n后来云同步出来以后不需要走 dropbox，不需要梯子，我很开心，就付费订阅了个人版。<br/>\n从 17 年还是 18 年开始，一直用到了今天。<br/>\n但是今天我实在是觉得自己是冤大头，把密码库转移到之前申请的试用版账户了。  </p>\n<p>这玩意年年送家庭版，年年送，年年送，年年送！<br/>\n19 年 6 月又一次活动，我实在忍不了了发邮件质问客服，你年年送给新用户，我们老用户是冤大头吗？<br/>\n最后给我优惠了$10，然后 20 年我还是续费了。<br/>\n结果 20 年 11 月又来，好嘛，我这次不想发邮件了，准备直接停掉订阅白嫖了。  </p>\n<p>终于还有 2 天订阅就到期了，果断停掉订阅，登陆之前注册的家庭版账户，全选项目，直接复制到新密码库。\n舒服了，不花钱真的舒服。  </p>\n<p>这种年年搞老用户的促销办法，我是真的觉得很恶心人。<br/>\n不知道该发在哪，就发在 Apple 版吧，毕竟苹果用户用 1p 的应该比较多。</p>\n","last_modified":1612935597,"replies":62,"id":752805},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/03af/dbd6/63_large.png?m=1596211530","name":"java","avatar_normal":"https://cdn.v2ex.com/navatar/03af/dbd6/63_normal.png?m=1596211530","title":"Java","url":"https://www.v2ex.com/go/java","topics":4219,"footer":"","header":"The most popular programming language.","title_alternative":"Java","avatar_mini":"https://cdn.v2ex.com/navatar/03af/dbd6/63_mini.png?m=1596211530","stars":4326,"aliases":[],"root":false,"id":63,"parent_node_name":"programming"},"member":{"username":"XiLemon","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/84af04d7078fb2df3fcced60e64bf214?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/XiLemon","tagline":"","twitter":"","created":1454651036,"avatar_large":"https://cdn.v2ex.com/gravatar/84af04d7078fb2df3fcced60e64bf214?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/84af04d7078fb2df3fcced60e64bf214?s=24&d=retro","location":"汉、沪","btc":"","id":158163},"last_reply_by":"passerbytiny","last_touched":1612974762,"title":"JPA 为何如此难用，是我姿势不对吗","url":"https://www.v2ex.com/t/752786","created":1612928657,"content":"RT，明天就过年了，我还在写 JPA 的东西，我快吐了。。。\r\n\r\n声明：因为是第一次用，不熟悉，另外，个人认为是本人不理解 JPA 的设计思想，所以用起来很不顺手。\r\n\r\n槽点：\r\n1. 多个条件，组合查询，当有些条件没有传参的时候怎么处理\r\n   - 代码层面处理：用 specification 来处理，写起来好啰嗦，过于麻烦\r\n   - @Query 注解，写原生 SQL 也挺恶心的\r\n2. 指定 update 条件  \r\n   应该不支持吧，只能用 @Query 注解写原生的 SQL，一旦字段比较多，而且部分可能为空的情况，写起来也是噩梦  \r\n3. 多表关联查询  \r\n   JPA 不推荐多表关联查询？用起来也不够方便。  \r\n\r\n我是在用 MyBatis 的思路来用 JPA，完全不对路子。MyBaits 很**灵活**，在使用 JPA 的时候，感觉到处都是限制和不便。比如要用乐观锁，JPA 虽然有 @Version 注解处理，但是只能在 save 的时候才能用到。  \r\n\r\n用 MyBatis 感觉是在呼吸自由的新鲜空气，用 JPA 感觉是在地下室。。。  \r\n\r\n那么用 JPA 的朋友，是真的不需要灵活性，从业务设计上就完全解决了这些情况么。      \r\n\r\n本帖带有强烈的个人主观印象，用词如有冒犯到 JPA 用户，请强势打脸，教我做人！\r\n\r\n打工人，打工魂，打工人是人下人 o(╥﹏╥)o   \r\n\r\n提前祝大家新年快乐！","content_rendered":"<p>RT，明天就过年了，我还在写 JPA 的东西，我快吐了。。。</p>\n<p>声明：因为是第一次用，不熟悉，另外，个人认为是本人不理解 JPA 的设计思想，所以用起来很不顺手。</p>\n<p>槽点：</p>\n<ol>\n<li>\n多个条件，组合查询，当有些条件没有传参的时候怎么处理<ul>\n<li>代码层面处理：用 specification 来处理，写起来好啰嗦，过于麻烦</li>\n<li>@Query 注解，写原生 SQL 也挺恶心的</li>\n</ul>\n</li>\n<li>指定 update 条件<br/>\n应该不支持吧，只能用 @Query 注解写原生的 SQL，一旦字段比较多，而且部分可能为空的情况，写起来也是噩梦  </li>\n<li>多表关联查询<br/>\nJPA 不推荐多表关联查询？用起来也不够方便。  </li>\n</ol>\n<p>我是在用 MyBatis 的思路来用 JPA，完全不对路子。MyBaits 很<strong>灵活</strong>，在使用 JPA 的时候，感觉到处都是限制和不便。比如要用乐观锁，JPA 虽然有 @Version 注解处理，但是只能在 save 的时候才能用到。  </p>\n<p>用 MyBatis 感觉是在呼吸自由的新鲜空气，用 JPA 感觉是在地下室。。。  </p>\n<p>那么用 JPA 的朋友，是真的不需要灵活性，从业务设计上就完全解决了这些情况么。      </p>\n<p>本帖带有强烈的个人主观印象，用词如有冒犯到 JPA 用户，请强势打脸，教我做人！</p>\n<p>打工人，打工魂，打工人是人下人 o(╥﹏╥)o   </p>\n<p>提前祝大家新年快乐！</p>\n","last_modified":1612928712,"replies":39,"id":752786},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1612151314","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1612151314","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":43167,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1612151314","stars":7240,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"fescover","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/1529e8b73e1858b9e99d192060a0453d?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/fescover","tagline":null,"twitter":null,"created":1559094804,"avatar_large":"https://cdn.v2ex.com/gravatar/1529e8b73e1858b9e99d192060a0453d?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/1529e8b73e1858b9e99d192060a0453d?s=24&d=retro","location":null,"btc":null,"id":416450},"last_reply_by":"adofsauron","last_touched":1612971334,"title":"想整一个生产力工具","url":"https://www.v2ex.com/t/752785","created":1612927650,"content":"目前主要用于开发 web 和 android，如果 android 版本 app 反响不错，后期可能会做 ios 版本。\r\n\r\n<pre>\r\n该如何选择？\r\n\r\nA.用老的 win 笔记本刷 ubuntu\r\n优点：0 元\r\n缺点：折腾\r\n\r\nB.买 macbook air m1 版本\r\n优点：方便\r\n缺点：10000 元\r\n\r\n</pre>","content_rendered":"<p>目前主要用于开发 web 和 android，如果 android 版本 app 反响不错，后期可能会做 ios 版本。</p>\n<pre>该如何选择？\n\nA.用老的 win 笔记本刷 ubuntu\n优点：0 元\n缺点：折腾\n\nB.买 macbook air m1 版本\n优点：方便\n缺点：10000 元\n\n</pre>","last_modified":1612927685,"replies":36,"id":752785},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168551,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"ModF","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/509c13885458a6ca7a1ccb0788c108dc?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/ModF","tagline":null,"twitter":null,"created":1611727948,"avatar_large":"https://cdn.v2ex.com/gravatar/509c13885458a6ca7a1ccb0788c108dc?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/509c13885458a6ca7a1ccb0788c108dc?s=24&d=retro","location":null,"btc":null,"id":530688},"last_reply_by":"freeze","last_touched":1612974920,"title":"马上过年了，你也来为自己新的一年立个 Flag","url":"https://www.v2ex.com/t/752771","created":1612924323,"content":"1.减肥到 75kg\r\n\r\n 2.11 点半之前要睡觉\r\n\r\n以上。。。","content_rendered":"<p>1.减肥到 75kg</p>\n<p>2.11 点半之前要睡觉</p>\n<p>以上。。。</p>\n","last_modified":1612924323,"replies":28,"id":752771},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168551,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"238357","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/2626059dc3633cffe6aeb5a12e16e8a8?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/238357","tagline":null,"twitter":null,"created":1443056386,"avatar_large":"https://cdn.v2ex.com/gravatar/2626059dc3633cffe6aeb5a12e16e8a8?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/2626059dc3633cffe6aeb5a12e16e8a8?s=24&d=retro","location":null,"btc":null,"id":139615},"last_reply_by":"Ballmer","last_touched":1612969304,"title":"本来觉得狗狗币一文不值，也没有备份钱包，现在重装电脑以后狗狗币暴涨，心情很不爽怎么办","url":"https://www.v2ex.com/t/752822","created":1612940511,"content":"原来挖矿白送的突然变值钱了，然后丢了，感觉心里很失落\r\n各位能出出主意，有什么方法能不让心情不失落","content_rendered":"<p>原来挖矿白送的突然变值钱了，然后丢了，感觉心里很失落\n各位能出出主意，有什么方法能不让心情不失落</p>\n","last_modified":1612940736,"replies":27,"id":752822},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/6353/8fe6/519_large.png?m=1595507885","name":"ideas","avatar_normal":"https://cdn.v2ex.com/navatar/6353/8fe6/519_normal.png?m=1595507885","title":"奇思妙想","url":"https://www.v2ex.com/go/ideas","topics":4468,"footer":"","header":"让你的创意在这里自由流动吧。","title_alternative":"Ideas","avatar_mini":"https://cdn.v2ex.com/navatar/6353/8fe6/519_mini.png?m=1595507885","stars":2277,"aliases":[],"root":false,"id":519,"parent_node_name":"v2ex"},"member":{"username":"supermao","website":"https://fengxiaomao.com","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/db33/f16f/204076_mini.png?m=1512120990","bio":"","url":"https://www.v2ex.com/u/supermao","tagline":"","twitter":"","created":1480656130,"avatar_large":"https://cdn.v2ex.com/avatar/db33/f16f/204076_mini.png?m=1512120990","avatar_mini":"https://cdn.v2ex.com/avatar/db33/f16f/204076_mini.png?m=1512120990","location":"","btc":"","id":204076},"last_reply_by":"daming86","last_touched":1612974154,"title":"想做一个废物作品","url":"https://www.v2ex.com/t/752798","created":1612933683,"content":"一直觉得内卷越来越厉害了\r\n\r\n上学时家长告诉我们要考第一名\r\n\r\n毕业时要我们找好工作，拿高工资\r\n\r\n人到中年则要成家立业，要成功\r\n\r\n而第一名一个班只有一个\r\n\r\n社会上所认为的成功也太过单一化\r\n\r\n很多人在生活中，都活得不快乐，很多事情都身不由己，没有活出自己\r\n\r\n我就想，做一个小程序或者 app，就是想告诉别人，我就是不想那么努力，那么累，我只想快乐一点\r\n\r\n毕竟几十年后，大家都不知道这个世界是什么样了\r\n\r\n生不带来，死不带去\r\n\r\n我在世间活得废物一点有什么不可以\r\n\r\n活得快乐最重要\r\n\r\n让他们有一种心灵的栖息之地，让很多人远离抑郁，远离自杀","content_rendered":"<p>一直觉得内卷越来越厉害了</p>\n<p>上学时家长告诉我们要考第一名</p>\n<p>毕业时要我们找好工作，拿高工资</p>\n<p>人到中年则要成家立业，要成功</p>\n<p>而第一名一个班只有一个</p>\n<p>社会上所认为的成功也太过单一化</p>\n<p>很多人在生活中，都活得不快乐，很多事情都身不由己，没有活出自己</p>\n<p>我就想，做一个小程序或者 app，就是想告诉别人，我就是不想那么努力，那么累，我只想快乐一点</p>\n<p>毕竟几十年后，大家都不知道这个世界是什么样了</p>\n<p>生不带来，死不带去</p>\n<p>我在世间活得废物一点有什么不可以</p>\n<p>活得快乐最重要</p>\n<p>让他们有一种心灵的栖息之地，让很多人远离抑郁，远离自杀</p>\n","last_modified":1612933843,"replies":26,"id":752798},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168551,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"dtgxx","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/0d477d0a6d67ec2d7eeb09a3fe544a5a?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/dtgxx","tagline":"","twitter":null,"created":1584723179,"avatar_large":"https://cdn.v2ex.com/gravatar/0d477d0a6d67ec2d7eeb09a3fe544a5a?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/0d477d0a6d67ec2d7eeb09a3fe544a5a?s=24&d=retro","location":"","btc":null,"id":477915},"last_reply_by":"dtgxx","last_touched":1612968428,"title":"急求各位老铁帮忙，扰民该不该报警？","url":"https://www.v2ex.com/t/752851","created":1612951257,"content":"新一线城市吧，市内。隔壁邻居，持续 2 个半月了，一共有过三次大型的半夜吵闹，凌晨 2-4 点，噼里啪啦，放音乐，声音很大，鬼哭狼嚎，其余放音乐声音不是那么大不计其数。（我是这次春节回家听老人讲起的）\r\n\r\n---\r\n\r\n那屋子住着一男一女，经常看到楼道里一堆啤酒瓶子。从没主动找过他们，第一感觉是根本不是那种能接受劝阻的人，再一个是找个扰民我还得买个分贝仪界定不？确实挺吵声音挺大。我是不是应该直接报警呢？一般这样报警好使不，有没有报过的，可以匿名报警吗，不想引来麻烦。\r\n\r\n---\r\n\r\n麻烦老铁们给出出主意，不要意气用事，家里还住着老人。\r\n\r\n--- \r\n\r\n还有一个问题，是否可以匿名举报扰民呢？虽然大概率能猜出来是我这报警。能匿名吗？","content_rendered":"<p>新一线城市吧，市内。隔壁邻居，持续 2 个半月了，一共有过三次大型的半夜吵闹，凌晨 2-4 点，噼里啪啦，放音乐，声音很大，鬼哭狼嚎，其余放音乐声音不是那么大不计其数。（我是这次春节回家听老人讲起的）</p>\n<hr/>\n<p>那屋子住着一男一女，经常看到楼道里一堆啤酒瓶子。从没主动找过他们，第一感觉是根本不是那种能接受劝阻的人，再一个是找个扰民我还得买个分贝仪界定不？确实挺吵声音挺大。我是不是应该直接报警呢？一般这样报警好使不，有没有报过的，可以匿名报警吗，不想引来麻烦。</p>\n<hr/>\n<p>麻烦老铁们给出出主意，不要意气用事，家里还住着老人。</p>\n<hr/>\n<p>还有一个问题，是否可以匿名举报扰民呢？虽然大概率能猜出来是我这报警。能匿名吗？</p>\n","last_modified":1612951404,"replies":23,"id":752851},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1611468499","name":"apple","avatar_normal":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1611468499","title":"Apple","url":"https://www.v2ex.com/go/apple","topics":13962,"footer":"","header":"设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。","title_alternative":"Apple","avatar_mini":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1611468499","stars":1710,"aliases":[],"root":false,"id":184,"parent_node_name":"hardware"},"member":{"username":"copo","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/1b824842a53c8a89921fe63625a98f15?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/copo","tagline":null,"twitter":null,"created":1559210196,"avatar_large":"https://cdn.v2ex.com/gravatar/1b824842a53c8a89921fe63625a98f15?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/1b824842a53c8a89921fe63625a98f15?s=24&d=retro","location":null,"btc":null,"id":416974},"last_reply_by":"Cavolo","last_touched":1612972397,"title":"Clubhouse 邀请码","url":"https://www.v2ex.com/t/752871","created":1612965238,"content":"clubhouse 邀请码，有要的吗？ 50 元出，需要的请加 QQ：3361393767，备注：clubhouse","content_rendered":"clubhouse 邀请码，有要的吗？ 50 元出，需要的请加 QQ：3361393767，备注：clubhouse","last_modified":1612965271,"replies":23,"id":752871},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168532,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"RudyS","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/089b1113d8c41bc1c39233293ecb84ba?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/RudyS","tagline":null,"twitter":null,"created":1594949806,"avatar_large":"https://cdn.v2ex.com/gravatar/089b1113d8c41bc1c39233293ecb84ba?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/089b1113d8c41bc1c39233293ecb84ba?s=24&d=retro","location":null,"btc":null,"id":499531},"last_reply_by":"yvescheung","last_touched":1612929270,"title":"让我看看那些人还在上班","url":"https://www.v2ex.com/t/752770","created":1612924240,"content":"","content_rendered":"","last_modified":1612924240,"replies":23,"id":752770},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1612338828","name":"career","avatar_normal":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1612338828","title":"职场话题","url":"https://www.v2ex.com/go/career","topics":10778,"footer":"","header":"这里，我们聊聊那些工作中遇到的开心和不开心的事。","title_alternative":"Career","avatar_mini":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1612338828","stars":1924,"aliases":[],"root":false,"id":770,"parent_node_name":"work"},"member":{"username":"zhoudaiyu","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/b75f/9ee0/163414_mini.png?m=1574570790","bio":"","url":"https://www.v2ex.com/u/zhoudaiyu","tagline":"","twitter":"","created":1458024699,"avatar_large":"https://cdn.v2ex.com/avatar/b75f/9ee0/163414_mini.png?m=1574570790","avatar_mini":"https://cdn.v2ex.com/avatar/b75f/9ee0/163414_mini.png?m=1574570790","location":"","btc":"","id":163414},"last_reply_by":"Cielsky","last_touched":1612961569,"title":"春节期间部门组织团建是什么操作？","url":"https://www.v2ex.com/t/752823","created":1612940953,"content":"坐标帝都，部门打算在初六组织大家去团建，轰趴 /手工 /运动乐园三选一，还在投票。美其名曰都怕大家在家无聊（因为这次公司没让一个人能回老家）","content_rendered":"<p>坐标帝都，部门打算在初六组织大家去团建，轰趴 /手工 /运动乐园三选一，还在投票。美其名曰都怕大家在家无聊（因为这次公司没让一个人能回老家）</p>\n","last_modified":1612940953,"replies":21,"id":752823},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168541,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"BinZaA","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/217c/9a27/260419_mini.png?m=1612928587","bio":null,"url":"https://www.v2ex.com/u/BinZaA","tagline":null,"twitter":null,"created":1508253577,"avatar_large":"https://cdn.v2ex.com/avatar/217c/9a27/260419_mini.png?m=1612928587","avatar_mini":"https://cdn.v2ex.com/avatar/217c/9a27/260419_mini.png?m=1612928587","location":null,"btc":null,"id":260419},"last_reply_by":"Daybyedream","last_touched":1612948625,"title":"如何克服“想得太多，做的太少”的心态。","url":"https://www.v2ex.com/t/752801","created":1612934604,"content":"假期临近时惊觉自己已经到了人生的第二个本命年的焦虑阶段，虽然学校就读专业不是很理想，但也算传统 IT 方向。靠简历和面试应付混了一年多工龄，都是简单的网安等保和远程视频业务，实质上做的基本是服务内容。\r\n\r\n其实很早（ 18 、19 年）的时候就考虑过自己的情况，但是拖延症、不自律等因素还是造成了现在这个局面。\r\n\r\n·玩了大半辈子游戏，却依旧停留在玩家层次，写过游戏经历以及相关的分析和理解，但也只是应付自己心里草草了事。（甚至 PPT 还拿去投了金山的游戏相关岗位，笑）\r\n\r\n·以前实习期间做的是较简单的移动端 web 开发，不过当时是个极其小型的公司，草台班子（不是尬黑，确实），跟着几个部门同事一起开溜后回学校继续混日子了。\r\n\r\n·早年混 B 站动画区的时候因爱好学了点剪辑和 MG，有认真考虑过就业，但是在设计和审美这一块相比数媒或者美院科班生劣势太大，但是在未来工业影视流程逐渐转为自动化和 AI 化的趋势下计算机专业也有一定的优势，甚至还能怒转图形学或者 VR 。（表现欲，只不过自己会刻意压着，特别是平时多人沟通和最近职场有感，想尝试却又担心种种）\r\n\r\n·跟现在工作相关的就是网络安全这一块，其实专业跟这行比较接近，但是涉及的技术面非常广，类似爆栈工程师，底层密码学与硬件，应用层还要懂代码。入职前老板想问我做技术还是做业务不知道哪根筋抽了说去做业务，结果工作时发现跟实施毫不相关，偏市场方向。\r\n\r\n\r\n懒狗、拖延症、眼高手低、自知而不作为，没错就是题主。\r\n\r\n是不是应该找个心理医生看下，天天调侃抑郁抑郁，我不会真抑郁了吧。（原来我才是小丑.jpg ）\r\n\r\n其实就想问问社畜后怎么做到自律。","content_rendered":"假期临近时惊觉自己已经到了人生的第二个本命年的焦虑阶段，虽然学校就读专业不是很理想，但也算传统 IT 方向。靠简历和面试应付混了一年多工龄，都是简单的网安等保和远程视频业务，实质上做的基本是服务内容。<br /><br />其实很早（ 18 、19 年）的时候就考虑过自己的情况，但是拖延症、不自律等因素还是造成了现在这个局面。<br /><br />·玩了大半辈子游戏，却依旧停留在玩家层次，写过游戏经历以及相关的分析和理解，但也只是应付自己心里草草了事。（甚至 PPT 还拿去投了金山的游戏相关岗位，笑）<br /><br />·以前实习期间做的是较简单的移动端 web 开发，不过当时是个极其小型的公司，草台班子（不是尬黑，确实），跟着几个部门同事一起开溜后回学校继续混日子了。<br /><br />·早年混 B 站动画区的时候因爱好学了点剪辑和 MG，有认真考虑过就业，但是在设计和审美这一块相比数媒或者美院科班生劣势太大，但是在未来工业影视流程逐渐转为自动化和 AI 化的趋势下计算机专业也有一定的优势，甚至还能怒转图形学或者 VR 。（表现欲，只不过自己会刻意压着，特别是平时多人沟通和最近职场有感，想尝试却又担心种种）<br /><br />·跟现在工作相关的就是网络安全这一块，其实专业跟这行比较接近，但是涉及的技术面非常广，类似爆栈工程师，底层密码学与硬件，应用层还要懂代码。入职前老板想问我做技术还是做业务不知道哪根筋抽了说去做业务，结果工作时发现跟实施毫不相关，偏市场方向。<br /><br /><br />懒狗、拖延症、眼高手低、自知而不作为，没错就是题主。<br /><br />是不是应该找个心理医生看下，天天调侃抑郁抑郁，我不会真抑郁了吧。（原来我才是小丑.jpg ）<br /><br />其实就想问问社畜后怎么做到自律。","last_modified":1612934604,"replies":19,"id":752801},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_large.png?m=1607656854","name":"macos","avatar_normal":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_normal.png?m=1607656854","title":"macOS","url":"https://www.v2ex.com/go/macos","topics":16181,"footer":"<a href=\"/mbp\">MacBook Pro</a> 及 <a href=\"/go/imac\">iMac</a> 等 <a href=\"/go/apple\">Apple</a> 公司设计的计算机所运行的操作系统。<a href=\"/go/idev\">iOS</a> 的基础。","header":"The world’s most advanced desktop operating system.","title_alternative":"macOS","avatar_mini":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_mini.png?m=1607656854","stars":4219,"aliases":[],"root":false,"id":22,"parent_node_name":"os"},"member":{"username":"Themyth","website":"www.yu.gs","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/8d2e/f026/62072_mini.png?m=1401978098","bio":"","url":"https://www.v2ex.com/u/Themyth","tagline":"qq 410733","twitter":"","created":1399393728,"avatar_large":"https://cdn.v2ex.com/avatar/8d2e/f026/62072_mini.png?m=1401978098","avatar_mini":"https://cdn.v2ex.com/avatar/8d2e/f026/62072_mini.png?m=1401978098","location":"Haikou","btc":"","id":62072},"last_reply_by":"ByteCat","last_touched":1612973734,"title":"想给一个小主机装 Linux ， macOS 下有什么简单的制作 u 盘启动盘方法吗","url":"https://www.v2ex.com/t/752868","created":1612963709,"content":"有台技嘉的 brix 小主机，请问 macOS m1 下，有什么简单的给它装系统的方案吗？\r\n装 arch linux 或者 debian centos 都行……\r\n谢谢","content_rendered":"有台技嘉的 brix 小主机，请问 macOS m1 下，有什么简单的给它装系统的方案吗？<br />装 arch linux 或者 debian centos 都行……<br />谢谢","last_modified":1612963709,"replies":18,"id":752868},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/d67d/8ab4/39_large.png?m=1608686187","name":"android","avatar_normal":"https://cdn.v2ex.com/navatar/d67d/8ab4/39_normal.png?m=1608686187","title":"Android","url":"https://www.v2ex.com/go/android","topics":8481,"footer":"","header":"来自 <a href=\"/go/google\">Google</a> 的开放源代码智能手机平台。","title_alternative":"Android","avatar_mini":"https://cdn.v2ex.com/navatar/d67d/8ab4/39_mini.png?m=1608686187","stars":4701,"aliases":[],"root":false,"id":39,"parent_node_name":"hardware"},"member":{"username":"dvbuzhidao1","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/aabe76e22433c97987bec451e9a8cd87?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/dvbuzhidao1","tagline":null,"twitter":null,"created":1503276168,"avatar_large":"https://cdn.v2ex.com/gravatar/aabe76e22433c97987bec451e9a8cd87?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/aabe76e22433c97987bec451e9a8cd87?s=24&d=retro","location":null,"btc":null,"id":249834},"last_reply_by":"Maskeney","last_touched":1612950143,"title":"Android 微信在不开 storage 权限的情况下不支持系统相册图片分享，摆明了要访问用户文件","url":"https://www.v2ex.com/t/752799","created":1612933752,"content":"Android 上的微信以前不给 **storage** 权限和**电话**权限都不能打开，之后是不给**storage**权限聊天和朋友圈不能看**图**\r\n\r\n\r\n这些最近都改善了，肯定被其它势力(Android 11 规范或者是 gj 有关部门)所要挟，不相信腾讯会主动在这方面有所改良。\r\n\r\n\r\n用 Android 手机上的**系统相册**分享图片到**微信**(多数应用可以用此规避应用对存储权限的访问来访问照片，QQ TIM 其实都是支持的)，在不给**storage**权限的情况下显示资源获取失败，这摆明了是要喂用户吃屎啊。就不说 skype 那种使用手机系统自带的文件 picker 照顾用户隐私的做法了。仗着使用用户多，喂你💩也不得不吃。\r\n\r\n\r\n接入 mipush，hms 啥的就先不提了。","content_rendered":"Android 上的微信以前不给 **storage** 权限和**电话**权限都不能打开，之后是不给**storage**权限聊天和朋友圈不能看**图**<br /><br /><br />这些最近都改善了，肯定被其它势力(Android 11 规范或者是 gj 有关部门)所要挟，不相信腾讯会主动在这方面有所改良。<br /><br /><br />用 Android 手机上的**系统相册**分享图片到**微信**(多数应用可以用此规避应用对存储权限的访问来访问照片，QQ TIM 其实都是支持的)，在不给**storage**权限的情况下显示资源获取失败，这摆明了是要喂用户吃屎啊。就不说 skype 那种使用手机系统自带的文件 picker 照顾用户隐私的做法了。仗着使用用户多，喂你💩也不得不吃。<br /><br /><br />接入 mipush，hms 啥的就先不提了。","last_modified":1612933977,"replies":16,"id":752799},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_large.png?m=1607656854","name":"macos","avatar_normal":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_normal.png?m=1607656854","title":"macOS","url":"https://www.v2ex.com/go/macos","topics":16180,"footer":"<a href=\"/mbp\">MacBook Pro</a> 及 <a href=\"/go/imac\">iMac</a> 等 <a href=\"/go/apple\">Apple</a> 公司设计的计算机所运行的操作系统。<a href=\"/go/idev\">iOS</a> 的基础。","header":"The world’s most advanced desktop operating system.","title_alternative":"macOS","avatar_mini":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_mini.png?m=1607656854","stars":4219,"aliases":[],"root":false,"id":22,"parent_node_name":"os"},"member":{"username":"wzb0909","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/eaed9b8cef73830d3b16c7f34f4f8c63?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/wzb0909","tagline":null,"twitter":null,"created":1544559126,"avatar_large":"https://cdn.v2ex.com/gravatar/eaed9b8cef73830d3b16c7f34f4f8c63?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/eaed9b8cef73830d3b16c7f34f4f8c63?s=24&d=retro","location":null,"btc":null,"id":369765},"last_reply_by":"northisland","last_touched":1612935200,"title":"MacOS 下的 Linux 环境，朋友们都是用什么方案啊。","url":"https://www.v2ex.com/t/752760","created":1612923116,"content":"我用 parallels 开 windows，但是好像并不适合 linux （因为不想要图形界面）","content_rendered":"我用 parallels 开 windows，但是好像并不适合 linux （因为不想要图形界面）","last_modified":1612923116,"replies":16,"id":752760},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168546,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"q9339","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/690d/f45a/314308_mini.png?m=1558593537","bio":null,"url":"https://www.v2ex.com/u/q9339","tagline":null,"twitter":null,"created":1525449900,"avatar_large":"https://cdn.v2ex.com/avatar/690d/f45a/314308_mini.png?m=1558593537","avatar_mini":"https://cdn.v2ex.com/avatar/690d/f45a/314308_mini.png?m=1558593537","location":null,"btc":null,"id":314308},"last_reply_by":"baobao1270","last_touched":1612947852,"title":"对联到底这个是怎么贴的啊？","url":"https://www.v2ex.com/t/752825","created":1612941143,"content":"福旺财旺运气旺，家兴人兴事业兴？\r\n\r\n横额  吉星高照    右边写起的 。\r\n\r\n\r\n\r\n那个是上联  那个是下联？","content_rendered":"福旺财旺运气旺，家兴人兴事业兴？<br /><br />横额  吉星高照    右边写起的 。<br /><br /><br /><br />那个是上联  那个是下联？","last_modified":1612941143,"replies":15,"id":752825},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1612151314","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1612151314","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":43167,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1612151314","stars":7240,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"darknoll","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/013a8af938a5a5c48fdc773ebc637792?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/darknoll","tagline":null,"twitter":null,"created":1488948145,"avatar_large":"https://cdn.v2ex.com/gravatar/013a8af938a5a5c48fdc773ebc637792?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/013a8af938a5a5c48fdc773ebc637792?s=24&d=retro","location":null,"btc":null,"id":219625},"last_reply_by":"vandort","last_touched":1612971909,"title":"没有高并发的场景，整微服务、服务发现、集群啥的，是不是有点步子迈太大了？","url":"https://www.v2ex.com/t/752843","created":1612948279,"content":"我司做制造业相关的软件，一般都是部署在公司内网，原先都是桌面程序，socket 通信，现在大势所趋需要转型到 web，领导提出的架构:要用微服务、服务发现、集群这些做，是不是有点杀鸡用牛刀了？","content_rendered":"我司做制造业相关的软件，一般都是部署在公司内网，原先都是桌面程序，socket 通信，现在大势所趋需要转型到 web，领导提出的架构:要用微服务、服务发现、集群这些做，是不是有点杀鸡用牛刀了？","last_modified":1612948279,"replies":14,"id":752843},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/8613/985e/90_large.png?m=1610084956","name":"python","avatar_normal":"https://cdn.v2ex.com/navatar/8613/985e/90_normal.png?m=1610084956","title":"Python","url":"https://www.v2ex.com/go/python","topics":14084,"footer":"","header":"这里讨论各种 Python 语言编程话题，也包括 Django，Tornado 等框架的讨论。这里是一个能够帮助你解决实际问题的地方。","title_alternative":"Python","avatar_mini":"https://cdn.v2ex.com/navatar/8613/985e/90_mini.png?m=1610084956","stars":9453,"aliases":[],"root":false,"id":90,"parent_node_name":"programming"},"member":{"username":"yaleyu","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/fee72cc34d0553ad0093be38385d3f5c?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/yaleyu","tagline":null,"twitter":null,"created":1482859957,"avatar_large":"https://cdn.v2ex.com/gravatar/fee72cc34d0553ad0093be38385d3f5c?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/fee72cc34d0553ad0093be38385d3f5c?s=24&d=retro","location":null,"btc":null,"id":207958},"last_reply_by":"winglight2016","last_touched":1612941052,"title":"pandas 花了 7 分 32 秒生成一张[45639 rows x 7 columns]的表，实在是太太太慢了，求更快的方法","url":"https://www.v2ex.com/t/752784","created":1612927555,"content":"原始数据结构如下，总共 7000 多条，想扁平化然后放到 pd 里面做进一步的处理\r\n\r\n```\r\n>>> len(funds)\r\n7597\r\n>>> funds[0]\r\n{'000005': {'company': '嘉实', 'name': '嘉实增强信用定期债券', 'type': '定开债券', 'earning': {'1m': 0.1, '3m': 1.0, '6m': 0.85, '1y': 2.59}, 'hold_stocks': [{'code': '601966', 'name': '玲珑轮胎', 'percentage': '0.51%', 'volume': 0.67, 'value': 23.48}, {'code': '002745', 'name': '木林森', 'percentage': '0.47%', 'volume': 1.5, 'value': 21.92}]}}\r\n>>> funds[-1]\r\n{'970008': {'company': '华安', 'name': '华安证券汇赢增利一年持有混合 C', 'type': '混合型', 'earning': {'1m': -0.55, '3m': -0.58, '6m': 0.67, '1y': 0}, 'hold_stocks': [{'code': '300692', 'name': '中环环保', 'percentage': '0.72%', 'volume': 31.81, 'value': 496.79}, {'code': '603012', 'name': '创力集团', 'percentage': '0.67%', 'volume': 72.28, 'value': 465.48}, {'code': '300197', 'name': '铁汉生态', 'percentage': '0.64%', 'volume': 138.93, 'value': 440.39}, {'code': '002562', 'name': '兄弟科技', 'percentage': '0.23%', 'volume': 31.0, 'value': 160.27}]}}\r\n>>>\r\n```\r\n\r\n生成 df 代码如下:\r\n\r\n```\r\ndf = pd.DataFrame(columns=['fund_code', 'fund_company', 'stock_code', 'stock_name', 'stock_percentage', 'stock_volume', 'stock_value'])\r\ni = 0\r\nfor fund in funds:\r\n    fund_code = list(fund.keys())[0]\r\n    fund_company = list(fund.values())[0]['company']\r\n    if list(fund.values())[0]['hold_stocks']:\r\n        for hold_stock in list(fund.values())[0]['hold_stocks']:\r\n            stock_code = hold_stock['code'].strip()\r\n            stock_name = hold_stock['name'].strip()\r\n            stock_percentage = float(hold_stock['percentage'].strip('%'))\r\n            stock_volume = hold_stock['volume']\r\n            stock_value = hold_stock['value']\r\n            df.loc[i] = [fund_code, fund_company, stock_code, stock_name, stock_percentage, stock_volume, stock_value]\r\n            i += 1\r\n    else:\r\n        df.loc[i] = [fund_code, fund_company, '', '', 0, 0, 0]  # 不持仓任何股票则仅记录基金代码和基金公司\r\n        i += 1\r\n```","content_rendered":"<p>原始数据结构如下，总共 7000 多条，想扁平化然后放到 pd 里面做进一步的处理</p>\n<pre><code>&gt;&gt;&gt; len(funds)\n7597\n&gt;&gt;&gt; funds[0]\n{'000005': {'company': '嘉实', 'name': '嘉实增强信用定期债券', 'type': '定开债券', 'earning': {'1m': 0.1, '3m': 1.0, '6m': 0.85, '1y': 2.59}, 'hold_stocks': [{'code': '601966', 'name': '玲珑轮胎', 'percentage': '0.51%', 'volume': 0.67, 'value': 23.48}, {'code': '002745', 'name': '木林森', 'percentage': '0.47%', 'volume': 1.5, 'value': 21.92}]}}\n&gt;&gt;&gt; funds[-1]\n{'970008': {'company': '华安', 'name': '华安证券汇赢增利一年持有混合 C', 'type': '混合型', 'earning': {'1m': -0.55, '3m': -0.58, '6m': 0.67, '1y': 0}, 'hold_stocks': [{'code': '300692', 'name': '中环环保', 'percentage': '0.72%', 'volume': 31.81, 'value': 496.79}, {'code': '603012', 'name': '创力集团', 'percentage': '0.67%', 'volume': 72.28, 'value': 465.48}, {'code': '300197', 'name': '铁汉生态', 'percentage': '0.64%', 'volume': 138.93, 'value': 440.39}, {'code': '002562', 'name': '兄弟科技', 'percentage': '0.23%', 'volume': 31.0, 'value': 160.27}]}}\n&gt;&gt;&gt;\n</code></pre>\n<p>生成 df 代码如下:</p>\n<pre><code>df = pd.DataFrame(columns=['fund_code', 'fund_company', 'stock_code', 'stock_name', 'stock_percentage', 'stock_volume', 'stock_value'])\ni = 0\nfor fund in funds:\n    fund_code = list(fund.keys())[0]\n    fund_company = list(fund.values())[0]['company']\n    if list(fund.values())[0]['hold_stocks']:\n        for hold_stock in list(fund.values())[0]['hold_stocks']:\n            stock_code = hold_stock['code'].strip()\n            stock_name = hold_stock['name'].strip()\n            stock_percentage = float(hold_stock['percentage'].strip('%'))\n            stock_volume = hold_stock['volume']\n            stock_value = hold_stock['value']\n            df.loc[i] = [fund_code, fund_company, stock_code, stock_name, stock_percentage, stock_volume, stock_value]\n            i += 1\n    else:\n        df.loc[i] = [fund_code, fund_company, '', '', 0, 0, 0]  # 不持仓任何股票则仅记录基金代码和基金公司\n        i += 1\n</code></pre>\n","last_modified":1612927555,"replies":14,"id":752784},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":168540,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3160,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"kloudmuka","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/f4542e80d3ead9e24905d4a431012fb3?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/kloudmuka","tagline":null,"twitter":null,"created":1433051516,"avatar_large":"https://cdn.v2ex.com/gravatar/f4542e80d3ead9e24905d4a431012fb3?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/f4542e80d3ead9e24905d4a431012fb3?s=24&d=retro","location":null,"btc":null,"id":119790},"last_reply_by":"AndyAO","last_touched":1612948321,"title":"健康码的扫码结果是否是静态的","url":"https://www.v2ex.com/t/752796","created":1612933040,"content":"健康码现在是常态了，但用支付宝里面的健康码小程序扫了一下自己的绿码，里面的子项好像都是第一次领取健康码时候的结果，而且里面大部分内容都是自行申报的，那么是否可以判断这个健康码实际上是静态结果呢","content_rendered":"健康码现在是常态了，但用支付宝里面的健康码小程序扫了一下自己的绿码，里面的子项好像都是第一次领取健康码时候的结果，而且里面大部分内容都是自行申报的，那么是否可以判断这个健康码实际上是静态结果呢","last_modified":1612933040,"replies":13,"id":752796},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/72b3/2a1f/57_large.png?m=1575483197","name":"c","avatar_normal":"https://cdn.v2ex.com/navatar/72b3/2a1f/57_normal.png?m=1575483197","title":"C","url":"https://www.v2ex.com/go/c","topics":833,"footer":"","header":"","title_alternative":"C","avatar_mini":"https://cdn.v2ex.com/navatar/72b3/2a1f/57_mini.png?m=1575483197","stars":906,"aliases":[],"root":false,"id":57,"parent_node_name":"programming"},"member":{"username":"monkeyNik","website":"melang.org","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/d196/0d1a/499929_mini.png?m=1610940712","bio":"","url":"https://www.v2ex.com/u/monkeyNik","tagline":"","twitter":null,"created":1595216023,"avatar_large":"https://cdn.v2ex.com/avatar/d196/0d1a/499929_mini.png?m=1610940712","avatar_mini":"https://cdn.v2ex.com/avatar/d196/0d1a/499929_mini.png?m=1610940712","location":"","btc":null,"id":499929},"last_reply_by":"jfcai","last_touched":1612963058,"title":"开发利器——C 语言必备实用第三方库","url":"https://www.v2ex.com/t/752832","created":1612945249,"content":"> 本文转载自本人头条号： https://www.toutiao.com/i6926789516594479624/\r\n>\r\n> 转载请注明出处，感谢！\r\n\r\n对于广大 C 语言开发者来说，缺乏类似 C++ STL 和 Boost 的库会让开发受制于基础库的匮乏，也因此导致了开发效率的骤降。这也使得例如 libevent 这类事件库（基础组件库）一时间大红大紫。\r\n\r\n今天，笔者给大家带来一款基础库，这套库不仅仅提供了常用的数据结构、算法，如红黑树、斐波那契堆、队列、KMP 算法、RSA 算法、各类哈希算法、数据恢复算法等等，还提供了多进程框架、多线程框架、跨平台高性能事件等实用内容。**注意**：这是一款不依赖第三方的库。\r\n\r\n除此以外，它也是笔者之前文章（[Melang 脚本语言]( https://blog.csdn.net/weixin_40960130/article/details/112402552)）中的核心库。这也就意味着，使用该库，不仅可以快速获得上述内容，还可以让开发者所构建的系统很方便地引入脚本语言的功能。\r\n\r\n它就是——**Melon**\r\n\r\n![img]( https://img-blog.csdnimg.cn/20210209112909840.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDk2MDEzMA==,size_16,color_FFFFFF,t_70)\r\n\r\n\r\n\r\nGithub： https://github.com/Water-Melon/Melon 。\r\n\r\n\r\n\r\n下面，笔者便带诸位一览这个库的功能。\r\n\r\n# 数据结构\r\n\r\nMelon 中包含如下数据结构的实现：\r\n\r\n- 双向链表\r\n- 斐波那契堆\r\n- 哈希表\r\n- 队列\r\n- 红黑树\r\n- 栈\r\n\r\n其中：\r\n\r\n- 双向链表使用宏实现，可以通过两行宏函数即可完成双向队列插入和删除操作的声明和定义。\r\n- 斐波那契堆是一个最小堆，在库中的事件功能中用于实现定时器的维护管理，当然，也可以单独使用。\r\n\r\n以上结构几乎均可在其对应名称的头文件中找到数据结构定义以及函数定义。\r\n\r\n一般情况下，数据结构的使用都是函数调用形式，因此也尽可能降低了不同组件间的耦合度。\r\n\r\n# 算法\r\n\r\nMelon 中包含的算法如下：\r\n\r\n- 加密算法：AES 、DES 、3DES 、RC4 、RSA\r\n- 哈希算法：MD5 、SHA1 、SHA256\r\n- Base64\r\n- 大数计算\r\n- FEC\r\n- JSON\r\n- 矩阵运算\r\n- 里德所罗门编码\r\n- 正则匹配算法\r\n- KMP\r\n\r\n如上算法基本都在其各自头文件中可以找到对应的函数声明以及必要的数据结构定义。\r\n\r\n其中，FEC 与里德所罗门编码均属于纠错码，FEC 常用于 RTP 中做数据修复，而里德所罗门编码既可以用于实时语音中丢包恢复，也可以用于冗余阵列（ RAID ）和其他 UDP 丢包恢复的场景。关于里德所罗门编码，感兴趣的读者可以阅读笔者之前的文章：[神奇的数据恢复算法]( https://www.toutiao.com/i6784970487358292488/?group_id=6784970487358292488)。\r\n\r\n# 其他组件\r\n\r\n前面的都是常规操作，这里才是重头戏。\r\n\r\nMelon 中还包括如下实用组件：\r\n\r\n- 内存池\r\n- 数据链\r\n- TCP 封装\r\n- 事件机制\r\n- 文件缓存\r\n- HTTP 处理\r\n- 脚本语言\r\n- 词法分析器\r\n- websocket\r\n- 多进程框架\r\n- 多线程框架\r\n\r\n因 Melon 作者 Nginx 中毒较深，所以 Melon 中部分机制与 Nginx 较为相似。\r\n\r\n**内存池：**这里内存池不仅支持对从堆中分配的内存进行管理，还支持对共享内存的管理。\r\n\r\n**数据链与 TCP 封装：**TCP 封装中包含了阻塞与非阻塞下的收发逻辑，并利用数据链结构来存放发送数据与接收数据。\r\n\r\n**事件机制：**事件机制中不仅支持 epoll 、select，还支持 Kqueue，库在编译前会自行检测平台支持情况。事件包含了：\r\n\r\n- 句柄（文件描述符）事件：读、写、出错事件，以及超时事件（主要用于超时断开链接）；\r\n- 定时事件（与句柄超时是两码事）；\r\n- 信号处理事件：这里的信号处理并非一个信号只能有一个处理事件，而是设置多少个处理函数就会执行多少个；\r\n\r\n**文件缓存：**参考 Nginx 文件缓存，避免对同一文件的重复打开浪费文件描述符资源。\r\n\r\n**HTTP：**包含了 HTTP 的接收解析和发送，该套接口依赖于**数据链**结构来进行处理，因此可配合**TCP 封装**一同使用。\r\n\r\n**脚本语言：**内容较多，可另行参考：[Melang 脚本语言]( https://blog.csdn.net/weixin_40960130/article/details/112402552)。\r\n\r\n**词法分析器：**之所以这个单独算一个功能组件，是因为在 Melon 中，配置文件解析就是使用该词法分析器处理的。仅通过三行 C 代码就可以实现一个最最基础的词法分析器，这也归功于 C 语言宏的强大。\r\n\r\n**websocket：**该部分依赖于**HTTP**组件。\r\n\r\n**多进程：**多进程采用一主多从模式，主进程做管理，从进程处理实际业务。主进程与从进程之间由 socketpair 相连，因此从进程异常退出，主进程会立刻拉起一个新的子进程，同时主子进程也可以通过该 socketpair 进行数据通信。除了自身子进程可以管理，也可以通过配置文件配置来拉起其他程序作为自己的子进程来管理，有些类似于 supervisord 。\r\n\r\n**多线程：**多线程分为两类，一类是常规的线程池，另一类是模块化的线程。后者也是一主多从模型，主与子之间是通过 socketpair 进行通信，而每一个子线程都有其入口函数（类似 main 函数），每一个子线程通常都是处理一类单一事务。\r\n\r\n# 使用举例\r\n\r\n上面说了那么多，下面就来看一个多进程的例子。\r\n\r\n首先，我们要先安装 Melon：\r\n\r\n```bash\r\n$ git clone https://github.com/Water-Melon/Melon.git\r\n$ ./configure\r\n$ make\r\n$ sudo make install\r\n$ sudo echo \"/usr/local/melon/lib/\" >> /etc/ld.so.conf\r\n$ sudo ldconfig\r\n```\r\n\r\n\r\n安装好后，Melon 会被安装在 /usr/local/melon 下。\r\n\r\n接着，我们创建一个名为 hello.c 的源文件来完成我们期望的功能：\r\n\r\n```cpp\r\n#include <stdio.h>\r\n#include \"mln_core.h\"\r\n#include \"mln_log.h\"\r\n#include \"mln_event.h\"\r\n\r\nchar text[1024];\r\n\r\nstatic int global_init(void);\r\nstatic void worker_process(mln_event_t *ev);\r\nstatic void print_handler(mln_event_t *ev, void *data);\r\n\r\nint main(int argc, char *argv[])\r\n{\r\n    struct mln_core_attr cattr;\r\n    cattr.argc = argc;\r\n    cattr.argv = argv;\r\n    cattr.global_init = global_init;\r\n    cattr.worker_process = worker_process;\r\n    return mln_core_init(&cattr);\r\n}\r\n\r\nstatic int global_init(void)\r\n{\r\n    //global variable init function\r\n    int n = snprintf(text, sizeof(text)-1, \"hello world\\n\");\r\n    text[n] = 0;\r\n    return 0;\r\n}\r\n\r\nstatic void worker_process(mln_event_t *ev)\r\n{\r\n    //we can set event handler here\r\n    //let's set a timer\r\n    mln_event_set_timer(ev, 1000, text, print_handler);\r\n}\r\n\r\nstatic void print_handler(mln_event_t *ev, void *data)\r\n{\r\n    mln_log(debug, \"%s\\n\", (char *)data);\r\n    mln_event_set_timer(ev, 1000, data, print_handler);\r\n}\r\n```\r\n\r\n\r\n这段代码主要是初始化了一个全局变量，然后给每一个子进程创建了一个定时事件，即每一秒中输出一个 hello world 。\r\n\r\n我们先进行编译链接生成可执行程序：\r\n\r\n```bash\r\n$ gcc -o hello hello.c -I /usr/local/melon/include/ -L /usr/local/melon/lib/ -lmelon\r\n```\r\n\r\n\r\n然后，我们需要先修改 Melon 库的配置文件：\r\n\r\n```\r\n$ sudo vim /usr/local/melon/conf/melon.conf\r\n\r\nlog_level \"none\";\r\n//user \"root\";\r\ndaemon off;\r\ncore_file_size \"unlimited\";\r\n//max_nofile 1024;\r\nworker_proc 1;\r\nthread_mode off;\r\nframework off;\r\nlog_path \"/usr/local/melon/logs/melon.log\";\r\n/*\r\n * Configurations in the 'exec_proc' are the\r\n * processes which are customized by user.\r\n *\r\n * Here is an example to show you how to\r\n * spawn a program.\r\n *     keepalive \"/tmp/a.out\" [\"arg1\" \"arg2\" ...]\r\n * The command in this example is 'keepalive' that\r\n * indicate master process to supervise this\r\n * process. If process is killed, master process\r\n * would restart this program.\r\n * If you don't want master to restart it, you can\r\n *     default \"/tmp/a.out\" [\"arg1\" \"arg2\" ...]\r\n *\r\n * But you should know that there is another\r\n * arugment after the last argument you write here.\r\n * That is the file descriptor which is used to\r\n * communicate with master process.\r\n */\r\nexec_proc {\r\n   // keepalive \"/tmp/a\";\r\n}\r\nthread_exec {\r\n//    restart \"hello\" \"hello\" \"world\";\r\n//    default \"haha\";\r\n}\r\n```\r\n\r\n我们做如下修改:\r\n\r\n- framework off; --> framework on;\r\n- worker_proc 1; --> worker_proc 3;\r\n\r\n这样，多进程框架将被启用，且会产生三个子进程。\r\n\r\n程序启动后如下：\r\n\r\n```\r\n$ ./hello\r\nStart up worker process No.1\r\nStart up worker process No.2\r\nStart up worker process No.3\r\n02/08/2021 09:34:46 GMT DEBUG: hello.c:print_handler:39: PID:25322 hello world\r\n\r\n02/08/2021 09:34:46 GMT DEBUG: hello.c:print_handler:39: PID:25323 hello world\r\n\r\n02/08/2021 09:34:46 GMT DEBUG: hello.c:print_handler:39: PID:25324 hello world\r\n\r\n02/08/2021 09:34:47 GMT DEBUG: hello.c:print_handler:39: PID:25322 hello world\r\n\r\n02/08/2021 09:34:47 GMT DEBUG: hello.c:print_handler:39: PID:25323 hello world\r\n\r\n02/08/2021 09:34:47 GMT DEBUG: hello.c:print_handler:39: PID:25324 hello world\r\n\r\n...\r\n```\r\n\r\n这时，可以 ps 看一下，一共存在四个 hello 进程，一个为主，其余三个为子进程。\r\n\r\n# 小结\r\n\r\n事实上，Melon 并不会有过多条条框框需要开发者小心谨慎怕踩坑。与 Skynet 类似，Melon 提供的绝大多数内容都可独立使用，而不必一定与多进程多线程框架结合。因此，这也给了使用者极大的自由度。\r\n\r\n------\r\n\r\n\r\n\r\nMelon 的官方 QQ 群号：756582294\r\n\r\n\r\n\r\n感谢阅读，欢迎各位在评论区留言评论。","content_rendered":"<blockquote>\n<p>本文转载自本人头条号： <a href=\"https://www.toutiao.com/i6926789516594479624/\" rel=\"nofollow\">https://www.toutiao.com/i6926789516594479624/</a></p>\n<p>转载请注明出处，感谢！</p>\n</blockquote>\n<p>对于广大 C 语言开发者来说，缺乏类似 C++ STL 和 Boost 的库会让开发受制于基础库的匮乏，也因此导致了开发效率的骤降。这也使得例如 libevent 这类事件库（基础组件库）一时间大红大紫。</p>\n<p>今天，笔者给大家带来一款基础库，这套库不仅仅提供了常用的数据结构、算法，如红黑树、斐波那契堆、队列、KMP 算法、RSA 算法、各类哈希算法、数据恢复算法等等，还提供了多进程框架、多线程框架、跨平台高性能事件等实用内容。<strong>注意</strong>：这是一款不依赖第三方的库。</p>\n<p>除此以外，它也是笔者之前文章（<a href=\"https://blog.csdn.net/weixin_40960130/article/details/112402552\" rel=\"nofollow\">Melang 脚本语言</a>）中的核心库。这也就意味着，使用该库，不仅可以快速获得上述内容，还可以让开发者所构建的系统很方便地引入脚本语言的功能。</p>\n<p>它就是——<strong>Melon</strong></p>\n<p><img alt=\"img\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img-blog.csdnimg.cn/20210209112909840.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDk2MDEzMA==,size_16,color_FFFFFF,t_70\"/></p>\n<p>Github： <a href=\"https://github.com/Water-Melon/Melon\" rel=\"nofollow\">https://github.com/Water-Melon/Melon</a> 。</p>\n<p>下面，笔者便带诸位一览这个库的功能。</p>\n<h1>数据结构</h1>\n<p>Melon 中包含如下数据结构的实现：</p>\n<ul>\n<li>双向链表</li>\n<li>斐波那契堆</li>\n<li>哈希表</li>\n<li>队列</li>\n<li>红黑树</li>\n<li>栈</li>\n</ul>\n<p>其中：</p>\n<ul>\n<li>双向链表使用宏实现，可以通过两行宏函数即可完成双向队列插入和删除操作的声明和定义。</li>\n<li>斐波那契堆是一个最小堆，在库中的事件功能中用于实现定时器的维护管理，当然，也可以单独使用。</li>\n</ul>\n<p>以上结构几乎均可在其对应名称的头文件中找到数据结构定义以及函数定义。</p>\n<p>一般情况下，数据结构的使用都是函数调用形式，因此也尽可能降低了不同组件间的耦合度。</p>\n<h1>算法</h1>\n<p>Melon 中包含的算法如下：</p>\n<ul>\n<li>加密算法：AES 、DES 、3DES 、RC4 、RSA</li>\n<li>哈希算法：MD5 、SHA1 、SHA256</li>\n<li>Base64</li>\n<li>大数计算</li>\n<li>FEC</li>\n<li>JSON</li>\n<li>矩阵运算</li>\n<li>里德所罗门编码</li>\n<li>正则匹配算法</li>\n<li>KMP</li>\n</ul>\n<p>如上算法基本都在其各自头文件中可以找到对应的函数声明以及必要的数据结构定义。</p>\n<p>其中，FEC 与里德所罗门编码均属于纠错码，FEC 常用于 RTP 中做数据修复，而里德所罗门编码既可以用于实时语音中丢包恢复，也可以用于冗余阵列（ RAID ）和其他 UDP 丢包恢复的场景。关于里德所罗门编码，感兴趣的读者可以阅读笔者之前的文章：<a href=\"https://www.toutiao.com/i6784970487358292488/?group_id=6784970487358292488\" rel=\"nofollow\">神奇的数据恢复算法</a>。</p>\n<h1>其他组件</h1>\n<p>前面的都是常规操作，这里才是重头戏。</p>\n<p>Melon 中还包括如下实用组件：</p>\n<ul>\n<li>内存池</li>\n<li>数据链</li>\n<li>TCP 封装</li>\n<li>事件机制</li>\n<li>文件缓存</li>\n<li>HTTP 处理</li>\n<li>脚本语言</li>\n<li>词法分析器</li>\n<li>websocket</li>\n<li>多进程框架</li>\n<li>多线程框架</li>\n</ul>\n<p>因 Melon 作者 Nginx 中毒较深，所以 Melon 中部分机制与 Nginx 较为相似。</p>\n<p><strong>内存池：</strong>这里内存池不仅支持对从堆中分配的内存进行管理，还支持对共享内存的管理。</p>\n<p><strong>数据链与 TCP 封装：</strong>TCP 封装中包含了阻塞与非阻塞下的收发逻辑，并利用数据链结构来存放发送数据与接收数据。</p>\n<p><strong>事件机制：</strong>事件机制中不仅支持 epoll 、select，还支持 Kqueue，库在编译前会自行检测平台支持情况。事件包含了：</p>\n<ul>\n<li>句柄（文件描述符）事件：读、写、出错事件，以及超时事件（主要用于超时断开链接）；</li>\n<li>定时事件（与句柄超时是两码事）；</li>\n<li>信号处理事件：这里的信号处理并非一个信号只能有一个处理事件，而是设置多少个处理函数就会执行多少个；</li>\n</ul>\n<p><strong>文件缓存：</strong>参考 Nginx 文件缓存，避免对同一文件的重复打开浪费文件描述符资源。</p>\n<p><strong>HTTP：</strong>包含了 HTTP 的接收解析和发送，该套接口依赖于<strong>数据链</strong>结构来进行处理，因此可配合<strong>TCP 封装</strong>一同使用。</p>\n<p><strong>脚本语言：</strong>内容较多，可另行参考：<a href=\"https://blog.csdn.net/weixin_40960130/article/details/112402552\" rel=\"nofollow\">Melang 脚本语言</a>。</p>\n<p><strong>词法分析器：</strong>之所以这个单独算一个功能组件，是因为在 Melon 中，配置文件解析就是使用该词法分析器处理的。仅通过三行 C 代码就可以实现一个最最基础的词法分析器，这也归功于 C 语言宏的强大。</p>\n<p><strong>websocket：</strong>该部分依赖于<strong>HTTP</strong>组件。</p>\n<p><strong>多进程：</strong>多进程采用一主多从模式，主进程做管理，从进程处理实际业务。主进程与从进程之间由 socketpair 相连，因此从进程异常退出，主进程会立刻拉起一个新的子进程，同时主子进程也可以通过该 socketpair 进行数据通信。除了自身子进程可以管理，也可以通过配置文件配置来拉起其他程序作为自己的子进程来管理，有些类似于 supervisord 。</p>\n<p><strong>多线程：</strong>多线程分为两类，一类是常规的线程池，另一类是模块化的线程。后者也是一主多从模型，主与子之间是通过 socketpair 进行通信，而每一个子线程都有其入口函数（类似 main 函数），每一个子线程通常都是处理一类单一事务。</p>\n<h1>使用举例</h1>\n<p>上面说了那么多，下面就来看一个多进程的例子。</p>\n<p>首先，我们要先安装 Melon：</p>\n<pre><code class=\"language-bash\">$ git clone https://github.com/Water-Melon/Melon.git\n$ ./configure\n$ make\n$ sudo make install\n$ sudo echo \"/usr/local/melon/lib/\" &gt;&gt; /etc/ld.so.conf\n$ sudo ldconfig\n</code></pre>\n<p>安装好后，Melon 会被安装在 /usr/local/melon 下。</p>\n<p>接着，我们创建一个名为 hello.c 的源文件来完成我们期望的功能：</p>\n<pre><code class=\"language-cpp\">#include &lt;stdio.h&gt;\n#include \"mln_core.h\"\n#include \"mln_log.h\"\n#include \"mln_event.h\"\n\nchar text[1024];\n\nstatic int global_init(void);\nstatic void worker_process(mln_event_t *ev);\nstatic void print_handler(mln_event_t *ev, void *data);\n\nint main(int argc, char *argv[])\n{\n    struct mln_core_attr cattr;\n    cattr.argc = argc;\n    cattr.argv = argv;\n    cattr.global_init = global_init;\n    cattr.worker_process = worker_process;\n    return mln_core_init(&amp;cattr);\n}\n\nstatic int global_init(void)\n{\n    //global variable init function\n    int n = snprintf(text, sizeof(text)-1, \"hello world\\n\");\n    text[n] = 0;\n    return 0;\n}\n\nstatic void worker_process(mln_event_t *ev)\n{\n    //we can set event handler here\n    //let's set a timer\n    mln_event_set_timer(ev, 1000, text, print_handler);\n}\n\nstatic void print_handler(mln_event_t *ev, void *data)\n{\n    mln_log(debug, \"%s\\n\", (char *)data);\n    mln_event_set_timer(ev, 1000, data, print_handler);\n}\n</code></pre>\n<p>这段代码主要是初始化了一个全局变量，然后给每一个子进程创建了一个定时事件，即每一秒中输出一个 hello world 。</p>\n<p>我们先进行编译链接生成可执行程序：</p>\n<pre><code class=\"language-bash\">$ gcc -o hello hello.c -I /usr/local/melon/include/ -L /usr/local/melon/lib/ -lmelon\n</code></pre>\n<p>然后，我们需要先修改 Melon 库的配置文件：</p>\n<pre><code>$ sudo vim /usr/local/melon/conf/melon.conf\n\nlog_level \"none\";\n//user \"root\";\ndaemon off;\ncore_file_size \"unlimited\";\n//max_nofile 1024;\nworker_proc 1;\nthread_mode off;\nframework off;\nlog_path \"/usr/local/melon/logs/melon.log\";\n/*\n * Configurations in the 'exec_proc' are the\n * processes which are customized by user.\n *\n * Here is an example to show you how to\n * spawn a program.\n *     keepalive \"/tmp/a.out\" [\"arg1\" \"arg2\" ...]\n * The command in this example is 'keepalive' that\n * indicate master process to supervise this\n * process. If process is killed, master process\n * would restart this program.\n * If you don't want master to restart it, you can\n *     default \"/tmp/a.out\" [\"arg1\" \"arg2\" ...]\n *\n * But you should know that there is another\n * arugment after the last argument you write here.\n * That is the file descriptor which is used to\n * communicate with master process.\n */\nexec_proc {\n   // keepalive \"/tmp/a\";\n}\nthread_exec {\n//    restart \"hello\" \"hello\" \"world\";\n//    default \"haha\";\n}\n</code></pre>\n<p>我们做如下修改:</p>\n<ul>\n<li>framework off; --&gt; framework on;</li>\n<li>worker_proc 1; --&gt; worker_proc 3;</li>\n</ul>\n<p>这样，多进程框架将被启用，且会产生三个子进程。</p>\n<p>程序启动后如下：</p>\n<pre><code>$ ./hello\nStart up worker process No.1\nStart up worker process No.2\nStart up worker process No.3\n02/08/2021 09:34:46 GMT DEBUG: hello.c:print_handler:39: PID:25322 hello world\n\n02/08/2021 09:34:46 GMT DEBUG: hello.c:print_handler:39: PID:25323 hello world\n\n02/08/2021 09:34:46 GMT DEBUG: hello.c:print_handler:39: PID:25324 hello world\n\n02/08/2021 09:34:47 GMT DEBUG: hello.c:print_handler:39: PID:25322 hello world\n\n02/08/2021 09:34:47 GMT DEBUG: hello.c:print_handler:39: PID:25323 hello world\n\n02/08/2021 09:34:47 GMT DEBUG: hello.c:print_handler:39: PID:25324 hello world\n\n...\n</code></pre>\n<p>这时，可以 ps 看一下，一共存在四个 hello 进程，一个为主，其余三个为子进程。</p>\n<h1>小结</h1>\n<p>事实上，Melon 并不会有过多条条框框需要开发者小心谨慎怕踩坑。与 Skynet 类似，Melon 提供的绝大多数内容都可独立使用，而不必一定与多进程多线程框架结合。因此，这也给了使用者极大的自由度。</p>\n<hr/>\n<p>Melon 的官方 QQ 群号：756582294</p>\n<p>感谢阅读，欢迎各位在评论区留言评论。</p>\n","last_modified":1612945366,"replies":12,"id":752832}]