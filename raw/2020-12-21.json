[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165830,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"myqa","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/4bb4/9cfa/375737_mini.png?m=1608085307","bio":null,"url":"https://www.v2ex.com/u/myqa","tagline":null,"twitter":null,"created":1546833595,"avatar_large":"https://cdn.v2ex.com/avatar/4bb4/9cfa/375737_mini.png?m=1608085307","avatar_mini":"https://cdn.v2ex.com/avatar/4bb4/9cfa/375737_mini.png?m=1608085307","location":null,"btc":null,"id":375737},"last_reply_by":"1wannaooooo","last_touched":1608518889,"title":"什么狗不需要遛？或者一周不用每天遛？","url":"https://www.v2ex.com/t/737359","created":1608515599,"content":"另外狗在家上厕所有什么好的解决方案？花点钱也无所谓","content_rendered":"<p>另外狗在家上厕所有什么好的解决方案？花点钱也无所谓</p>\n","last_modified":1608515599,"replies":53,"id":737359},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1584052386","name":"life","avatar_normal":"https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1584052386","title":"生活","url":"https://www.v2ex.com/go/life","topics":2175,"footer":"","header":"","title_alternative":"Life","avatar_mini":"https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1584052386","stars":488,"aliases":[],"root":false,"id":557,"parent_node_name":""},"member":{"username":"horaceray","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/ae8a/bb18/276333_mini.png?m=1569048606","bio":null,"url":"https://www.v2ex.com/u/horaceray","tagline":null,"twitter":null,"created":1513938132,"avatar_large":"https://cdn.v2ex.com/avatar/ae8a/bb18/276333_mini.png?m=1569048606","avatar_mini":"https://cdn.v2ex.com/avatar/ae8a/bb18/276333_mini.png?m=1569048606","location":null,"btc":null,"id":276333},"last_reply_by":"huantime","last_touched":1608518701,"title":"科目二挂了四次，我是不是真的不适合开车？","url":"https://www.v2ex.com/t/737384","created":1608517437,"content":"每次都是在倒车入库那儿挂的。但是我平时训练和模拟考都完全没问题。一上考场就懵逼了不知道为啥。\r\n\r\n有点想放弃了，主要是平时练车、考试太耽误时间了。\r\n\r\n不考驾照可以活吗？","content_rendered":"每次都是在倒车入库那儿挂的。但是我平时训练和模拟考都完全没问题。一上考场就懵逼了不知道为啥。<br /><br />有点想放弃了，主要是平时练车、考试太耽误时间了。<br /><br />不考驾照可以活吗？","last_modified":1608517437,"replies":33,"id":737384},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165821,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"intellectual","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/8a91/81fa/73451_mini.png?m=1464244435","bio":"","url":"https://www.v2ex.com/u/intellectual","tagline":"","twitter":"","created":1410326245,"avatar_large":"https://cdn.v2ex.com/avatar/8a91/81fa/73451_mini.png?m=1464244435","avatar_mini":"https://cdn.v2ex.com/avatar/8a91/81fa/73451_mini.png?m=1464244435","location":"","btc":"","id":73451},"last_reply_by":"sahrechiiz","last_touched":1608515202,"title":"现在最方便的类似\"个人网站\"+\"笔记本\"的组合有没有？ Windows Live Writer？ Notion？各种笔记？","url":"https://www.v2ex.com/t/737328","created":1608509227,"content":"记笔记前几年用 evernote，后来逐渐转移到 apple 备忘录了，再后来有了 notion 。备忘录记一些零碎，notion 记一些相对正式的内容。evernote 两不沾，就不用了。。。\r\n\r\n有时候想把一些文字像博客一样发在网上，像这样的产品也有，我对这个不太了解，但也知道那么几个名词，github 不是有个 pages 么算可以当博客。简书也算个还不错的写字的地方吧。但这俩没有客户端。你就得本地弄好了，再粘贴到这俩上面，偶尔有一次想修改，还得重复上面的过程。很烦的。\r\n\r\n我就异想天开有没有这样的产品，比如本地一个客户端用来写字，然后按一个按钮，就发送到博客上了。其实这个也算有，就是 notion，不过 notion 这情况也不稳定，万一那天咔嚓了，也是很烦。不过 notion 的好处就跟我上面的需求一样，你在本地改了，打开 share 开关，剩下就不用管了。\r\n\r\n然后搜到一个算是比较古老的软件，Windows Live Writer，传说是个神器，不过已经死了 n 年了。各位 V 友，你有留意这种软件或者自己 DIY 的解决方案么？","content_rendered":"<p>记笔记前几年用 evernote，后来逐渐转移到 apple 备忘录了，再后来有了 notion 。备忘录记一些零碎，notion 记一些相对正式的内容。evernote 两不沾，就不用了。。。</p>\n<p>有时候想把一些文字像博客一样发在网上，像这样的产品也有，我对这个不太了解，但也知道那么几个名词，github 不是有个 pages 么算可以当博客。简书也算个还不错的写字的地方吧。但这俩没有客户端。你就得本地弄好了，再粘贴到这俩上面，偶尔有一次想修改，还得重复上面的过程。很烦的。</p>\n<p>我就异想天开有没有这样的产品，比如本地一个客户端用来写字，然后按一个按钮，就发送到博客上了。其实这个也算有，就是 notion，不过 notion 这情况也不稳定，万一那天咔嚓了，也是很烦。不过 notion 的好处就跟我上面的需求一样，你在本地改了，打开 share 开关，剩下就不用管了。</p>\n<p>然后搜到一个算是比较古老的软件，Windows Live Writer，传说是个神器，不过已经死了 n 年了。各位 V 友，你有留意这种软件或者自己 DIY 的解决方案么？</p>\n","last_modified":1608509516,"replies":21,"id":737328},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/a4a0/42cf/171_large.png?m=1593747127","name":"invest","avatar_normal":"https://cdn.v2ex.com/navatar/a4a0/42cf/171_normal.png?m=1593747127","title":"投资","url":"https://www.v2ex.com/go/invest","topics":845,"footer":"","header":"Can you make money with money?","title_alternative":"Invest","avatar_mini":"https://cdn.v2ex.com/navatar/a4a0/42cf/171_mini.png?m=1593747127","stars":1597,"aliases":[],"root":false,"id":171,"parent_node_name":"money"},"member":{"username":"NewIPIsComing","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/92a8/4b7d/482182_mini.png?m=1586251600","bio":"","url":"https://www.v2ex.com/u/NewIPIsComing","tagline":"","twitter":"","created":1586250163,"avatar_large":"https://cdn.v2ex.com/avatar/92a8/4b7d/482182_mini.png?m=1586251600","avatar_mini":"https://cdn.v2ex.com/avatar/92a8/4b7d/482182_mini.png?m=1586251600","location":"","btc":"","id":482182},"last_reply_by":"emSaVya","last_touched":1608518823,"title":"互联网存款被指“非法金融活动”","url":"https://www.v2ex.com/t/737351","created":1608514972,"content":"“孙天琦谈到，第三方互联网平台存款模式突破了地方法人银行经营的地域限制，部分地方银行通过互联网金融平台得以从全国吸收存款，从负债业务看已成为全国性银行。他称，此类存款的流动性特点也有别于传统储蓄存款，给监管部门和金融机构带来新课题。互联网金融平台开展此类金融业务，属“无照驾驶”的非法金融活动，也应纳入金融监管范围。“\r\n——[蚂蚁集团主动下架所有互联网存款产品]( https://www.rfi.fr/cn/中国 /20201218-蚂蚁集团主动下架所有互联网存款产)","content_rendered":"<p>“孙天琦谈到，第三方互联网平台存款模式突破了地方法人银行经营的地域限制，部分地方银行通过互联网金融平台得以从全国吸收存款，从负债业务看已成为全国性银行。他称，此类存款的流动性特点也有别于传统储蓄存款，给监管部门和金融机构带来新课题。互联网金融平台开展此类金融业务，属“无照驾驶”的非法金融活动，也应纳入金融监管范围。“\n——[蚂蚁集团主动下架所有互联网存款产品]( <a href=\"https://www.rfi.fr/cn/%E4%B8%AD%E5%9B%BD\" rel=\"nofollow\">https://www.rfi.fr/cn/中国</a> /20201218-蚂蚁集团主动下架所有互联网存款产)</p>\n","last_modified":1608514972,"replies":16,"id":737351},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165830,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"Leonard","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/4174/e6b0/89202_mini.png?m=1591865320","bio":"","url":"https://www.v2ex.com/u/Leonard","tagline":"","twitter":"","created":1419939406,"avatar_large":"https://cdn.v2ex.com/avatar/4174/e6b0/89202_mini.png?m=1591865320","avatar_mini":"https://cdn.v2ex.com/avatar/4174/e6b0/89202_mini.png?m=1591865320","location":"","btc":"","id":89202},"last_reply_by":"Leonard","last_touched":1608517084,"title":"戴着 Apple Watch 玩健身环，测量出的消耗的卡路里为何差这么多？","url":"https://www.v2ex.com/t/737354","created":1608515358,"content":"戴着 Apple Watch 玩健身环 1 小时，Apple Watch 显示消耗了 647 大卡了，健身环上显示的才不到 100 大卡。这差距也太大了吧，到底哪个准啊？","content_rendered":"戴着 Apple Watch 玩健身环 1 小时，Apple Watch 显示消耗了 647 大卡了，健身环上显示的才不到 100 大卡。这差距也太大了吧，到底哪个准啊？","last_modified":1608515358,"replies":11,"id":737354},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1608051983","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1608051983","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":42275,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1608051983","stars":7151,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"KrisZ","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/72119a034c6883687ac3682f482c0d51?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/KrisZ","tagline":null,"twitter":null,"created":1532419396,"avatar_large":"https://cdn.v2ex.com/gravatar/72119a034c6883687ac3682f482c0d51?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/72119a034c6883687ac3682f482c0d51?s=24&d=retro","location":null,"btc":null,"id":335290},"last_reply_by":"lithiumii","last_touched":1608518811,"title":"日本版的 TikTok 打开什么都没有，上传视频自己也看不到","url":"https://www.v2ex.com/t/737394","created":1608518293,"content":"我下载了日本版的 TikTok，但是打开什么都没有，可以上传视频，上传成功后，自己也看不到，请问有大神遇到这种情况吗？ 怎么解决呢？","content_rendered":"<p>我下载了日本版的 TikTok，但是打开什么都没有，可以上传视频，上传成功后，自己也看不到，请问有大神遇到这种情况吗？ 怎么解决呢？</p>\n","last_modified":1608518293,"replies":7,"id":737394},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/d3d9/4468/10_large.png?m=1607656893","name":"mbp","avatar_normal":"https://cdn.v2ex.com/navatar/d3d9/4468/10_normal.png?m=1607656893","title":"MacBook Pro","url":"https://www.v2ex.com/go/mbp","topics":6662,"footer":"","header":"State-of-the-art processors. All-new graphics. Breakthrough high-speed I/O. Three very big leaps forward.","title_alternative":"MacBook Pro","avatar_mini":"https://cdn.v2ex.com/navatar/d3d9/4468/10_mini.png?m=1607656893","stars":2787,"aliases":[],"root":false,"id":10,"parent_node_name":"apple"},"member":{"username":"zshstc","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/c5b0/3cd6/193770_mini.png?m=1585823222","bio":"","url":"https://www.v2ex.com/u/zshstc","tagline":"","twitter":"zshleon","created":1474990040,"avatar_large":"https://cdn.v2ex.com/avatar/c5b0/3cd6/193770_mini.png?m=1585823222","avatar_mini":"https://cdn.v2ex.com/avatar/c5b0/3cd6/193770_mini.png?m=1585823222","location":"","btc":"","id":193770},"last_reply_by":"acthtml","last_touched":1608517818,"title":"想入个 4K 显示器，有没有人用过这个 U27P2C？","url":"https://www.v2ex.com/t/737360","created":1608515640,"content":"看了下京东这个 AOC U27P2C，可以提供 65W 给 MBP 充电，代替拓展坞，可以少走几根线。有没有人用过来说说靠不靠谱？\r\n\r\nhttps://item.jd.com/100007556769.html","content_rendered":"<p>看了下京东这个 AOC U27P2C，可以提供 65W 给 MBP 充电，代替拓展坞，可以少走几根线。有没有人用过来说说靠不靠谱？</p>\n<p><a href=\"https://item.jd.com/100007556769.html\" rel=\"nofollow\">https://item.jd.com/100007556769.html</a></p>\n","last_modified":1608515640,"replies":7,"id":737360},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1608051983","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1608051983","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":42271,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1608051983","stars":7151,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"mlhadoop","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/617a36adfde179bc1fda75a72e074ebd?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/mlhadoop","tagline":"","twitter":null,"created":1405585093,"avatar_large":"https://cdn.v2ex.com/gravatar/617a36adfde179bc1fda75a72e074ebd?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/617a36adfde179bc1fda75a72e074ebd?s=24&d=retro","location":"","btc":null,"id":68241},"last_reply_by":"SingeeKing","last_touched":1608516049,"title":"Q：有没有免费|付费工具能够监控网站某个数据变化，并且进行通知？","url":"https://www.v2ex.com/t/737343","created":1608514067,"content":"背景：\r\n\r\n想监测某个网站的数据变化，比如某疫苗新开放预约，某 xx 不定期上架等事件。然后提醒到自己。\r\n\r\n目前的方式是，间隔一定时间 n，发起请求跟本地数据进行比对。出现不同则推送消息给自己 [ teletgrambot ] ，不知是否还有其他更好的方式？ \r\n\r\n附：\r\n\r\n细想这应该是一类问题\r\n1- 获取数据\r\n2- 规则匹配\r\n3- 消息推送\r\n\r\n每一个子流程都能够进行抽象，不知道目前有没有这类的工具，只需要专注核心的规则匹配逻辑，满足触发条件后给自己消息提醒。","content_rendered":"<p>背景：</p>\n<p>想监测某个网站的数据变化，比如某疫苗新开放预约，某 xx 不定期上架等事件。然后提醒到自己。</p>\n<p>目前的方式是，间隔一定时间 n，发起请求跟本地数据进行比对。出现不同则推送消息给自己 [ teletgrambot ] ，不知是否还有其他更好的方式？ </p>\n<p>附：</p>\n<p>细想这应该是一类问题\n1- 获取数据\n2- 规则匹配\n3- 消息推送</p>\n<p>每一个子流程都能够进行抽象，不知道目前有没有这类的工具，只需要专注核心的规则匹配逻辑，满足触发条件后给自己消息提醒。</p>\n","last_modified":1608514067,"replies":7,"id":737343},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165830,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"jchnxu","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/c6a8ba53c191fa412c422d4da0fb4d05?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/jchnxu","tagline":null,"twitter":null,"created":1406406187,"avatar_large":"https://cdn.v2ex.com/gravatar/c6a8ba53c191fa412c422d4da0fb4d05?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/c6a8ba53c191fa412c422d4da0fb4d05?s=24&d=retro","location":null,"btc":null,"id":69060},"last_reply_by":"liyang5945","last_touched":1608518494,"title":"大家怎样节省手机套餐经费？","url":"https://www.v2ex.com/t/737388","created":1608517779,"content":"中国移动，之前有一个 120 多的宽带，办在之前租的房子里，终于取消掉了\r\n现在 28 元的 150 分钟电话，加上 30 元 1GB 的流量，一个月 58 。\r\n\r\n不知道各位 v 友有没有更加便宜的做法\r\n\r\nps 主要是移动 app 上根本查不到，一查就是 150+的套餐根本用不完，我感觉我在一个月 3g 左右就足够了，5g 顶天了","content_rendered":"<p>中国移动，之前有一个 120 多的宽带，办在之前租的房子里，终于取消掉了\n现在 28 元的 150 分钟电话，加上 30 元 1GB 的流量，一个月 58 。</p>\n<p>不知道各位 v 友有没有更加便宜的做法</p>\n<p>ps 主要是移动 app 上根本查不到，一查就是 150+的套餐根本用不完，我感觉我在一个月 3g 左右就足够了，5g 顶天了</p>\n","last_modified":1608517779,"replies":6,"id":737388},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1608051983","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1608051983","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":42275,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1608051983","stars":7151,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"taogen","website":"","github":"tagnja","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/5f16eccf4fb12baac91df365bf33a3d4?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/taogen","tagline":"","twitter":"","created":1469189304,"avatar_large":"https://cdn.v2ex.com/gravatar/5f16eccf4fb12baac91df365bf33a3d4?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/5f16eccf4fb12baac91df365bf33a3d4?s=24&d=retro","location":"","btc":"","id":183276},"last_reply_by":"NexTooo","last_touched":1608517915,"title":"整理了一份计算机书单，大家做 2021 学习计划的时候可以参考一下","url":"https://www.v2ex.com/t/737361","created":1608515677,"content":"计算机基础： https://github.com/tagnja/resources-of-learning/blob/master/%23cs-foundations.md\r\n\r\n前端开发: https://github.com/tagnja/resources-of-learning/blob/master/directions/web-frontend-resources.md\r\n\r\nJava 开发： https://github.com/tagnja/resources-of-learning/blob/master/directions/java-resources.md","content_rendered":"<p>计算机基础： <a href=\"https://github.com/tagnja/resources-of-learning/blob/master/%23cs-foundations.md\" rel=\"nofollow\">https://github.com/tagnja/resources-of-learning/blob/master/%23cs-foundations.md</a></p>\n<p>前端开发: <a href=\"https://github.com/tagnja/resources-of-learning/blob/master/directions/web-frontend-resources.md\" rel=\"nofollow\">https://github.com/tagnja/resources-of-learning/blob/master/directions/web-frontend-resources.md</a></p>\n<p>Java 开发： <a href=\"https://github.com/tagnja/resources-of-learning/blob/master/directions/java-resources.md\" rel=\"nofollow\">https://github.com/tagnja/resources-of-learning/blob/master/directions/java-resources.md</a></p>\n","last_modified":1608515762,"replies":6,"id":737361},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165821,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"overthemoon","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/10d6/900c/447838_mini.png?m=1589448128","bio":"","url":"https://www.v2ex.com/u/overthemoon","tagline":"","twitter":null,"created":1571467471,"avatar_large":"https://cdn.v2ex.com/avatar/10d6/900c/447838_mini.png?m=1589448128","avatar_mini":"https://cdn.v2ex.com/avatar/10d6/900c/447838_mini.png?m=1589448128","location":"","btc":null,"id":447838},"last_reply_by":"ScotGu","last_touched":1608515718,"title":"想买家用监控器","url":"https://www.v2ex.com/t/737340","created":1608513828,"content":"大佬们推荐一下监控器，然后想问下你们视频都是怎么存储的？","content_rendered":"<p>大佬们推荐一下监控器，然后想问下你们视频都是怎么存储的？</p>\n","last_modified":1608513828,"replies":6,"id":737340},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/8613/985e/90_large.png?m=1598935628","name":"python","avatar_normal":"https://cdn.v2ex.com/navatar/8613/985e/90_normal.png?m=1598935628","title":"Python","url":"https://www.v2ex.com/go/python","topics":13888,"footer":"","header":"这里讨论各种 Python 语言编程话题，也包括 Django，Tornado 等框架的讨论。这里是一个能够帮助你解决实际问题的地方。","title_alternative":"Python","avatar_mini":"https://cdn.v2ex.com/navatar/8613/985e/90_mini.png?m=1598935628","stars":9396,"aliases":[],"root":false,"id":90,"parent_node_name":"programming"},"member":{"username":"sicklife","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/cd26d82ec9ec7593c646f458d84b9116?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/sicklife","tagline":null,"twitter":null,"created":1419477255,"avatar_large":"https://cdn.v2ex.com/gravatar/cd26d82ec9ec7593c646f458d84b9116?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/cd26d82ec9ec7593c646f458d84b9116?s=24&d=retro","location":null,"btc":null,"id":88324},"last_reply_by":"liukanshan","last_touched":1608518086,"title":"Python 微服务构建的一个小问题","url":"https://www.v2ex.com/t/737373","created":1608516627,"content":"比如说我有一个大的项目，比如说是自然语言处理项目，我在这个项目下，有很多子项目：ner\\分类\\senti 等等。\r\n\r\n这些子项目可能会\r\n1. 部署在同一个 k8s 集群上； \r\n2. 遵循同样的构建、发布流程\r\n\r\n但是可能会：\r\n1. 有不同的包依赖；\r\n2. 不同的 service/ingress 名\r\n\r\n在 gitlab 中，我该为每一个子项目建一个 repo 么？还是合在一个大的 repo 里？？","content_rendered":"<p>比如说我有一个大的项目，比如说是自然语言处理项目，我在这个项目下，有很多子项目：ner\\分类\\senti 等等。</p>\n<p>这些子项目可能会</p>\n<ol>\n<li>部署在同一个 k8s 集群上； </li>\n<li>遵循同样的构建、发布流程</li>\n</ol>\n<p>但是可能会：</p>\n<ol>\n<li>有不同的包依赖；</li>\n<li>不同的 service/ingress 名</li>\n</ol>\n<p>在 gitlab 中，我该为每一个子项目建一个 repo 么？还是合在一个大的 repo 里？？</p>\n","last_modified":1608516627,"replies":5,"id":737373},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/03af/dbd6/63_large.png?m=1596211530","name":"java","avatar_normal":"https://cdn.v2ex.com/navatar/03af/dbd6/63_normal.png?m=1596211530","title":"Java","url":"https://www.v2ex.com/go/java","topics":4066,"footer":"","header":"The most popular programming language.","title_alternative":"Java","avatar_mini":"https://cdn.v2ex.com/navatar/03af/dbd6/63_mini.png?m=1596211530","stars":4235,"aliases":[],"root":false,"id":63,"parent_node_name":"programming"},"member":{"username":"neochen13","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/b0621c808db9b5673f4adb88d279da3a?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/neochen13","tagline":null,"twitter":null,"created":1573702369,"avatar_large":"https://cdn.v2ex.com/gravatar/b0621c808db9b5673f4adb88d279da3a?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/b0621c808db9b5673f4adb88d279da3a?s=24&d=retro","location":null,"btc":null,"id":452997},"last_reply_by":"yanzhiling2001","last_touched":1608517316,"title":"尊敬的各位大佬们，请问多版本 JDK 是直接安装在宿主机器中，还是 docker 多个镜像比较方便？","url":"https://www.v2ex.com/t/737363","created":1608515852,"content":"如题，如果直接安装在宿主机的话，多个 JAVA_HOME 切换很麻烦\r\n\r\n但是使用 docker 貌似也差不多额","content_rendered":"<p>如题，如果直接安装在宿主机的话，多个 JAVA_HOME 切换很麻烦</p>\n<p>但是使用 docker 貌似也差不多额</p>\n","last_modified":1608515852,"replies":5,"id":737363},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/44f6/83a8/62_large.png?m=1588705541","name":"php","avatar_normal":"https://cdn.v2ex.com/navatar/44f6/83a8/62_normal.png?m=1588705541","title":"PHP","url":"https://www.v2ex.com/go/php","topics":4248,"footer":"","header":"PHP is a widely-used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.","title_alternative":"PHP","avatar_mini":"https://cdn.v2ex.com/navatar/44f6/83a8/62_mini.png?m=1588705541","stars":2552,"aliases":[],"root":false,"id":62,"parent_node_name":"programming"},"member":{"username":"RickyC","website":"http://class4ever.com","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/bf7e/7fbb/408308_mini.png?m=1601525808","bio":"I am a christian.","url":"https://www.v2ex.com/u/RickyC","tagline":"凡信他的, 必不至于羞愧","twitter":"","created":1556768442,"avatar_large":"https://cdn.v2ex.com/avatar/bf7e/7fbb/408308_mini.png?m=1601525808","avatar_mini":"https://cdn.v2ex.com/avatar/bf7e/7fbb/408308_mini.png?m=1601525808","location":"北京","btc":"","id":408308},"last_reply_by":"zhaokun","last_touched":1608518005,"title":"用一个项目的 PHP 后端, 调用公司另外一个项目的 API 是否性能不好?","url":"https://www.v2ex.com/t/737352","created":1608515113,"content":"比如公司有一个现成的 API 项目(PHP 的)\r\n而另外一个 web 项目因为要做 SEO 所以不能用纯前端来写,也是用 PHP 来写\r\n那么, 用 PHP 调用 API 会不会性能差一些?","content_rendered":"<p>比如公司有一个现成的 API 项目(PHP 的)\n而另外一个 web 项目因为要做 SEO 所以不能用纯前端来写,也是用 PHP 来写\n那么, 用 PHP 调用 API 会不会性能差一些?</p>\n","last_modified":1608515113,"replies":5,"id":737352},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/f61d/6947/375_large.png?m=1585387643","name":"go","avatar_normal":"https://cdn.v2ex.com/navatar/f61d/6947/375_normal.png?m=1585387643","title":"Go","url":"https://www.v2ex.com/go/go","topics":1701,"footer":"","header":"Go 是一个开源的编程语言，它能让构造简单、可靠且高效的软件变得容易。","title_alternative":"The Go Programming Language","avatar_mini":"https://cdn.v2ex.com/navatar/f61d/6947/375_mini.png?m=1585387643","stars":2403,"aliases":[],"root":false,"id":375,"parent_node_name":"programming"},"member":{"username":"kevinwan","website":"https://github.com/tal-tech/go-zero","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/8583/c13b/107396_mini.png?m=1607440030","bio":"go-zero作者","url":"https://www.v2ex.com/u/kevinwan","tagline":"大道至简！","twitter":null,"created":1427336989,"avatar_large":"https://cdn.v2ex.com/avatar/8583/c13b/107396_mini.png?m=1607440030","avatar_mini":"https://cdn.v2ex.com/avatar/8583/c13b/107396_mini.png?m=1607440030","location":"上海","btc":null,"id":107396},"last_reply_by":"putaozhenhaochi","last_touched":1608516012,"title":"我用 go-zero 一周实现了一个中台系统，已开源！","url":"https://www.v2ex.com/t/737341","created":1608513880,"content":"作者：Jack\r\n\r\n最近发现 golang 社区里出了一个新星的微服务框架，来自好未来，光看这个名字，就很有奔头，之前，也只是玩过 go-micro，其实真正的还没有在项目中运用过，只是觉得 微服务，grpc 这些很高大尚，还没有在项目中，真正的玩过，我看了一下官方提供的工具真的很好用，只需要定义好，舒适文件 jia 结构 都生成了，只需要关心业务，加上最近 有个投票的活动，加上最近这几年中台也比较火，所以决定玩一下，\r\n\r\n> 开源地址: https://github.com/jackluo2012/datacenter\r\n\r\n先聊聊中台架构思路吧：\r\n\r\n![img]( https://img2020.cnblogs.com/blog/203395/202012/203395-20201217094615171-335437652.jpg)\r\n\r\n中台的概念大概就是把一个一个的 app 统一起来，反正我是这样理解的。\r\n\r\n先聊用户服务吧，现在一个公司有很多的公众号，小程序，微信的，支付宝的，还有 xxx xxx ,很多的平台，每次开发的时候，我们总是需要做用户登陆的服务，不停的复制代码，然后我们就在思考能不能有一套独立的用户服务，只需要告诉我你需要传个你要登陆的平台(比如微信)，微信登陆，需要的是客户端返回给服务端一个 code，然后服务端拿着这个 code 去微信获取用户信息，反正大家都明白。\r\n\r\n我们决定，将所有的信息 弄到 配置公共服务中去，里面在存，微信，支付宝，以及其它平台的 appid ,appkey,还有支付的 appid,appkey，这样就写一套。\r\n\r\n---\r\n\r\n最后说说实现吧，整个就一个 repo：\r\n\r\n- 网关，我们用的是: go-zero 的 Api 服务\r\n\r\n- 其它它的是服务，我们就是用的 go-zero 的 rpc 服务\r\n\r\n看下目录结构\r\n\r\n![img]( https://img2020.cnblogs.com/blog/203395/202012/203395-20201209110504600-317546535.png)\r\n\r\n整个项目完成，我一个人操刀， 写了 1 个来星期，我就实现了上面的中台系统。\r\n\r\n## datacenter-api 服务\r\n\r\n先看官方文档 https://www.yuque.com/tal-tech/go-zero/yaoehb \r\n\r\n我们先把网关搭建起来：\r\n\r\n```shell\r\n➜ blogs mkdir datacenter && cd datacenter\r\n➜ datacenter go mod init datacenter\r\ngo: creating new go.mod: module datacenter\r\n➜ datacenter\r\n```\r\n\r\n查看 book 目录：\r\n\r\n```\r\n➜  datacenter tree\r\n.\r\n└── go.mod\r\n\r\n0 directories, 1 file\r\n```\r\n\r\n### 创建 api 文件\r\n\r\n```\r\n➜  datacenter goctl api -o datacenter.api\r\nDone.\r\n➜  datacenter tree\r\n.\r\n├── datacenter.api\r\n└── go.mod\r\n```\r\n\r\n### 定义 api 服务 \r\n\r\n分别包含了上面的 **公共服务**，**用户服务**，**投票活动服务**\r\n\r\n详情：[https://github.com/jackluo2012/datacenter/blob/main/datacenter.api]( https://github.com/jackluo2012/datacenter/blob/main/datacenter.api)\r\n\r\n### 生成 datacenter api 服务\r\n\r\n```shell\r\n➜  datacenter goctl api go -api datacenter.api -dir .\r\nDone.\r\n```\r\n\r\n我们打开 `etc/datacenter-api.yaml` 把必要的配置信息加上：[datacenter-api.yaml]( https://github.com/jackluo2012/datacenter/blob/main/etc/datacenter-api.example.yaml)\r\n\r\n上面的 `UserRpc`， `CommonRpc` ,还有 `VotesRpc` 这些我先写上，后面再来慢慢加。\r\n\r\n我们先来写 `CommonRpc` 服务。\r\n\r\n## CommonRpc 服务\r\n\r\n### 新建项目目录\r\n\r\n```\r\n➜  datacenter mkdir -p common/rpc && cd common/rpc\r\n```\r\n\r\n直接就新建在了，datacenter 目录中，因为 common 里面，可能以后会不只会提供 rpc 服务，可能还有 api 的服务,所以又加了 rpc 目录\r\n\r\n### goctl 创建模板\r\n\r\n```\r\n➜  rpc goctl rpc template -o=common.proto\r\n➜  rpc ls\r\ncommon.proto\r\n```\r\n\r\n往里面填入内容：[user.proto]( https://github.com/jackluo2012/datacenter/blob/main/user/rpc/user.proto)\r\n\r\n### gotcl 生成 rpc 服务\r\n\r\n```bash\r\n➜  rpc goctl rpc proto -src common.proto -dir .\r\nprotoc  -I=/Users/jackluo/works/blogs/datacenter/common/rpc common.proto --go_out=plugins=grpc:/Users/jackluo/works/blogs/datacenter/common/rpc/common\r\nDone.\r\n```\r\n\r\n基本上，就把所有的目录规范和结构的东西都生成了，就不用纠结项目目录了，怎么放了，怎么组织了。\r\n\r\n看一下，配置信息，里面可以写入 mysql 和其它 redis 的信息：[rpc.yaml]( https://github.com/jackluo2012/datacenter/blob/main/user/rpc/etc/rpc.example.yaml)\r\n\r\n我们再来加上数据库服务：使用 `goctl model` 就行\r\n\r\n```\r\n➜  rpc cd ..\r\n➜  common ls\r\nrpc\r\n➜  common pwd\r\n/Users/jackluo/works/blogs/datacenter/common\r\n➜  common goctl model mysql datasource -url=\"root:admin@tcp(127.0.0.1:3306)/datacenter\" -table=\"base_app\" -dir ./model -c\r\nDone.\r\n```\r\n\r\n这样基本的一个 `rpc` 就写完了，然后我们将 rpc 和 model 还有 api 串连起来，这个官方的文档已经很详细了，这里就只是贴一下代码：\r\n\r\n```go\r\n➜  common cat rpc/internal/config/config.go\r\npackage config\r\n\r\nimport (\r\n    \"github.com/tal-tech/go-zero/core/stores/cache\"\r\n    \"github.com/tal-tech/go-zero/zrpc\"\r\n)\r\n\r\ntype Config struct {\r\n    zrpc.RpcServerConf\r\n    Mysql struct {\r\n        DataSource string\r\n    }\r\n    CacheRedis cache.ClusterConf\r\n}\r\n```\r\n\r\n再在 svc 中修改：[user/rpc/internal/svc/servicecontext.go]( https://github.com/jackluo2012/datacenter/blob/main/user/rpc/internal/svc/servicecontext.go)\r\n\r\n上面的代码已经将 `rpc` 和 `model` 数据库关联起来了，我们现在再将 `rpc` 和 `api` 关联起来：[internal/config/config.go]( https://github.com/jackluo2012/datacenter/blob/main/internal/config/config.go)\r\n\r\n加入 `svc` 服务中：[internal/svc/servicecontext.go]( https://github.com/jackluo2012/datacenter/blob/main/internal/svc/servicecontext.go)\r\n\r\n这样基本上，我们就可以在 `logic` 的文件目录中调用了：[internal/logic/common/appinfologic.go]( https://github.com/jackluo2012/datacenter/blob/main/internal/logic/common/appinfologic.go)\r\n\r\n这样，基本就连接起来了，其它基本上就不用改了，`UserRPC`， `VotesRPC` 类似，这里就不在写了。\r\n\r\n## 使用心得\r\n\r\n`go-zero` 的确香，因为它有一个 `goctl` 的工具，他可以自动的把代码结构全部的生成好，我们就不再去纠结，目录结构 ，怎么组织，没有个好几年的架构能力是不好实现的，有什么规范那些，并发，熔断，完全不用，考滤其它的，专心的实现业务就好，像微服务，还要有服务发现，一系列的东西，都不用关心，因为 `go-zero` 内部已经实现了。\r\n\r\n我写代码也写了有 10 多年了，之前一直用的 php，比较出名的就 laravel，thinkphp，基本上就是模块化的,像微服那些实现直来真的有成本，但是你用上 go-zero，你就像调 api 接口一样简单的开发，其它什么服务发现，那些根本就不用关注了，只需要关注业务。\r\n\r\n一个好的语言，框架，他们的底层思维，永远都是效率高，不加班的思想，我相信 go-zero 会提高你和你团队或是公司的效率。go-zero 的作者说，他们有个团队专门整理 go-zero 框架，目的也应该很明显，那就是提高，他们自己的开发效率，流程化，标准化，是提高工作效率的准则，像我们平时遇到了问题，或是遇到了 bug，我第一个想到的不是怎么去解决我的 bug，而是在想我的流程是不是有问题，我的哪个流程会导致 bug，最后我相信 `go-zero` 能成为 **微服务开发** 的首选框架。\r\n\r\n最后说说遇到的坑吧：\r\n\r\n- `grpc`\r\n\r\n`grpc` 本人第一次用，然后就遇到了，有些字符为空时，字段值不显示的问题：\r\n\r\n通过 `grpc` 官方库中的 `jsonpb` 来实现，官方在它的设定中有一个结构体用来实现 `protoc buffer` 转换为 JSON 结构，并可以根据字段来配置转换的要求。\r\n\r\n- 跨域问题\r\n\r\n`go-zero` 中设置了，感觉没有效果，大佬说通过 nginx 设置，后面发现还是不行，最近强行弄到了一个域名下，后面有时间再解决。\r\n\r\n- `sqlx`\r\n\r\n`go-zero` 的 `sqlx` 问题，这个真的费了很长的时间：\r\n\r\n> `time.Time` 这个数据结构，数据库中用的是 timestamp 这个 比如我的字段 是 delete_at 默认数库设置的是 null，结果插入的时候，就报了 `Incorrect datetime value: '0000-00-00' for column 'deleted_at' at row 1\"}` 这个错，查询的时候报 `deleted_at\\\": unsupported Scan, storing driver.Value type \\u003cnil\\u003e into type *time.Time\" `\r\n>\r\n> 后面果断去掉了这个字段，字段上面加上 `.omitempty` 这个标签，好像也有用，`db:\".omitempty\"`\r\n\r\n其次就是这个 `Conversion from collation utf8_general_ci into utf8mb4_unicode_ci`，这个导致的大概原因是，现在都喜欢用 emj 表情了，mysql 数据识别不了。\r\n\r\n- 数据连接\r\n\r\n`mysql` 这边照样按照原始的方式,将配置文件修改编码格式，重新创建数据库，并且设置数据库编码为 utf8mb4，排序规则为 `utf8mb4_unicode_ci`。\r\n\r\n**这样的话,所有的表还有 string 字段都是这个编码格式,如果不想所有的都是,可以单独设置,这个不是重点.因为在 navicat 上都好设置,手动点一下就行了**。\r\n\r\n重点来了：golang 中使用的是 `github.com/go-sql-driver/mysql` 驱动，将连接 `mysql`的 `dsn`（因为我这使用的是 gorm，所以 dsn 可能跟原生的格式不太一样，不过没关系， 只需要关注 `charset` 和 `collation` 就行了）\r\n\r\n`root:password@/name?parseTime=True&loc=Local&charset=utf8` 修改为：\r\n`root:password@/name?parseTime=True&loc=Local&charset=utf8mb4&collation=utf8mb4_unicode_ci`\r\n\r\n## go-zero 项目地址\r\n\r\n[https://github.com/tal-tech/go-zero]( https://github.com/tal-tech/go-zero)","content_rendered":"<p>作者：Jack</p>\n<p>最近发现 golang 社区里出了一个新星的微服务框架，来自好未来，光看这个名字，就很有奔头，之前，也只是玩过 go-micro，其实真正的还没有在项目中运用过，只是觉得 微服务，grpc 这些很高大尚，还没有在项目中，真正的玩过，我看了一下官方提供的工具真的很好用，只需要定义好，舒适文件 jia 结构 都生成了，只需要关心业务，加上最近 有个投票的活动，加上最近这几年中台也比较火，所以决定玩一下，</p>\n<blockquote>\n<p>开源地址: <a href=\"https://github.com/jackluo2012/datacenter\" rel=\"nofollow\">https://github.com/jackluo2012/datacenter</a></p>\n</blockquote>\n<p>先聊聊中台架构思路吧：</p>\n<p><img alt=\"img\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img2020.cnblogs.com/blog/203395/202012/203395-20201217094615171-335437652.jpg\"/></p>\n<p>中台的概念大概就是把一个一个的 app 统一起来，反正我是这样理解的。</p>\n<p>先聊用户服务吧，现在一个公司有很多的公众号，小程序，微信的，支付宝的，还有 xxx xxx ,很多的平台，每次开发的时候，我们总是需要做用户登陆的服务，不停的复制代码，然后我们就在思考能不能有一套独立的用户服务，只需要告诉我你需要传个你要登陆的平台(比如微信)，微信登陆，需要的是客户端返回给服务端一个 code，然后服务端拿着这个 code 去微信获取用户信息，反正大家都明白。</p>\n<p>我们决定，将所有的信息 弄到 配置公共服务中去，里面在存，微信，支付宝，以及其它平台的 appid ,appkey,还有支付的 appid,appkey，这样就写一套。</p>\n<hr/>\n<p>最后说说实现吧，整个就一个 repo：</p>\n<ul>\n<li>\n<p>网关，我们用的是: go-zero 的 Api 服务</p>\n</li>\n<li>\n<p>其它它的是服务，我们就是用的 go-zero 的 rpc 服务</p>\n</li>\n</ul>\n<p>看下目录结构</p>\n<p><img alt=\"img\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://img2020.cnblogs.com/blog/203395/202012/203395-20201209110504600-317546535.png\"/></p>\n<p>整个项目完成，我一个人操刀， 写了 1 个来星期，我就实现了上面的中台系统。</p>\n<h2>datacenter-api 服务</h2>\n<p>先看官方文档 <a href=\"https://www.yuque.com/tal-tech/go-zero/yaoehb\" rel=\"nofollow\">https://www.yuque.com/tal-tech/go-zero/yaoehb</a> </p>\n<p>我们先把网关搭建起来：</p>\n<pre><code class=\"language-shell\">➜ blogs mkdir datacenter &amp;&amp; cd datacenter\n➜ datacenter go mod init datacenter\ngo: creating new go.mod: module datacenter\n➜ datacenter\n</code></pre>\n<p>查看 book 目录：</p>\n<pre><code>➜  datacenter tree\n.\n└── go.mod\n\n0 directories, 1 file\n</code></pre>\n<h3>创建 api 文件</h3>\n<pre><code>➜  datacenter goctl api -o datacenter.api\nDone.\n➜  datacenter tree\n.\n├── datacenter.api\n└── go.mod\n</code></pre>\n<h3>定义 api 服务</h3>\n<p>分别包含了上面的 <strong>公共服务</strong>，<strong>用户服务</strong>，<strong>投票活动服务</strong></p>\n<p>详情：<a href=\"https://github.com/jackluo2012/datacenter/blob/main/datacenter.api\" rel=\"nofollow\">https://github.com/jackluo2012/datacenter/blob/main/datacenter.api</a></p>\n<h3>生成 datacenter api 服务</h3>\n<pre><code class=\"language-shell\">➜  datacenter goctl api go -api datacenter.api -dir .\nDone.\n</code></pre>\n<p>我们打开 <code>etc/datacenter-api.yaml</code> 把必要的配置信息加上：<a href=\"https://github.com/jackluo2012/datacenter/blob/main/etc/datacenter-api.example.yaml\" rel=\"nofollow\">datacenter-api.yaml</a></p>\n<p>上面的 <code>UserRpc</code>， <code>CommonRpc</code> ,还有 <code>VotesRpc</code> 这些我先写上，后面再来慢慢加。</p>\n<p>我们先来写 <code>CommonRpc</code> 服务。</p>\n<h2>CommonRpc 服务</h2>\n<h3>新建项目目录</h3>\n<pre><code>➜  datacenter mkdir -p common/rpc &amp;&amp; cd common/rpc\n</code></pre>\n<p>直接就新建在了，datacenter 目录中，因为 common 里面，可能以后会不只会提供 rpc 服务，可能还有 api 的服务,所以又加了 rpc 目录</p>\n<h3>goctl 创建模板</h3>\n<pre><code>➜  rpc goctl rpc template -o=common.proto\n➜  rpc ls\ncommon.proto\n</code></pre>\n<p>往里面填入内容：<a href=\"https://github.com/jackluo2012/datacenter/blob/main/user/rpc/user.proto\" rel=\"nofollow\">user.proto</a></p>\n<h3>gotcl 生成 rpc 服务</h3>\n<pre><code class=\"language-bash\">➜  rpc goctl rpc proto -src common.proto -dir .\nprotoc  -I=/Users/jackluo/works/blogs/datacenter/common/rpc common.proto --go_out=plugins=grpc:/Users/jackluo/works/blogs/datacenter/common/rpc/common\nDone.\n</code></pre>\n<p>基本上，就把所有的目录规范和结构的东西都生成了，就不用纠结项目目录了，怎么放了，怎么组织了。</p>\n<p>看一下，配置信息，里面可以写入 mysql 和其它 redis 的信息：<a href=\"https://github.com/jackluo2012/datacenter/blob/main/user/rpc/etc/rpc.example.yaml\" rel=\"nofollow\">rpc.yaml</a></p>\n<p>我们再来加上数据库服务：使用 <code>goctl model</code> 就行</p>\n<pre><code>➜  rpc cd ..\n➜  common ls\nrpc\n➜  common pwd\n/Users/jackluo/works/blogs/datacenter/common\n➜  common goctl model mysql datasource -url=\"root:admin@tcp(127.0.0.1:3306)/datacenter\" -table=\"base_app\" -dir ./model -c\nDone.\n</code></pre>\n<p>这样基本的一个 <code>rpc</code> 就写完了，然后我们将 rpc 和 model 还有 api 串连起来，这个官方的文档已经很详细了，这里就只是贴一下代码：</p>\n<pre><code class=\"language-go\">➜  common cat rpc/internal/config/config.go\npackage config\n\nimport (\n    \"github.com/tal-tech/go-zero/core/stores/cache\"\n    \"github.com/tal-tech/go-zero/zrpc\"\n)\n\ntype Config struct {\n    zrpc.RpcServerConf\n    Mysql struct {\n        DataSource string\n    }\n    CacheRedis cache.ClusterConf\n}\n</code></pre>\n<p>再在 svc 中修改：<a href=\"https://github.com/jackluo2012/datacenter/blob/main/user/rpc/internal/svc/servicecontext.go\" rel=\"nofollow\">user/rpc/internal/svc/servicecontext.go</a></p>\n<p>上面的代码已经将 <code>rpc</code> 和 <code>model</code> 数据库关联起来了，我们现在再将 <code>rpc</code> 和 <code>api</code> 关联起来：<a href=\"https://github.com/jackluo2012/datacenter/blob/main/internal/config/config.go\" rel=\"nofollow\">internal/config/config.go</a></p>\n<p>加入 <code>svc</code> 服务中：<a href=\"https://github.com/jackluo2012/datacenter/blob/main/internal/svc/servicecontext.go\" rel=\"nofollow\">internal/svc/servicecontext.go</a></p>\n<p>这样基本上，我们就可以在 <code>logic</code> 的文件目录中调用了：<a href=\"https://github.com/jackluo2012/datacenter/blob/main/internal/logic/common/appinfologic.go\" rel=\"nofollow\">internal/logic/common/appinfologic.go</a></p>\n<p>这样，基本就连接起来了，其它基本上就不用改了，<code>UserRPC</code>， <code>VotesRPC</code> 类似，这里就不在写了。</p>\n<h2>使用心得</h2>\n<p><code>go-zero</code> 的确香，因为它有一个 <code>goctl</code> 的工具，他可以自动的把代码结构全部的生成好，我们就不再去纠结，目录结构 ，怎么组织，没有个好几年的架构能力是不好实现的，有什么规范那些，并发，熔断，完全不用，考滤其它的，专心的实现业务就好，像微服务，还要有服务发现，一系列的东西，都不用关心，因为 <code>go-zero</code> 内部已经实现了。</p>\n<p>我写代码也写了有 10 多年了，之前一直用的 php，比较出名的就 laravel，thinkphp，基本上就是模块化的,像微服那些实现直来真的有成本，但是你用上 go-zero，你就像调 api 接口一样简单的开发，其它什么服务发现，那些根本就不用关注了，只需要关注业务。</p>\n<p>一个好的语言，框架，他们的底层思维，永远都是效率高，不加班的思想，我相信 go-zero 会提高你和你团队或是公司的效率。go-zero 的作者说，他们有个团队专门整理 go-zero 框架，目的也应该很明显，那就是提高，他们自己的开发效率，流程化，标准化，是提高工作效率的准则，像我们平时遇到了问题，或是遇到了 bug，我第一个想到的不是怎么去解决我的 bug，而是在想我的流程是不是有问题，我的哪个流程会导致 bug，最后我相信 <code>go-zero</code> 能成为 <strong>微服务开发</strong> 的首选框架。</p>\n<p>最后说说遇到的坑吧：</p>\n<ul>\n<li><code>grpc</code></li>\n</ul>\n<p><code>grpc</code> 本人第一次用，然后就遇到了，有些字符为空时，字段值不显示的问题：</p>\n<p>通过 <code>grpc</code> 官方库中的 <code>jsonpb</code> 来实现，官方在它的设定中有一个结构体用来实现 <code>protoc buffer</code> 转换为 JSON 结构，并可以根据字段来配置转换的要求。</p>\n<ul>\n<li>跨域问题</li>\n</ul>\n<p><code>go-zero</code> 中设置了，感觉没有效果，大佬说通过 nginx 设置，后面发现还是不行，最近强行弄到了一个域名下，后面有时间再解决。</p>\n<ul>\n<li><code>sqlx</code></li>\n</ul>\n<p><code>go-zero</code> 的 <code>sqlx</code> 问题，这个真的费了很长的时间：</p>\n<blockquote>\n<p><code>time.Time</code> 这个数据结构，数据库中用的是 timestamp 这个 比如我的字段 是 delete_at 默认数库设置的是 null，结果插入的时候，就报了 <code>Incorrect datetime value: '0000-00-00' for column 'deleted_at' at row 1\"}</code> 这个错，查询的时候报 <code>deleted_at\\\": unsupported Scan, storing driver.Value type \\u003cnil\\u003e into type *time.Time\" </code></p>\n<p>后面果断去掉了这个字段，字段上面加上 <code>.omitempty</code> 这个标签，好像也有用，<code>db:\".omitempty\"</code></p>\n</blockquote>\n<p>其次就是这个 <code>Conversion from collation utf8_general_ci into utf8mb4_unicode_ci</code>，这个导致的大概原因是，现在都喜欢用 emj 表情了，mysql 数据识别不了。</p>\n<ul>\n<li>数据连接</li>\n</ul>\n<p><code>mysql</code> 这边照样按照原始的方式,将配置文件修改编码格式，重新创建数据库，并且设置数据库编码为 utf8mb4，排序规则为 <code>utf8mb4_unicode_ci</code>。</p>\n<p><strong>这样的话,所有的表还有 string 字段都是这个编码格式,如果不想所有的都是,可以单独设置,这个不是重点.因为在 navicat 上都好设置,手动点一下就行了</strong>。</p>\n<p>重点来了：golang 中使用的是 <code><a href=\"http://github.com/go-sql-driver/mysql\" rel=\"nofollow\">github.com/go-sql-driver/mysql</a></code> 驱动，将连接 <code>mysql</code>的 <code>dsn</code>（因为我这使用的是 gorm，所以 dsn 可能跟原生的格式不太一样，不过没关系， 只需要关注 <code>charset</code> 和 <code>collation</code> 就行了）</p>\n<p><code>root:password@/name?parseTime=True&amp;loc=Local&amp;charset=utf8</code> 修改为：\n<code>root:password@/name?parseTime=True&amp;loc=Local&amp;charset=utf8mb4&amp;collation=utf8mb4_unicode_ci</code></p>\n<h2>go-zero 项目地址</h2>\n<p><a href=\"https://github.com/tal-tech/go-zero\" rel=\"nofollow\">https://github.com/tal-tech/go-zero</a></p>\n","last_modified":1608513880,"replies":5,"id":737341},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165821,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"YUX","website":"https://yux.io/","github":"YUX","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/99f2/3af0/147802_mini.png?m=1450910861","bio":"","url":"https://www.v2ex.com/u/YUX","tagline":"Fun is boring","twitter":"realYUX","created":1447927580,"avatar_large":"https://cdn.v2ex.com/avatar/99f2/3af0/147802_mini.png?m=1450910861","avatar_mini":"https://cdn.v2ex.com/avatar/99f2/3af0/147802_mini.png?m=1450910861","location":"Paris 🔃 Beijing","btc":"","id":147802},"last_reply_by":"ronman","last_touched":1608515955,"title":"现在有办法看 Google 所搜结果里的网页快照么?","url":"https://www.v2ex.com/t/737333","created":1608511435,"content":"现在突然需要了才发现没这个功能了, 要看的是一个个人博客, 但是现在好像关了, Google 所搜内容关键词还能搜到结果但是点进去就 404.\r\n\r\nhttps://archive.org/web/  这个里面也没有","content_rendered":"<p>现在突然需要了才发现没这个功能了, 要看的是一个个人博客, 但是现在好像关了, Google 所搜内容关键词还能搜到结果但是点进去就 404.</p>\n<p><a href=\"https://archive.org/web/\" rel=\"nofollow\">https://archive.org/web/</a>  这个里面也没有</p>\n","last_modified":1608511435,"replies":5,"id":737333},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1608051983","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1608051983","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":42275,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1608051983","stars":7151,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"Simcyber","website":"https://lunzi.org","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/a3be/f8ab/51067_mini.png?m=1509670620","bio":"","url":"https://www.v2ex.com/u/Simcyber","tagline":"","twitter":"","created":1385914684,"avatar_large":"https://cdn.v2ex.com/avatar/a3be/f8ab/51067_mini.png?m=1509670620","avatar_mini":"https://cdn.v2ex.com/avatar/a3be/f8ab/51067_mini.png?m=1509670620","location":"","btc":"","id":51067},"last_reply_by":"tyzrj766","last_touched":1608518885,"title":"[小调查] 各位 V 友日常主力手机是啥牌子型号的？","url":"https://www.v2ex.com/t/737385","created":1608517491,"content":"","content_rendered":"","last_modified":1608517491,"replies":4,"id":737385},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165821,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"ada87","website":"","github":"ada87","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/99977fc7cc67cce2e82c0bf4e98af6b4?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/ada87","tagline":"","twitter":"ada87","created":1495877900,"avatar_large":"https://cdn.v2ex.com/gravatar/99977fc7cc67cce2e82c0bf4e98af6b4?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/99977fc7cc67cce2e82c0bf4e98af6b4?s=24&d=retro","location":"","btc":"","id":232871},"last_reply_by":"erek","last_touched":1608516345,"title":"有什么好的笔记软件吗？","url":"https://www.v2ex.com/t/737348","created":1608514873,"content":"印象笔记中国版本，近几年太恶心了。\r\n\r\n两天一个更新，全是负优化，天天就营销弹广告，现在卡的一笔，动不动白屏。\r\n\r\n想找个笔记软件替换掉它。","content_rendered":"<p>印象笔记中国版本，近几年太恶心了。</p>\n<p>两天一个更新，全是负优化，天天就营销弹广告，现在卡的一笔，动不动白屏。</p>\n<p>想找个笔记软件替换掉它。</p>\n","last_modified":1608514873,"replies":4,"id":737348},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165821,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"whileFalse","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/c0b4d3bc97c297b9ad044ba06c42d94e?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/whileFalse","tagline":"","twitter":"","created":1488517258,"avatar_large":"https://cdn.v2ex.com/gravatar/c0b4d3bc97c297b9ad044ba06c42d94e?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/c0b4d3bc97c297b9ad044ba06c42d94e?s=24&d=retro","location":"","btc":"","id":218666},"last_reply_by":"mazyi","last_touched":1608444909,"title":"iOS 上有啥 T 子不会崩溃？","url":"https://www.v2ex.com/t/737338","created":1608513352,"content":"iPhone11，iOS 13 的时候 Surge3 很稳定。但是升级到 14 之后，基本一两个小时就悄默声儿的停止了。Surge4 也没有好转。又试了 Quant / QuantX 也不行。\r\n\r\n大家说说有啥稳定的吗。","content_rendered":"iPhone11，iOS 13 的时候 Surge3 很稳定。但是升级到 14 之后，基本一两个小时就悄默声儿的停止了。Surge4 也没有好转。又试了 Quant / QuantX 也不行。<br /><br />大家说说有啥稳定的吗。","last_modified":1608513352,"replies":4,"id":737338},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":165821,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3109,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"shenjiezhuang","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/1db9c1e723f056dac95380a5e59caf1e?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/shenjiezhuang","tagline":null,"twitter":null,"created":1560396582,"avatar_large":"https://cdn.v2ex.com/gravatar/1db9c1e723f056dac95380a5e59caf1e?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/1db9c1e723f056dac95380a5e59caf1e?s=24&d=retro","location":null,"btc":null,"id":421303},"last_reply_by":"asionbo","last_touched":1608514077,"title":"MacBookPro2017 13 寸（A1708 i5+8g+128g）乞丐版询价","url":"https://www.v2ex.com/t/737329","created":1608509557,"content":"如题。刚刚办理完公司内购。基本吃灰状态，因为一直用的自己的本。无拆无修，电池正常损耗，360+循环\r\n坐标帝都","content_rendered":"如题。刚刚办理完公司内购。基本吃灰状态，因为一直用的自己的本。无拆无修，电池正常损耗，360+循环<br />坐标帝都","last_modified":1608509557,"replies":4,"id":737329},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/45c4/8cce/9_large.png?m=1607656880","name":"ipad","avatar_normal":"https://cdn.v2ex.com/navatar/45c4/8cce/9_normal.png?m=1607656880","title":"iPad","url":"https://www.v2ex.com/go/ipad","topics":1415,"footer":"","header":"<a href=\"/go/apple\">Apple</a> 公司设计的全新理念的基于 <a href=\"/go/ios\">iOS</a> 的平板电脑。","title_alternative":"iPad","avatar_mini":"https://cdn.v2ex.com/navatar/45c4/8cce/9_mini.png?m=1607656880","stars":1052,"aliases":[],"root":false,"id":9,"parent_node_name":"apple"},"member":{"username":"skarner","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/4d18c3f7eb28b6c85fbc5fe80e6bead7?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/skarner","tagline":"","twitter":null,"created":1572605684,"avatar_large":"https://cdn.v2ex.com/gravatar/4d18c3f7eb28b6c85fbc5fe80e6bead7?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/4d18c3f7eb28b6c85fbc5fe80e6bead7?s=24&d=retro","location":"","btc":null,"id":450622},"last_reply_by":"IgniteWhite","last_touched":1608518144,"title":"请问 iPad Pro 可以支持 docker 吗？支持 PHPstorm 、 Goland 吗？","url":"https://www.v2ex.com/t/737381","created":1608517317,"content":"在 XXX 条上看到有人发文章说用 iPad Pro 成功安装 docker\r\n\r\n并且成功安装 phpstorm 、goland\r\n\r\n有没有大佬试过的","content_rendered":"在 XXX 条上看到有人发文章说用 iPad Pro 成功安装 docker<br /><br />并且成功安装 phpstorm 、goland<br /><br />有没有大佬试过的","last_modified":1608517317,"replies":3,"id":737381},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/ede7/e2b6/867_large.png?m=1583757182","name":"vscode","avatar_normal":"https://cdn.v2ex.com/navatar/ede7/e2b6/867_normal.png?m=1583757182","title":"Visual Studio Code","url":"https://www.v2ex.com/go/vscode","topics":358,"footer":"","header":"来自 <a href=\"/go/microsoft\">Microsoft</a> 的全新代码编辑器","title_alternative":"Visual Studio Code","avatar_mini":"https://cdn.v2ex.com/navatar/ede7/e2b6/867_mini.png?m=1583757182","stars":392,"aliases":[],"root":false,"id":867,"parent_node_name":"editors"},"member":{"username":"wszgrcy","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/d19e54e0aac1beeab935337a434652ca?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/wszgrcy","tagline":null,"twitter":null,"created":1545829594,"avatar_large":"https://cdn.v2ex.com/gravatar/d19e54e0aac1beeab935337a434652ca?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/d19e54e0aac1beeab935337a434652ca?s=24&d=retro","location":null,"btc":null,"id":373159},"last_reply_by":"aydd2004","last_touched":1608517919,"title":"vscode 的 remote 就相当于 vim+ssh?","url":"https://www.v2ex.com/t/737375","created":1608516865,"content":"周末懒得起来,就在主机上开了一个 ubuntu 虚拟机,然后用平板  \r\n\r\n刚开始是用的 ssh 连接,后来想试一试 vscode 的 remote,然后下了插件,发现配置很简单,配置后就像本地开了一个项目一样,终端呼出什么的也是远程的,几乎就是无缝操作,不知道是不是连服务器现在大家都这么用了...我又火星了  \r\n\r\n然后又想试试连本机(win10),ssh 能连上,但是 vscode 的 remote 就连不上,看下面提示的保存好像已经连上了,但是又报了超时错误.不知道这个 remote 是不是只适用于 linux?","content_rendered":"<p>周末懒得起来,就在主机上开了一个 ubuntu 虚拟机,然后用平板  </p>\n<p>刚开始是用的 ssh 连接,后来想试一试 vscode 的 remote,然后下了插件,发现配置很简单,配置后就像本地开了一个项目一样,终端呼出什么的也是远程的,几乎就是无缝操作,不知道是不是连服务器现在大家都这么用了...我又火星了  </p>\n<p>然后又想试试连本机(win10),ssh 能连上,但是 vscode 的 remote 就连不上,看下面提示的保存好像已经连上了,但是又报了超时错误.不知道这个 remote 是不是只适用于 linux?</p>\n","last_modified":1608516865,"replies":3,"id":737375}]