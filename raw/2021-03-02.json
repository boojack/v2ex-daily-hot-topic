[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":169383,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3172,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"ModF","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/509c13885458a6ca7a1ccb0788c108dc?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/ModF","tagline":null,"twitter":null,"created":1611727948,"avatar_large":"https://cdn.v2ex.com/gravatar/509c13885458a6ca7a1ccb0788c108dc?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/509c13885458a6ca7a1ccb0788c108dc?s=24&d=retro","location":null,"btc":null,"id":530688},"last_reply_by":"bk201","last_touched":1614649941,"title":"你最喜欢的或者你觉得很好的很有意思的话","url":"https://www.v2ex.com/t/757491","created":1614644614,"content":"最近上网看到了一句话：\r\n\t\r\n    被人理解是很奇妙的事 就像你躲在黑暗的角落里 他提着灯对你说：“我能坐这儿吗。”\r\n    \r\n感觉很喜欢，和大家分享一下\r\n\r\n希望大家也把自己喜欢的和大家分享，不需要长篇和很多字的那种，也不要发很多条，就一条简简单单的一句话就好。","content_rendered":"<p>最近上网看到了一句话：</p>\n<pre><code>被人理解是很奇妙的事 就像你躲在黑暗的角落里 他提着灯对你说：“我能坐这儿吗。”\n</code></pre>\n<p>感觉很喜欢，和大家分享一下</p>\n<p>希望大家也把自己喜欢的和大家分享，不需要长篇和很多字的那种，也不要发很多条，就一条简简单单的一句话就好。</p>\n","last_modified":1614644614,"replies":39,"id":757491},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/093f/65e0/59_large.png?m=1431019484","name":"random","avatar_normal":"https://cdn.v2ex.com/navatar/093f/65e0/59_normal.png?m=1431019484","title":"随想","url":"https://www.v2ex.com/go/random","topics":2820,"footer":"","header":"有的时候，可以停下来找找灵感，然后再继续。","title_alternative":"Random","avatar_mini":"https://cdn.v2ex.com/navatar/093f/65e0/59_mini.png?m=1431019484","stars":888,"aliases":[],"root":false,"id":59,"parent_node_name":"v2ex"},"member":{"username":"vitovan","website":"vitovan.com","github":"VitoVan","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/9366/088b/28986_mini.png?m=1613954226","bio":"豆瓣：猫猫驴\r\nhttps://www.douban.com/people/maomaolvloveyou/\r\n\r\n王伟宇宙：\r\nhttps://www.v2ex.com/p/3SS1131M","url":"https://www.v2ex.com/u/vitovan","tagline":"猫猫驴 V 站分身","twitter":"","created":1351401337,"avatar_large":"https://cdn.v2ex.com/avatar/9366/088b/28986_mini.png?m=1613954226","avatar_mini":"https://cdn.v2ex.com/avatar/9366/088b/28986_mini.png?m=1613954226","location":"","btc":"","id":28986},"last_reply_by":"fengyiqicoder","last_touched":1614649861,"title":"猴年马月狗日，王伟疯了","url":"https://www.v2ex.com/t/757489","created":1614643208,"content":"猴年马月狗日，王伟疯了。\r\n\r\n王伟说，\r\n我要做一位诗人，\r\n我要写一首绝唱。\r\n\r\n王伟走进书店，\r\n抬头，看到谋杀、爱情、幻想和冒险；\r\n低头，看到冬日、春风、森林和池塘。\r\n\r\n子弹穿透笔记，打在王伟的胸膛；\r\n黑犬跳出笼子，咬住王伟的肩膀。\r\n\r\n离开的，是失踪的孩子；\r\n留下的，是百年的孤独。\r\n\r\n霍乱时期的爱情，\r\n是土地上瞬息即逝的美梦；\r\n远在挪威的木匠，\r\n是熊镇上形同陌路的女人。\r\n\r\n西方的文学机器里，\r\n藏着一个乐观主义者的疯狂；\r\n无欲的昨日之岛上，\r\n唱着一条血色子午线的悲伤。\r\n\r\n不知道，泽诺的意识里，\r\n是否存放着玫瑰的名字；\r\n又或许，似水的流年中，\r\n曾住着莎士比亚的盲肠。\r\n\r\n耳中的火炬熊熊燃烧，\r\n获救的舌头高声撒谎。\r\n\r\n突然响起的一阵敲门声，\r\n震掉了那人性的枷锁；\r\n在人间寻找死亡的男人，\r\n抛弃了黄金国的信仰。\r\n\r\n王伟闭上眼睛，\r\n一阵气流穿过喉咙，\r\n咳嗽声，在书店里回荡。","content_rendered":"猴年马月狗日，王伟疯了。<br /><br />王伟说，<br />我要做一位诗人，<br />我要写一首绝唱。<br /><br />王伟走进书店，<br />抬头，看到谋杀、爱情、幻想和冒险；<br />低头，看到冬日、春风、森林和池塘。<br /><br />子弹穿透笔记，打在王伟的胸膛；<br />黑犬跳出笼子，咬住王伟的肩膀。<br /><br />离开的，是失踪的孩子；<br />留下的，是百年的孤独。<br /><br />霍乱时期的爱情，<br />是土地上瞬息即逝的美梦；<br />远在挪威的木匠，<br />是熊镇上形同陌路的女人。<br /><br />西方的文学机器里，<br />藏着一个乐观主义者的疯狂；<br />无欲的昨日之岛上，<br />唱着一条血色子午线的悲伤。<br /><br />不知道，泽诺的意识里，<br />是否存放着玫瑰的名字；<br />又或许，似水的流年中，<br />曾住着莎士比亚的盲肠。<br /><br />耳中的火炬熊熊燃烧，<br />获救的舌头高声撒谎。<br /><br />突然响起的一阵敲门声，<br />震掉了那人性的枷锁；<br />在人间寻找死亡的男人，<br />抛弃了黄金国的信仰。<br /><br />王伟闭上眼睛，<br />一阵气流穿过喉咙，<br />咳嗽声，在书店里回荡。","last_modified":1614643288,"replies":33,"id":757489},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1594743680","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1594743680","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":169383,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1594743680","stars":3172,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"Legman","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/70e18d293a90de1dd6f290b913a44743?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/Legman","tagline":"","twitter":"","created":1521526438,"avatar_large":"https://cdn.v2ex.com/gravatar/70e18d293a90de1dd6f290b913a44743?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/70e18d293a90de1dd6f290b913a44743?s=24&d=retro","location":"","btc":"","id":301726},"last_reply_by":"mr2xd","last_touched":1614649853,"title":"家庭使用 MIFI 代替宽带怎么样","url":"https://www.v2ex.com/t/757492","created":1614646383,"content":"新房在装修，孩子马上小学，我和老婆对电视以及网络依赖不高，暂时不想拉宽带，目前想着是否可以使用 MIFI 设备（比如华为的随身 WIFI ）代替宽带作为日常使用，有没有类似情况的朋友？稳定性如何？        \r\nps：手机卡套餐是西钉，流量倒是不用担心。","content_rendered":"新房在装修，孩子马上小学，我和老婆对电视以及网络依赖不高，暂时不想拉宽带，目前想着是否可以使用 MIFI 设备（比如华为的随身 WIFI ）代替宽带作为日常使用，有没有类似情况的朋友？稳定性如何？        <br />ps：手机卡套餐是西钉，流量倒是不用担心。","last_modified":1614646383,"replies":11,"id":757492},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/38af/8613/176_large.png?m=1584385885","name":"car","avatar_normal":"https://cdn.v2ex.com/navatar/38af/8613/176_normal.png?m=1584385885","title":"汽车","url":"https://www.v2ex.com/go/car","topics":1065,"footer":"","header":"关于买车、开车的技术讨论","title_alternative":"Car","avatar_mini":"https://cdn.v2ex.com/navatar/38af/8613/176_mini.png?m=1584385885","stars":1071,"aliases":[],"root":false,"id":176,"parent_node_name":"life"},"member":{"username":"klakekent","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/7ec105f049de0814a8f6d334957d1222?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/klakekent","tagline":"","twitter":"","created":1401890767,"avatar_large":"https://cdn.v2ex.com/gravatar/7ec105f049de0814a8f6d334957d1222?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/7ec105f049de0814a8f6d334957d1222?s=24&d=retro","location":"","btc":"","id":64218},"last_reply_by":"mr2xd","last_touched":1614649682,"title":"15-20w suv 求推荐","url":"https://www.v2ex.com/t/757499","created":1614648129,"content":"个人需求：安全性，内饰，空间\r\n\r\n目前自己列了几个车还在研究配置阶段，想听听大家推荐下一起研究好再去试驾\r\n\r\n目前研究了几个： 哈佛 h6 三代  瑞虎 8plus 领克 01  福特锐际  雪佛兰探界者\r\n\r\n价格是落地价格","content_rendered":"个人需求：安全性，内饰，空间<br /><br />目前自己列了几个车还在研究配置阶段，想听听大家推荐下一起研究好再去试驾<br /><br />目前研究了几个： 哈佛 h6 三代  瑞虎 8plus 领克 01  福特锐际  雪佛兰探界者<br /><br />价格是落地价格","last_modified":1614648159,"replies":10,"id":757499},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1613723840","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1613723840","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":43461,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1613723840","stars":7269,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"kisshere","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/6157/5077/66454_mini.png?m=1404827302","bio":"","url":"https://www.v2ex.com/u/kisshere","tagline":"","twitter":null,"created":1403956444,"avatar_large":"https://cdn.v2ex.com/avatar/6157/5077/66454_mini.png?m=1404827302","avatar_mini":"https://cdn.v2ex.com/avatar/6157/5077/66454_mini.png?m=1404827302","location":"","btc":null,"id":66454},"last_reply_by":"sss495088732","last_touched":1614649521,"title":"ES 用 PHP 错误的创建了索引，居然没报错，目前处于生产环境中怎么修复？","url":"https://www.v2ex.com/t/757494","created":1614646933,"content":"目前我用 php 创建一个 index，ES 版本：6.7.2：\r\n```\r\n<?php\r\n$client = ClientBuilder::create()->build();\r\n$params = [\r\n    'index' => 'MyIndex',\r\n    'body' => [\r\n        'settings' => [\r\n            'number_of_shards' => 2,\r\n            'number_of_replicas' => 0\r\n        ],\r\n        'MyType' => [\r\n            'properties' => [\r\n                'title' => [\r\n                    'type'=>'text',\r\n                    'analyzer'=>'thai',\r\n                ],\r\n                'createTime' => [\r\n                    'type'=>'integer',\r\n                    'index' => false\r\n                ],\r\n                'uid' => [\r\n                    'type'=>'integer'\r\n                ]\r\n            ]\r\n        ]\r\n    ]\r\n];\r\n$client->indices()->create($params);\r\n?>\r\n```\r\n目前几乎 query 不出来任何结果，一查 ES 官网，发现居然写错了，少加了一个 mapping，正确的应该是：\r\n```\r\n<?php\r\n$client = ClientBuilder::create()->build();\r\n$params = [\r\n    'index' => 'MyIndex',\r\n    'body' => [\r\n        'settings' => [\r\n            'number_of_shards' => 2,\r\n            'number_of_replicas' => 0\r\n        ],\r\n        'mappings' => [\r\n            'MyType' => [\r\n                '_source' => [\r\n                    'enabled' => true\r\n                ],\r\n                'properties' => [\r\n                    'title' => [\r\n                        'type'=>'text',\r\n                        'analyzer'=>'thai',\r\n                    ],\r\n                    'createTime' => [\r\n                        'type'=>'integer',\r\n                        'index' => false\r\n                    ],\r\n                    'uid' => [\r\n                        'type'=>'integer'\r\n                    ]\r\n                ]\r\n            ]\r\n        ]\r\n\r\n    ]\r\n];\r\n$client->indices()->create($params);\r\n?>\r\n```\r\n那么问题来了：\r\n1. 为什么少了一个 mappings，ES 居然不报错？？？那么它默认是怎样处理该代码的，以怎样的 analyzer 和 tokenizer 来创建的 index ？目前只能搜索出有空格的结果，比如，我想搜“ABC”，那么“ABC DEF WXYZ”能搜出来，但“ABCDEFGHIJK”就搜不出来\r\n2. 目前处于生产环境中，那么该如何补救？","content_rendered":"<p>目前我用 php 创建一个 index，ES 版本：6.7.2：</p>\n<pre><code>&lt;?php\n$client = ClientBuilder::create()-&gt;build();\n$params = [\n    'index' =&gt; 'MyIndex',\n    'body' =&gt; [\n        'settings' =&gt; [\n            'number_of_shards' =&gt; 2,\n            'number_of_replicas' =&gt; 0\n        ],\n        'MyType' =&gt; [\n            'properties' =&gt; [\n                'title' =&gt; [\n                    'type'=&gt;'text',\n                    'analyzer'=&gt;'thai',\n                ],\n                'createTime' =&gt; [\n                    'type'=&gt;'integer',\n                    'index' =&gt; false\n                ],\n                'uid' =&gt; [\n                    'type'=&gt;'integer'\n                ]\n            ]\n        ]\n    ]\n];\n$client-&gt;indices()-&gt;create($params);\n?&gt;\n</code></pre>\n<p>目前几乎 query 不出来任何结果，一查 ES 官网，发现居然写错了，少加了一个 mapping，正确的应该是：</p>\n<pre><code>&lt;?php\n$client = ClientBuilder::create()-&gt;build();\n$params = [\n    'index' =&gt; 'MyIndex',\n    'body' =&gt; [\n        'settings' =&gt; [\n            'number_of_shards' =&gt; 2,\n            'number_of_replicas' =&gt; 0\n        ],\n        'mappings' =&gt; [\n            'MyType' =&gt; [\n                '_source' =&gt; [\n                    'enabled' =&gt; true\n                ],\n                'properties' =&gt; [\n                    'title' =&gt; [\n                        'type'=&gt;'text',\n                        'analyzer'=&gt;'thai',\n                    ],\n                    'createTime' =&gt; [\n                        'type'=&gt;'integer',\n                        'index' =&gt; false\n                    ],\n                    'uid' =&gt; [\n                        'type'=&gt;'integer'\n                    ]\n                ]\n            ]\n        ]\n\n    ]\n];\n$client-&gt;indices()-&gt;create($params);\n?&gt;\n</code></pre>\n<p>那么问题来了：</p>\n<ol>\n<li>为什么少了一个 mappings，ES 居然不报错？？？那么它默认是怎样处理该代码的，以怎样的 analyzer 和 tokenizer 来创建的 index ？目前只能搜索出有空格的结果，比如，我想搜“ABC”，那么“ABC DEF WXYZ”能搜出来，但“ABCDEFGHIJK”就搜不出来</li>\n<li>目前处于生产环境中，那么该如何补救？</li>\n</ol>\n","last_modified":1614646982,"replies":8,"id":757494}]