[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/b789/2fb3/937_large.png?m=1584298330","name":"zhihu","avatar_normal":"https://cdn.v2ex.com/navatar/b789/2fb3/937_normal.png?m=1584298330","title":"知乎","url":"https://www.v2ex.com/go/zhihu","topics":270,"footer":"","header":"知乎创建于 2010 年，是一个用户产生内容的问答社区","title_alternative":"Zhihu","avatar_mini":"https://cdn.v2ex.com/navatar/b789/2fb3/937_mini.png?m=1584298330","stars":81,"aliases":[],"root":false,"id":937,"parent_node_name":"internet"},"member":{"username":"Cassano","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/020c/daac/461815_mini.png?m=1577460505","bio":null,"url":"https://www.v2ex.com/u/Cassano","tagline":null,"twitter":null,"created":1577460265,"avatar_large":"https://cdn.v2ex.com/avatar/020c/daac/461815_mini.png?m=1577460505","avatar_mini":"https://cdn.v2ex.com/avatar/020c/daac/461815_mini.png?m=1577460505","location":null,"btc":null,"id":461815},"last_reply_by":"cxz2998","last_touched":1620286348,"title":"为什么现在到处都在说拉垮，而且什么都能拉垮？还有什么不能拉垮的么？我觉得现在有些过度使用这个词汇了","url":"https://www.v2ex.com/t/775084","created":1620266457,"content":"","content_rendered":"","last_modified":1620276475,"replies":52,"id":775084},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/a5e0/0132/146_large.png?m=1594135486","name":"js","avatar_normal":"https://cdn.v2ex.com/navatar/a5e0/0132/146_normal.png?m=1594135486","title":"JavaScript","url":"https://www.v2ex.com/go/js","topics":2570,"footer":"","header":"JavaScript (sometimes abbreviated JS) is a prototype-based scripting language that is dynamic, weakly typed and has first-class functions.","title_alternative":"JavaScript","avatar_mini":"https://cdn.v2ex.com/navatar/a5e0/0132/146_mini.png?m=1594135486","stars":2592,"aliases":[],"root":false,"id":146,"parent_node_name":"programming"},"member":{"username":"BoringTu","website":"https://boringtu.com","github":"boringtu","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/2f6cc0bdcaeb803a4c46e836f15b7c94?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/BoringTu","tagline":"","twitter":"","created":1523427136,"avatar_large":"https://cdn.v2ex.com/gravatar/2f6cc0bdcaeb803a4c46e836f15b7c94?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/2f6cc0bdcaeb803a4c46e836f15b7c94?s=24&d=retro","location":"","btc":"","id":307764},"last_reply_by":"yyfearth","last_touched":1620286604,"title":"为什么你们要选择 TypeScript？","url":"https://www.v2ex.com/t/775169","created":1620283503,"content":"我只是不明白为啥这么多人会选择 ts ？理由是啥啊？ ts 出来的那年我就关注了，但所有的理由在我看来都是莫名其妙的观点，但这些年怎么还用的人越来越多了？\r\n咱就说脑回路很神奇的把本身弱类型为优势的 JavaScript，套了一层强类型的壳的这步操作我就看不懂了，这是图啥呢？这样代码写着不难受么？那你直接用 Java 写然后编译成 JavaScript 不好么？\r\n网上有很多人说，用 ts 可以减少因类型导致的错误。大哥，你是个程序员，你连自己写的代码是怎么跑的都不知道的话，转行好吗？我十一年的程序员了，js 写了 11 年，js 的其他高级语言我也都研究过，包括 ts，但现在只用 es6 和 coffee2，我怎么就一次都没碰到过我连变量背后的值类型导致的 bug 呢？","content_rendered":"我只是不明白为啥这么多人会选择 ts ？理由是啥啊？ ts 出来的那年我就关注了，但所有的理由在我看来都是莫名其妙的观点，但这些年怎么还用的人越来越多了？<br />咱就说脑回路很神奇的把本身弱类型为优势的 JavaScript，套了一层强类型的壳的这步操作我就看不懂了，这是图啥呢？这样代码写着不难受么？那你直接用 Java 写然后编译成 JavaScript 不好么？<br />网上有很多人说，用 ts 可以减少因类型导致的错误。大哥，你是个程序员，你连自己写的代码是怎么跑的都不知道的话，转行好吗？我十一年的程序员了，js 写了 11 年，js 的其他高级语言我也都研究过，包括 ts，但现在只用 es6 和 coffee2，我怎么就一次都没碰到过我连变量背后的值类型导致的 bug 呢？","last_modified":1620283503,"replies":49,"id":775169},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1618811339","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1618811339","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":172101,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1618811339","stars":3218,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"Pogbag","website":"shua1zh.github.io","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/a49b/0fdd/300244_mini.png?m=1609399441","bio":"","url":"https://www.v2ex.com/u/Pogbag","tagline":"","twitter":"","created":1521078466,"avatar_large":"https://cdn.v2ex.com/avatar/a49b/0fdd/300244_mini.png?m=1609399441","avatar_mini":"https://cdn.v2ex.com/avatar/a49b/0fdd/300244_mini.png?m=1609399441","location":"","btc":"","id":300244},"last_reply_by":"JamesR","last_touched":1620286433,"title":"你们的 NAS 上都跑了什么服务","url":"https://www.v2ex.com/t/775071","created":1620264103,"content":"机型：DS220+/10G RAM/4T+1T HDD\r\n系统：DSM 6.2.4\r\n\r\n下载：download station/玩物下载 /qBittorent\r\n\r\n影音：Emby/tinyMediaManager/AVDC\r\n\r\n同步：Cloud Sync 同步百度网盘\r\n\r\nDocker：chrome 浏览器 访问内网路由器用的\r\n\r\n虚拟机：装了 win7 卡的要死 鼠标掉帧\r\n\r\n求推荐一些好玩的","content_rendered":"<p>机型：DS220+/10G RAM/4T+1T HDD\n系统：DSM 6.2.4</p>\n<p>下载：download station/玩物下载 /qBittorent</p>\n<p>影音：Emby/tinyMediaManager/AVDC</p>\n<p>同步：Cloud Sync 同步百度网盘</p>\n<p>Docker：chrome 浏览器 访问内网路由器用的</p>\n<p>虚拟机：装了 win7 卡的要死 鼠标掉帧</p>\n<p>求推荐一些好玩的</p>\n","last_modified":1620264103,"replies":44,"id":775071},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c9e1/074f/104_large.png?m=1620107106","name":"cloud","avatar_normal":"https://cdn.v2ex.com/navatar/c9e1/074f/104_normal.png?m=1620107106","title":"云计算","url":"https://www.v2ex.com/go/cloud","topics":4421,"footer":"","header":"关于云计算技术和平台的综合讨论区。","title_alternative":"Cloud Computing","avatar_mini":"https://cdn.v2ex.com/navatar/c9e1/074f/104_mini.png?m=1620107106","stars":2674,"aliases":[],"root":false,"id":104,"parent_node_name":"webmaster"},"member":{"username":"Grande","website":"onekeyes.cn","github":"onekeyes","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/cf19/b9fd/509722_mini.png?m=1615429038","bio":"","url":"https://www.v2ex.com/u/Grande","tagline":"","twitter":"","created":1601017082,"avatar_large":"https://cdn.v2ex.com/avatar/cf19/b9fd/509722_mini.png?m=1615429038","avatar_mini":"https://cdn.v2ex.com/avatar/cf19/b9fd/509722_mini.png?m=1615429038","location":"","btc":"","id":509722},"last_reply_by":"zzzmh","last_touched":1620285898,"title":"阿里云， HK 节点轻量应用服务器这是上新了，不知线路如何？","url":"https://www.v2ex.com/t/775103","created":1620269120,"content":"##  旧版 1c1g ssd 25g\r\n![]( https://cloud.onekeyes.cn/index.php/s/cp6JSCfCKx4Pbq6/preview)\r\n##  新版 2c1g essd 40g\r\n![]( https://cloud.onekeyes.cn/index.php/s/w7ecyF4GaKM6irz/preview)","content_rendered":"<h2>旧版 1c1g ssd 25g</h2>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://cloud.onekeyes.cn/index.php/s/cp6JSCfCKx4Pbq6/preview\"/></p>\n<h2>新版 2c1g essd 40g</h2>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://cloud.onekeyes.cn/index.php/s/w7ecyF4GaKM6irz/preview\"/></p>\n","last_modified":1620276410,"replies":29,"id":775103},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c51c/e410/13_large.png?m=1620107125","name":"idev","avatar_normal":"https://cdn.v2ex.com/navatar/c51c/e410/13_normal.png?m=1620107125","title":"iDev","url":"https://www.v2ex.com/go/idev","topics":3662,"footer":"可将讨论时涉及到的代码发布在 <a href=\"http://gist.github.com/\" target=\"_blank\">Gist</a> ，非常欢迎大家分享开发心得及讨论各种疑难问题。","header":"iOS 及 OS X 开发技术讨论区，iOS 是 <a href=\"/go/iphone\">iPhone</a> 及 <a href=\"/go/ipad\">iPad</a> 上运行的操作系统。","title_alternative":"iDev","avatar_mini":"https://cdn.v2ex.com/navatar/c51c/e410/13_mini.png?m=1620107125","stars":1441,"aliases":[],"root":false,"id":13,"parent_node_name":"dev"},"member":{"username":"coldmn3","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/e70eaffc27f91807f37bbdb03af1964b?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/coldmn3","tagline":null,"twitter":null,"created":1401075042,"avatar_large":"https://cdn.v2ex.com/gravatar/e70eaffc27f91807f37bbdb03af1964b?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/e70eaffc27f91807f37bbdb03af1964b?s=24&d=retro","location":null,"btc":null,"id":63609},"last_reply_by":"domodomo","last_touched":1620282314,"title":"打款延迟，需要提供护照？","url":"https://www.v2ex.com/t/775129","created":1620273071,"content":"http://ww1.sinaimg.cn/large/006zSPLrgy1gq8kd0awt6j310g17cn4w.jpg\r\n\r\n还要提供护照，是诈骗吗，不过确实是苹果邮箱发过来的","content_rendered":"<img src=\"http://ww1.sinaimg.cn/large/006zSPLrgy1gq8kd0awt6j310g17cn4w.jpg\" class=\"embedded_image\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\"> <br /><br />还要提供护照，是诈骗吗，不过确实是苹果邮箱发过来的","last_modified":1620273071,"replies":19,"id":775129},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1620107083","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1620107083","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":44358,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1620107083","stars":7361,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"polyang","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/8bcb/c1d0/510643_mini.png?m=1601433658","bio":"","url":"https://www.v2ex.com/u/polyang","tagline":"","twitter":null,"created":1601393887,"avatar_large":"https://cdn.v2ex.com/avatar/8bcb/c1d0/510643_mini.png?m=1601433658","avatar_mini":"https://cdn.v2ex.com/avatar/8bcb/c1d0/510643_mini.png?m=1601433658","location":"","btc":null,"id":510643},"last_reply_by":"tsanie","last_touched":1620286382,"title":"各位买 nas 一般用来干嘛？","url":"https://www.v2ex.com/t/775159","created":1620281550,"content":"看 V 站挺多人提到 nas，很好奇一般买来干嘛。\r\n\r\n还有一般在什么网站买？","content_rendered":"看 V 站挺多人提到 nas，很好奇一般买来干嘛。<br /><br />还有一般在什么网站买？","last_modified":1620281550,"replies":18,"id":775159},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1615111825","name":"apple","avatar_normal":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1615111825","title":"Apple","url":"https://www.v2ex.com/go/apple","topics":14756,"footer":"","header":"设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。","title_alternative":"Apple","avatar_mini":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1615111825","stars":1799,"aliases":[],"root":false,"id":184,"parent_node_name":"hardware"},"member":{"username":"Hashtagoo","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/6f14/cf24/305007_mini.png?m=1555573654","bio":"","url":"https://www.v2ex.com/u/Hashtagoo","tagline":"","twitter":"","created":1522483758,"avatar_large":"https://cdn.v2ex.com/avatar/6f14/cf24/305007_mini.png?m=1555573654","avatar_mini":"https://cdn.v2ex.com/avatar/6f14/cf24/305007_mini.png?m=1555573654","location":"","btc":"","id":305007},"last_reply_by":"echo1937","last_touched":1620276933,"title":"19 年的 Watch S4，冲动买了 AC+,两年期到，巨亏。","url":"https://www.v2ex.com/t/775092","created":1620268124,"content":"购于上海环贸 iapm,寻思手表容易摔，买个 AC+吧（内心 os 大不了两年期到加钱换新\r\n如今 S6 都出来了，手表也没碎，还剩两个月到期，退 AC+，不值，再花 528 换新好像更不值 ：）\r\n巨亏。","content_rendered":"<p>购于上海环贸 iapm,寻思手表容易摔，买个 AC+吧（内心 os 大不了两年期到加钱换新\n如今 S6 都出来了，手表也没碎，还剩两个月到期，退 AC+，不值，再花 528 换新好像更不值 ：）\n巨亏。</p>\n","last_modified":1620268124,"replies":18,"id":775092},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1620106885","name":"career","avatar_normal":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1620106885","title":"职场话题","url":"https://www.v2ex.com/go/career","topics":11397,"footer":"","header":"这里，我们聊聊那些工作中遇到的开心和不开心的事。","title_alternative":"Career","avatar_mini":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1620106885","stars":2026,"aliases":[],"root":false,"id":770,"parent_node_name":"work"},"member":{"username":"liudaolunhuibl","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/37d4/6957/504746_mini.png?m=1619054801","bio":"","url":"https://www.v2ex.com/u/liudaolunhuibl","tagline":"","twitter":null,"created":1597971891,"avatar_large":"https://cdn.v2ex.com/avatar/37d4/6957/504746_mini.png?m=1619054801","avatar_mini":"https://cdn.v2ex.com/avatar/37d4/6957/504746_mini.png?m=1619054801","location":"","btc":null,"id":504746},"last_reply_by":"icyalala","last_touched":1620271128,"title":"看来部分人是觉得试用期只是公司对你的考察期不是你对公司的考察期？","url":"https://www.v2ex.com/t/775072","created":1620264277,"content":"除非一些特别大的厂你在脉脉或者知乎上可以很轻松的搜索到这个公司的信息但是大部分公司的详细信息你在入职之前还是无从得知的，面试的时候会简单问问应聘的部门大概做什么也会问 HR 一些福利等等，但是加班、领导关系甚至你负责的项目的技术栈（面试的时候部分面试官会对你入职之后负责的项目的技术栈回答得很含糊那你就要注意了多半是老项目，上一个受害者刚刚跑路等人接盘）这些你在入职之前还是无从知晓的，所以才有了试用期，试用期不仅仅是公司可以随时让你走人你也可以随时开除你的老板，双向选择嘛","content_rendered":"<p>除非一些特别大的厂你在脉脉或者知乎上可以很轻松的搜索到这个公司的信息但是大部分公司的详细信息你在入职之前还是无从得知的，面试的时候会简单问问应聘的部门大概做什么也会问 HR 一些福利等等，但是加班、领导关系甚至你负责的项目的技术栈（面试的时候部分面试官会对你入职之后负责的项目的技术栈回答得很含糊那你就要注意了多半是老项目，上一个受害者刚刚跑路等人接盘）这些你在入职之前还是无从知晓的，所以才有了试用期，试用期不仅仅是公司可以随时让你走人你也可以随时开除你的老板，双向选择嘛</p>\n","last_modified":1620264308,"replies":15,"id":775072},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1620107083","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1620107083","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":44354,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1620107083","stars":7361,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"Girl66","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/90c7/3484/544435_mini.png?m=1620110110","bio":null,"url":"https://www.v2ex.com/u/Girl66","tagline":null,"twitter":null,"created":1620109415,"avatar_large":"https://cdn.v2ex.com/avatar/90c7/3484/544435_mini.png?m=1620110110","avatar_mini":"https://cdn.v2ex.com/avatar/90c7/3484/544435_mini.png?m=1620110110","location":null,"btc":null,"id":544435},"last_reply_by":"wipbssldo","last_touched":1620268871,"title":"请教各位: 苹果 testflight 审核被拒: 不能从对象存储 CDN 得到数据来加载页面.","url":"https://www.v2ex.com/t/775066","created":1620259304,"content":"请教各位帅锅: 我的苹果 testflight 审核被拒,违反\"Guideline 2.1 - Performance - App Completeness\"条款:\r\n\r\n出错: 不能从对象存储 CDN 得到数据来加载页面.\r\n现象: 打开 APP 登录成功后显示空白页面.\r\n\r\nAPP 数据来源:\r\n1. 数据是存在猫云的对象存储上的, 外面套了个 CDN: 通过 http 网址(没有开 https)直接下载文件(URLSession.shared.downloadTask)\r\n2. APP 服务器也没有开启 ipv6\r\n\r\n我的问题:\r\n1. APP 在苹果审核时既然可以登录, 说明访问 APP 服务器是正常的, 那么为什么就不能从对象存储的 CDN 中获取数据?\r\n2. 不能从存储的 CDN 中获取数据是因为对象存储对应的网址没有开启 https 呢, 还是 app 服务器没开启 ipv6 问题?\r\n3. 有没有其他原因导致苹果审核时不能从国内的 CDN/对象存储中获取数据?\r\n4. 有没有方法能解决上述问题?\r\n\r\n\r\n小妹第一次提交审核, 很多都不懂, 请各位指教,谢谢.","content_rendered":"请教各位帅锅: 我的苹果 testflight 审核被拒,违反\"Guideline 2.1 - Performance - App Completeness\"条款:<br /><br />出错: 不能从对象存储 CDN 得到数据来加载页面.<br />现象: 打开 APP 登录成功后显示空白页面.<br /><br />APP 数据来源:<br />1. 数据是存在猫云的对象存储上的, 外面套了个 CDN: 通过 http 网址(没有开 https)直接下载文件(URLSession.shared.downloadTask)<br />2. APP 服务器也没有开启 ipv6<br /><br />我的问题:<br />1. APP 在苹果审核时既然可以登录, 说明访问 APP 服务器是正常的, 那么为什么就不能从对象存储的 CDN 中获取数据?<br />2. 不能从存储的 CDN 中获取数据是因为对象存储对应的网址没有开启 https 呢, 还是 app 服务器没开启 ipv6 问题?<br />3. 有没有其他原因导致苹果审核时不能从国内的 CDN/对象存储中获取数据?<br />4. 有没有方法能解决上述问题?<br /><br /><br />小妹第一次提交审核, 很多都不懂, 请各位指教,谢谢.","last_modified":1620259343,"replies":14,"id":775066},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1620107083","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1620107083","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":44358,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1620107083","stars":7361,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"waibunleung","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/dabc/65b9/210792_mini.png?m=1563788897","bio":null,"url":"https://www.v2ex.com/u/waibunleung","tagline":null,"twitter":null,"created":1484371340,"avatar_large":"https://cdn.v2ex.com/avatar/dabc/65b9/210792_mini.png?m=1563788897","avatar_mini":"https://cdn.v2ex.com/avatar/dabc/65b9/210792_mini.png?m=1563788897","location":null,"btc":null,"id":210792},"last_reply_by":"waibunleung","last_touched":1620285644,"title":"DAO 层和 ORM，能区分，但又不完全能区分，我裂开了","url":"https://www.v2ex.com/t/775162","created":1620282174,"content":"desc：是这样的，小弟从 php 转到 go 一个月时间不够，项目的目录结构需要自己搭建。于是就找网上的项目组织目录参考，发现有一部分目录结构里有 dao 层的分层概念。这个在 java 里面比较常见，在 php 中用得比较多的是 orm，不知道 go 中是不是也适合这样搞。\r\n\r\n于是引起了我一顿梳理 dao 和 orm 之间的关系。但仍有如下疑问：\r\n\r\n1. 究竟项目使用了 orm 之后，还需不需要再分一层 DAO 层出来？如果要分，此时的 DAO 层里面写的是什么逻辑？求 demo 举例\r\n2. ORM 不是正好替代了 DAO 的角色吗？还是说 DAO 可以通过 ORM 来实现？此时 DAO 层的实现是怎么样的？在 ORM 外面包一层，意义在哪里？\r\n3. 在项目代码分层上(语言无关)，DAO 和 ORM 分别是什么层面上的东西？\r\n\r\n真的纠结了三四天了，每天看完都有不同的结论，求大佬们指点一下你们在项目中是怎么划分的~","content_rendered":"<p>desc：是这样的，小弟从 php 转到 go 一个月时间不够，项目的目录结构需要自己搭建。于是就找网上的项目组织目录参考，发现有一部分目录结构里有 dao 层的分层概念。这个在 java 里面比较常见，在 php 中用得比较多的是 orm，不知道 go 中是不是也适合这样搞。</p>\n<p>于是引起了我一顿梳理 dao 和 orm 之间的关系。但仍有如下疑问：</p>\n<ol>\n<li>究竟项目使用了 orm 之后，还需不需要再分一层 DAO 层出来？如果要分，此时的 DAO 层里面写的是什么逻辑？求 demo 举例</li>\n<li>ORM 不是正好替代了 DAO 的角色吗？还是说 DAO 可以通过 ORM 来实现？此时 DAO 层的实现是怎么样的？在 ORM 外面包一层，意义在哪里？</li>\n<li>在项目代码分层上(语言无关)，DAO 和 ORM 分别是什么层面上的东西？</li>\n</ol>\n<p>真的纠结了三四天了，每天看完都有不同的结论，求大佬们指点一下你们在项目中是怎么划分的~</p>\n","last_modified":1620282174,"replies":12,"id":775162},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1615111825","name":"apple","avatar_normal":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1615111825","title":"Apple","url":"https://www.v2ex.com/go/apple","topics":14759,"footer":"","header":"设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。","title_alternative":"Apple","avatar_mini":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1615111825","stars":1799,"aliases":[],"root":false,"id":184,"parent_node_name":"hardware"},"member":{"username":"dLvsYgJ8fiP8TGYU","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/607fce1c8b4ec26e668a392133c3e473?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/dLvsYgJ8fiP8TGYU","tagline":"","twitter":"","created":1543621391,"avatar_large":"https://cdn.v2ex.com/gravatar/607fce1c8b4ec26e668a392133c3e473?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/607fce1c8b4ec26e668a392133c3e473?s=24&d=retro","location":"","btc":"","id":367049},"last_reply_by":"okakuyang","last_touched":1620284791,"title":"为什么用查找 APP 精确定位 AirTag 需要允许相机权限？","url":"https://www.v2ex.com/t/775144","created":1620278350,"content":"在 Google 用英文没搜到相关讨论，于是来这里发贴\r\n\r\nUWB 定位和相机有什么关系？\r\n莫非 Apple 调用相机，是为了配合深度学习算法计算出 AirTag 最有可能藏身的地方（比如沙发缝里、柜子里）\r\n这就是传说中的 [多传感器融合] ？\r\n\r\n看到部分 v 友反馈找一会儿手机就发热，是不是也和调用相机有关？","content_rendered":"<p>在 Google 用英文没搜到相关讨论，于是来这里发贴</p>\n<p>UWB 定位和相机有什么关系？\n莫非 Apple 调用相机，是为了配合深度学习算法计算出 AirTag 最有可能藏身的地方（比如沙发缝里、柜子里）\n这就是传说中的 [多传感器融合] ？</p>\n<p>看到部分 v 友反馈找一会儿手机就发热，是不是也和调用相机有关？</p>\n","last_modified":1620278350,"replies":12,"id":775144},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/a3c6/5c29/108_large.png?m=1620107025","name":"bb","avatar_normal":"https://cdn.v2ex.com/navatar/a3c6/5c29/108_normal.png?m=1620107025","title":"宽带症候群","url":"https://www.v2ex.com/go/bb","topics":9365,"footer":"","header":"网速很重要。比快更快。","title_alternative":"Broadband Symptom Complex","avatar_mini":"https://cdn.v2ex.com/navatar/a3c6/5c29/108_mini.png?m=1620107025","stars":4970,"aliases":[],"root":false,"id":108,"parent_node_name":"geek"},"member":{"username":"rrfeng","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/0bb1/03d9/21425_mini.png?m=1366707259","bio":"","url":"https://www.v2ex.com/u/rrfeng","tagline":"","twitter":"","created":1337912467,"avatar_large":"https://cdn.v2ex.com/avatar/0bb1/03d9/21425_mini.png?m=1366707259","avatar_mini":"https://cdn.v2ex.com/avatar/0bb1/03d9/21425_mini.png?m=1366707259","location":"Beijing","btc":"","id":21425},"last_reply_by":"rrfeng","last_touched":1620284660,"title":"北京联通光猫这么容易坏？我怀疑他骗我……","url":"https://www.v2ex.com/t/775131","created":1620273260,"content":"因为搬家了要移机，师傅上门倒腾了一顿（其实什么都没干就是插上线然后重启了几次光猫，在自己收集上操作了一通），总是连不上然后去换了新的成功了。\r\n\r\n然后就说光猫坏了，需要自费买个新的？？\r\n\r\n我认真咨询了一下：\r\n1. 说不能先通电（我在他人来之前通了电），会击穿？？难道是我家电有问题？？你通电就没事？？\r\n2. 说光猫保修只有一年？？\r\n\r\n请问怎么才能维权？感觉受到了侮辱。","content_rendered":"因为搬家了要移机，师傅上门倒腾了一顿（其实什么都没干就是插上线然后重启了几次光猫，在自己收集上操作了一通），总是连不上然后去换了新的成功了。<br /><br />然后就说光猫坏了，需要自费买个新的？？<br /><br />我认真咨询了一下：<br />1. 说不能先通电（我在他人来之前通了电），会击穿？？难道是我家电有问题？？你通电就没事？？<br />2. 说光猫保修只有一年？？<br /><br />请问怎么才能维权？感觉受到了侮辱。","last_modified":1620273260,"replies":12,"id":775131},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1620106885","name":"career","avatar_normal":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1620106885","title":"职场话题","url":"https://www.v2ex.com/go/career","topics":11399,"footer":"","header":"这里，我们聊聊那些工作中遇到的开心和不开心的事。","title_alternative":"Career","avatar_mini":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1620106885","stars":2026,"aliases":[],"root":false,"id":770,"parent_node_name":"work"},"member":{"username":"brader","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/eca1d420fce2d65511db5a76e703d807?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/brader","tagline":null,"twitter":null,"created":1563931085,"avatar_large":"https://cdn.v2ex.com/gravatar/eca1d420fce2d65511db5a76e703d807?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/eca1d420fce2d65511db5a76e703d807?s=24&d=retro","location":null,"btc":null,"id":431548},"last_reply_by":"ctrlands","last_touched":1620281446,"title":"离职一般多久走？","url":"https://www.v2ex.com/t/775122","created":1620272512,"content":"兄弟们，如何骑驴找马？\r\n如果按正常的话，离职是要 30 天的，但是这样找工作比较困难，一般公司都不愿意等那么久。\r\n你们平时离职多久走啊？有办法和公司沟通，2 星期走人吗？","content_rendered":"<p>兄弟们，如何骑驴找马？\n如果按正常的话，离职是要 30 天的，但是这样找工作比较困难，一般公司都不愿意等那么久。\n你们平时离职多久走啊？有办法和公司沟通，2 星期走人吗？</p>\n","last_modified":1620276310,"replies":12,"id":775122},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1618811339","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1618811339","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":172095,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1618811339","stars":3218,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"Milicense","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/95e2/0a72/454596_mini.png?m=1574322097","bio":null,"url":"https://www.v2ex.com/u/Milicense","tagline":null,"twitter":null,"created":1574321905,"avatar_large":"https://cdn.v2ex.com/avatar/95e2/0a72/454596_mini.png?m=1574322097","avatar_mini":"https://cdn.v2ex.com/avatar/95e2/0a72/454596_mini.png?m=1574322097","location":null,"btc":null,"id":454596},"last_reply_by":"Yanbin","last_touched":1620280308,"title":"在家办公 ，有必要上 herman miller embody 吗？","url":"https://www.v2ex.com/t/775109","created":1620270337,"content":"刚下单了保友金豪 E，3K 的价格还在路上没到货，刚才在看视频，考虑要不要直接一步到位 herman miller embody 。\r\n在家办公，升降桌（也在路上），非码农，打算尽量多活动，有必要直接一步到位吗？保友金豪网上都说好，用过的朋友感觉如何？","content_rendered":"刚下单了保友金豪 E，3K 的价格还在路上没到货，刚才在看视频，考虑要不要直接一步到位 herman miller embody 。<br />在家办公，升降桌（也在路上），非码农，打算尽量多活动，有必要直接一步到位吗？保友金豪网上都说好，用过的朋友感觉如何？","last_modified":1620270401,"replies":11,"id":775109},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/df7f/28ac/791_large.png?m=1563424621","name":"fe","avatar_normal":"https://cdn.v2ex.com/navatar/df7f/28ac/791_normal.png?m=1563424621","title":"前端开发","url":"https://www.v2ex.com/go/fe","topics":2213,"footer":"","header":"","title_alternative":"Frontend","avatar_mini":"https://cdn.v2ex.com/navatar/df7f/28ac/791_mini.png?m=1563424621","stars":1059,"aliases":[],"root":false,"id":791,"parent_node_name":"programmer"},"member":{"username":"ezshine","website":"www.jnsii.com","github":"ezshine","psn":"ezshine_mac","avatar_normal":"https://cdn.v2ex.com/avatar/8e67/a552/145670_mini.png?m=1619582315","bio":"","url":"https://www.v2ex.com/u/ezshine","tagline":"爱整活儿的大帅老猿","twitter":"","created":1446607415,"avatar_large":"https://cdn.v2ex.com/avatar/8e67/a552/145670_mini.png?m=1619582315","avatar_mini":"https://cdn.v2ex.com/avatar/8e67/a552/145670_mini.png?m=1619582315","location":"","btc":"","id":145670},"last_reply_by":"domodomo","last_touched":1620276877,"title":"文字烟花特效，用 JS 代码示爱！程序员小姐姐用这个代码挽回了爱情~","url":"https://www.v2ex.com/t/775095","created":1620268497,"content":"# 前言\r\n\r\n之前我出了一个[如何在网页里使用原生 JS 开发放烟花效果]( https://www.v2ex.com/t/773999#reply2)的教程。\r\n\r\n![image.png]( https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33d4009dca134a969e6145cba339dadc~tplv-k3u1fbpfcp-watermark.image)\r\n\r\n竟然有一个前端小阿姨问我，如果想要烟花放出来是文字的话怎么实现，她要给男朋友做一个。\r\n\r\n好家伙，这狗粮洒一地呀\r\n\r\n![171253fc29abd17b89974c04784db038.gif]( https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/018336172ea14186bda6e35dbf2eb1a4~tplv-k3u1fbpfcp-watermark.image)\r\n\r\n那狗粮不能我一个人吃，分享出来，大家一起吃。\r\n\r\n此文配有 [视频教程]( https://www.bilibili.com/video/BV17p4y1473o)，边吃边看，狗粮更香。\r\n\r\n\r\n# 互动话题\r\n\r\n你身边有这样的程序员小姐姐吗？\r\n\r\n1. 没有，你编的\r\n2. 有呀，我认识\r\n\r\n[点击参与投票]( https://www.bilibili.com/video/BV17p4y1473o)\r\n\r\n\r\n# 先改造一下烟花的源代码\r\n\r\n之前烟花源码里的核心是，我们在创建烟花粒子的时候，赋值了烟花绽放的原点`x`,`y`和圆形烟花的半径`radius`。在绘制烟花动效时，半径不断加大，烟花的动效就出来。\r\n\r\n~~~javascript\r\n//篇幅限制，仅展现部分代码\r\nfunction createFireworks(x, y) {\r\n    var count = 100;\r\n    for (var i = 0; i < count; i++) {\r\n        var p = {};\r\n        \r\n        p.x = x;\r\n        p.y = y;\r\n        p.speed = (Math.random() * 5) + .4;\r\n        p.radius = p.speed;\r\n    }\r\n}\r\nfunction drawFireworks(){\r\n    for (var i = 0; i < particles.length; i++) {\r\n        var p = particles[i];\r\n        var vx = Math.cos(p.radians) * p.radius;\r\n        var vy = Math.sin(p.radians) * p.radius + 0.4;\r\n\r\n        p.x += vx;\r\n        p.y += vy;\r\n        p.radius *= 1 - p.speed / 100;\r\n    }\r\n}\r\n~~~\r\n\r\n但要实现文字烟花，我们一开始就要把烟花最后的`x`,`y`坐标全部精确的计算出来。所以这个烟花的绘制，我们要更改一下逻辑。在`createFireworks`阶段，就计算出单个粒子的`起点 x,y`和`终点 fx,fy`。\r\n\r\n代码修改后如下\r\n\r\n~~~javascript\r\n//篇幅限制，仅展现部分代码\r\nfunction createFireworks(x, y){\r\n    var count = 100;\r\n    for (var i = 0; i < count; i++) {\r\n        var angle = 360 / count * i;\r\n\r\n        var p = {};\r\n        p.x = x;\r\n        p.y = y;\r\n        p.radians = angle * Math.PI / 180;\r\n\r\n        p.radius = Math.random()*81+50;\r\n\r\n        p.fx = x + Math.cos(radians) * p.radius;\r\n        p.fy = y + Math.sin(radians) * p.radius;\r\n    }\r\n}\r\nfunction drawFireworks() {\r\n    for (var i = 0; i < particles.length; i++) {\r\n        var p = particles[i];\r\n\r\n        p.x += (p.fx - p.x)/10;\r\n        p.y += (p.fy - p.y)/10-(p.alpha-1)*p.speed;\r\n    }\r\n}\r\n~~~\r\n\r\n这样我们就完成了第一步改造，后续我们要把文字写在画布上，并且将其转换为点阵数组，也就是所有烟花粒子的终点坐标。\r\n\r\n# 画布绘制文字\r\n\r\n其实和之前那篇[《使用 Javascript 制作 BadApple 字符画视频》]( https://www.v2ex.com/t/774257#reply11)的原理是一样的。通过`canvas`的 API`getImageData`来获得画布指定区域内的全部点阵信息（`rgba`数组）。\r\n\r\n将`createFireworks`方法改造如下\r\n\r\n~~~javascript\r\nfunction createFireworks(x,y,text=\"\"){\r\n    if(text!=\"\"){\r\n        //绘制文字\r\n    }else{\r\n        //原有的烟花代码\r\n    }\r\n}\r\n~~~\r\n\r\n传递一个`text`参数，当此参数不为空时，我们进入文字烟花的绘制逻辑。\r\n\r\n~~~javascript\r\nvar fontSize = 120;\r\nvar textHeight = fontSize;\r\ncontext.font=fontSize+\"px Verdana\";\r\ncontext.fillStyle = \"#ffffff\";\t\r\ncontext.fillText(text,0,textHeight);\r\n~~~\r\n\r\n![image.png]( https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bfc02ff6fe9b45e9943aa09791186744~tplv-k3u1fbpfcp-watermark.image)\r\n\r\n# 获取点阵数组\r\n\r\n这样我们就能把字绘制在画布上了，接着我们使用`getImageData`来获得并裁剪点阵信息，因为我们只要一部分的点阵。\r\n\r\n~~~javascript\r\nvar imgData = textctx.getImageData(0,0,textWidth,textHeight);\r\n\r\nfor (var h = 0; h < textHeight; h+=gap) {\r\n    for(var w = 0; w < textWidth; w+=gap){\r\n            var position = (textWidth * h + w) * 4;\r\n            var r = imgData.data[position], g = imgData.data[position + 1], b = imgData.data[position + 2], a = imgData.data[position + 3];\r\n    }\r\n}\r\n~~~\r\n\r\n这样我们就拿到了画布里文字绘制区域的全部点阵数据，数据的格式为\r\n\r\n~~~\r\n[r,g,b,a,r,g,b,a,r,g,b,a]\r\n~~~\r\n\r\n我们通过一个`gap`值来跳跃间隔裁剪数据。由于画布是黑色，所以`r`,`g`,`b`都为`0`的点阵我们就不绘制了，现在将间隔的点阵信息再次绘制到画布中。\r\n\r\n~~~javascript\r\nvar fx = x + w - textWidth/2;\r\nvar fy = y + h - textHeight/2;\r\n\r\ncontext.fillStyle = \"#ffffff\";\r\ncontext.fillRect(fx,fy,1,1);\r\n~~~\r\n\r\n我们就会看见~\r\n\r\n\r\n![image.png]( https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/efff8466670b4ed6acfaf4dcfa8915b9~tplv-k3u1fbpfcp-watermark.image)\r\n\r\n![image.png]( https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2dae21c5731f4970875a9d6ed7d3ecb0~tplv-k3u1fbpfcp-watermark.image)\r\n\r\n太棒了，这就是我们最终需要的文字烟花粒子的终点信息呀！\r\n\r\n现在我们遍历全部的点阵，并创建烟花粒子吧！\r\n\r\n~~~javascript\r\nfor (var h = 0; h < textHeight; h+=gap) {\r\n    for(var w = 0; w < textWidth; w+=gap){\r\n            var position = (textWidth * h + w) * 4;\r\n            var r = imgData.data[position], g = imgData.data[position + 1], b = imgData.data[position + 2];\r\n\r\n            if(r+g+b==0)continue;\r\n\r\n            var p = {};\r\n            p.x = x;\r\n            p.y = y;\r\n            p.fx = x + w - textWidth/2;\r\n            p.fy = y + h - textHeight/2;\r\n\r\n            p.size = Math.floor(Math.random()*2)+1;\r\n            p.speed = 1;\r\n\r\n            setupColors(p);\r\n\r\n            particles.push(p);\r\n    }\r\n}\r\n~~~\r\n\r\n# 文字烟花来了\r\n\r\n至此，文字烟花效果，我们就实现了！！！\r\n\r\n![2021-05-03 21_27_34.gif]( https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70feb20242ae4209a46e8c0c4a3fc5b3~tplv-k3u1fbpfcp-watermark.image)\r\n\r\n# 用它示爱！\r\n\r\n~~~javascript\r\ncreateFireworks(x, y,[\"杨幂\",\"我爱你\",\"永远\"][Math.floor(Math.random()*3)]);\r\n~~~\r\n\r\n![2021-05-03 22_26_55.gif]( https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cbf670c32e404c6eb820c4c8caa94be6~tplv-k3u1fbpfcp-watermark.image)\r\n\r\n# 关注我获取源码\r\n\r\n微信搜索“`大帅老猿`”并回复“`烟花`”即可获得本文全部源码","content_rendered":"<h1>前言</h1>\n<p>之前我出了一个<a href=\"https://www.v2ex.com/t/773999#reply2\" rel=\"nofollow\">如何在网页里使用原生 JS 开发放烟花效果</a>的教程。</p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33d4009dca134a969e6145cba339dadc%7Etplv-k3u1fbpfcp-watermark.image\"/></p>\n<p>竟然有一个前端小阿姨问我，如果想要烟花放出来是文字的话怎么实现，她要给男朋友做一个。</p>\n<p>好家伙，这狗粮洒一地呀</p>\n<p><img alt=\"171253fc29abd17b89974c04784db038.gif\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/018336172ea14186bda6e35dbf2eb1a4%7Etplv-k3u1fbpfcp-watermark.image\"/></p>\n<p>那狗粮不能我一个人吃，分享出来，大家一起吃。</p>\n<p>此文配有 <a href=\"https://www.bilibili.com/video/BV17p4y1473o\" rel=\"nofollow\">视频教程</a>，边吃边看，狗粮更香。</p>\n<h1>互动话题</h1>\n<p>你身边有这样的程序员小姐姐吗？</p>\n<ol>\n<li>没有，你编的</li>\n<li>有呀，我认识</li>\n</ol>\n<p><a href=\"https://www.bilibili.com/video/BV17p4y1473o\" rel=\"nofollow\">点击参与投票</a></p>\n<h1>先改造一下烟花的源代码</h1>\n<p>之前烟花源码里的核心是，我们在创建烟花粒子的时候，赋值了烟花绽放的原点<code>x</code>,<code>y</code>和圆形烟花的半径<code>radius</code>。在绘制烟花动效时，半径不断加大，烟花的动效就出来。</p>\n<pre><code class=\"language-javascript\">//篇幅限制，仅展现部分代码\nfunction createFireworks(x, y) {\n    var count = 100;\n    for (var i = 0; i &lt; count; i++) {\n        var p = {};\n        \n        p.x = x;\n        p.y = y;\n        p.speed = (Math.random() * 5) + .4;\n        p.radius = p.speed;\n    }\n}\nfunction drawFireworks(){\n    for (var i = 0; i &lt; particles.length; i++) {\n        var p = particles[i];\n        var vx = Math.cos(p.radians) * p.radius;\n        var vy = Math.sin(p.radians) * p.radius + 0.4;\n\n        p.x += vx;\n        p.y += vy;\n        p.radius *= 1 - p.speed / 100;\n    }\n}\n</code></pre>\n<p>但要实现文字烟花，我们一开始就要把烟花最后的<code>x</code>,<code>y</code>坐标全部精确的计算出来。所以这个烟花的绘制，我们要更改一下逻辑。在<code>createFireworks</code>阶段，就计算出单个粒子的<code>起点 x,y</code>和<code>终点 fx,fy</code>。</p>\n<p>代码修改后如下</p>\n<pre><code class=\"language-javascript\">//篇幅限制，仅展现部分代码\nfunction createFireworks(x, y){\n    var count = 100;\n    for (var i = 0; i &lt; count; i++) {\n        var angle = 360 / count * i;\n\n        var p = {};\n        p.x = x;\n        p.y = y;\n        p.radians = angle * Math.PI / 180;\n\n        p.radius = Math.random()*81+50;\n\n        p.fx = x + Math.cos(radians) * p.radius;\n        p.fy = y + Math.sin(radians) * p.radius;\n    }\n}\nfunction drawFireworks() {\n    for (var i = 0; i &lt; particles.length; i++) {\n        var p = particles[i];\n\n        p.x += (p.fx - p.x)/10;\n        p.y += (p.fy - p.y)/10-(p.alpha-1)*p.speed;\n    }\n}\n</code></pre>\n<p>这样我们就完成了第一步改造，后续我们要把文字写在画布上，并且将其转换为点阵数组，也就是所有烟花粒子的终点坐标。</p>\n<h1>画布绘制文字</h1>\n<p>其实和之前那篇<a href=\"https://www.v2ex.com/t/774257#reply11\" rel=\"nofollow\">《使用 Javascript 制作 BadApple 字符画视频》</a>的原理是一样的。通过<code>canvas</code>的 API<code>getImageData</code>来获得画布指定区域内的全部点阵信息（<code>rgba</code>数组）。</p>\n<p>将<code>createFireworks</code>方法改造如下</p>\n<pre><code class=\"language-javascript\">function createFireworks(x,y,text=\"\"){\n    if(text!=\"\"){\n        //绘制文字\n    }else{\n        //原有的烟花代码\n    }\n}\n</code></pre>\n<p>传递一个<code>text</code>参数，当此参数不为空时，我们进入文字烟花的绘制逻辑。</p>\n<pre><code class=\"language-javascript\">var fontSize = 120;\nvar textHeight = fontSize;\ncontext.font=fontSize+\"px Verdana\";\ncontext.fillStyle = \"#ffffff\";\t\ncontext.fillText(text,0,textHeight);\n</code></pre>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bfc02ff6fe9b45e9943aa09791186744%7Etplv-k3u1fbpfcp-watermark.image\"/></p>\n<h1>获取点阵数组</h1>\n<p>这样我们就能把字绘制在画布上了，接着我们使用<code>getImageData</code>来获得并裁剪点阵信息，因为我们只要一部分的点阵。</p>\n<pre><code class=\"language-javascript\">var imgData = textctx.getImageData(0,0,textWidth,textHeight);\n\nfor (var h = 0; h &lt; textHeight; h+=gap) {\n    for(var w = 0; w &lt; textWidth; w+=gap){\n            var position = (textWidth * h + w) * 4;\n            var r = imgData.data[position], g = imgData.data[position + 1], b = imgData.data[position + 2], a = imgData.data[position + 3];\n    }\n}\n</code></pre>\n<p>这样我们就拿到了画布里文字绘制区域的全部点阵数据，数据的格式为</p>\n<pre><code>[r,g,b,a,r,g,b,a,r,g,b,a]\n</code></pre>\n<p>我们通过一个<code>gap</code>值来跳跃间隔裁剪数据。由于画布是黑色，所以<code>r</code>,<code>g</code>,<code>b</code>都为<code>0</code>的点阵我们就不绘制了，现在将间隔的点阵信息再次绘制到画布中。</p>\n<pre><code class=\"language-javascript\">var fx = x + w - textWidth/2;\nvar fy = y + h - textHeight/2;\n\ncontext.fillStyle = \"#ffffff\";\ncontext.fillRect(fx,fy,1,1);\n</code></pre>\n<p>我们就会看见~</p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/efff8466670b4ed6acfaf4dcfa8915b9%7Etplv-k3u1fbpfcp-watermark.image\"/></p>\n<p><img alt=\"image.png\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2dae21c5731f4970875a9d6ed7d3ecb0%7Etplv-k3u1fbpfcp-watermark.image\"/></p>\n<p>太棒了，这就是我们最终需要的文字烟花粒子的终点信息呀！</p>\n<p>现在我们遍历全部的点阵，并创建烟花粒子吧！</p>\n<pre><code class=\"language-javascript\">for (var h = 0; h &lt; textHeight; h+=gap) {\n    for(var w = 0; w &lt; textWidth; w+=gap){\n            var position = (textWidth * h + w) * 4;\n            var r = imgData.data[position], g = imgData.data[position + 1], b = imgData.data[position + 2];\n\n            if(r+g+b==0)continue;\n\n            var p = {};\n            p.x = x;\n            p.y = y;\n            p.fx = x + w - textWidth/2;\n            p.fy = y + h - textHeight/2;\n\n            p.size = Math.floor(Math.random()*2)+1;\n            p.speed = 1;\n\n            setupColors(p);\n\n            particles.push(p);\n    }\n}\n</code></pre>\n<h1>文字烟花来了</h1>\n<p>至此，文字烟花效果，我们就实现了！！！</p>\n<p><img alt=\"2021-05-03 21_27_34.gif\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70feb20242ae4209a46e8c0c4a3fc5b3%7Etplv-k3u1fbpfcp-watermark.image\"/></p>\n<h1>用它示爱！</h1>\n<pre><code class=\"language-javascript\">createFireworks(x, y,[\"杨幂\",\"我爱你\",\"永远\"][Math.floor(Math.random()*3)]);\n</code></pre>\n<p><img alt=\"2021-05-03 22_26_55.gif\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cbf670c32e404c6eb820c4c8caa94be6%7Etplv-k3u1fbpfcp-watermark.image\"/></p>\n<h1>关注我获取源码</h1>\n<p>微信搜索“<code>大帅老猿</code>”并回复“<code>烟花</code>”即可获得本文全部源码</p>\n","last_modified":1620268497,"replies":11,"id":775095},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1620106885","name":"career","avatar_normal":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1620106885","title":"职场话题","url":"https://www.v2ex.com/go/career","topics":11399,"footer":"","header":"这里，我们聊聊那些工作中遇到的开心和不开心的事。","title_alternative":"Career","avatar_mini":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1620106885","stars":2026,"aliases":[],"root":false,"id":770,"parent_node_name":"work"},"member":{"username":"Thiece","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/68701bc5fe5805e4d6d67924b09721c2?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/Thiece","tagline":"","twitter":"","created":1392022867,"avatar_large":"https://cdn.v2ex.com/gravatar/68701bc5fe5805e4d6d67924b09721c2?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/68701bc5fe5805e4d6d67924b09721c2?s=24&d=retro","location":"","btc":"","id":55585},"last_reply_by":"Thiece","last_touched":1620284514,"title":"拉钩 1 对 1 简历精修靠谱吗？","url":"https://www.v2ex.com/t/775134","created":1620274848,"content":"这项服务的初衷应该是处理求职者与招人单位信息不对称吧。\r\n\r\n有 V 友买过该服务吗？","content_rendered":"<p>这项服务的初衷应该是处理求职者与招人单位信息不对称吧。</p>\n<p>有 V 友买过该服务吗？</p>\n","last_modified":1620274848,"replies":10,"id":775134},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1618811339","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1618811339","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":172102,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1618811339","stars":3218,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"abiaqiou","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/9723c85084ec71c23ce99904c75f0c57?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/abiaqiou","tagline":null,"twitter":null,"created":1565335358,"avatar_large":"https://cdn.v2ex.com/gravatar/9723c85084ec71c23ce99904c75f0c57?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/9723c85084ec71c23ce99904c75f0c57?s=24&d=retro","location":null,"btc":null,"id":434774},"last_reply_by":"root01","last_touched":1620285644,"title":"新笔记本到手, 应该做什么准备工作?","url":"https://www.v2ex.com/t/775151","created":1620280139,"content":"目前想到的: 自带的家庭版升级至企业版, 8Gx2 升级至 16Gx2.\r\n\r\n另外升级至企业版我只想到 PE 重装系统这一方法, 工作人员说最佳方案是在原家庭版基础上密钥升级至企业版.所以升级至企业版的最佳方案到底是什么?","content_rendered":"<p>目前想到的: 自带的家庭版升级至企业版, 8Gx2 升级至 16Gx2.</p>\n<p>另外升级至企业版我只想到 PE 重装系统这一方法, 工作人员说最佳方案是在原家庭版基础上密钥升级至企业版.所以升级至企业版的最佳方案到底是什么?</p>\n","last_modified":1620280139,"replies":9,"id":775151},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/3cef/96dc/949_large.png?m=1614702882","name":"nas","avatar_normal":"https://cdn.v2ex.com/navatar/3cef/96dc/949_normal.png?m=1614702882","title":"NAS","url":"https://www.v2ex.com/go/nas","topics":380,"footer":"","header":"关于网络存储设备的讨论","title_alternative":"NAS","avatar_mini":"https://cdn.v2ex.com/navatar/3cef/96dc/949_mini.png?m=1614702882","stars":679,"aliases":[],"root":false,"id":949,"parent_node_name":"hardware"},"member":{"username":"archiyuan","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/8ab4/54a5/243948_mini.png?m=1500785567","bio":"","url":"https://www.v2ex.com/u/archiyuan","tagline":"","twitter":"","created":1500785415,"avatar_large":"https://cdn.v2ex.com/avatar/8ab4/54a5/243948_mini.png?m=1500785567","avatar_mini":"https://cdn.v2ex.com/avatar/8ab4/54a5/243948_mini.png?m=1500785567","location":"","btc":"","id":243948},"last_reply_by":"coderluan","last_touched":1620282251,"title":"极空间这款 nas 怎么样","url":"https://www.v2ex.com/t/775118","created":1620271863,"content":"迫于 oculus quest2 存储空间不够，想组个 nas，之前没用过 nas，但是威联通和群晖的界面感觉有点不美观，看司波图的视频了解到极空间感觉还不错，有没有入手过的朋友说说使用体验","content_rendered":"<p>迫于 oculus quest2 存储空间不够，想组个 nas，之前没用过 nas，但是威联通和群晖的界面感觉有点不美观，看司波图的视频了解到极空间感觉还不错，有没有入手过的朋友说说使用体验</p>\n","last_modified":1620271863,"replies":9,"id":775118},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/f749/09ac/430_large.png?m=1347578950","name":"icloud","avatar_normal":"https://cdn.v2ex.com/navatar/f749/09ac/430_normal.png?m=1347578950","title":"iCloud","url":"https://www.v2ex.com/go/icloud","topics":623,"footer":null,"header":"Store contacts, calendars, photos, music, books, apps and more in the cloud and access them on all your devices.","title_alternative":"iCloud","avatar_mini":"https://cdn.v2ex.com/navatar/f749/09ac/430_mini.png?m=1347578950","stars":141,"aliases":[],"root":false,"id":430,"parent_node_name":"apple"},"member":{"username":"Leviathann","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/d3b22910a49ecf620ab67790d7f594eb?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/Leviathann","tagline":null,"twitter":null,"created":1463667175,"avatar_large":"https://cdn.v2ex.com/gravatar/d3b22910a49ecf620ab67790d7f594eb?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/d3b22910a49ecf620ab67790d7f594eb?s=24&d=retro","location":null,"btc":null,"id":173846},"last_reply_by":"xuegy","last_touched":1620272342,"title":"提醒我 icloud 容量不够，点进去看发现有几个 app 都备份过去了（b 站、知乎、qq、微信啥的）每个都占用了大几百 M，这个应用备份是备份了啥啊","url":"https://www.v2ex.com/t/775085","created":1620266682,"content":"","content_rendered":"","last_modified":1620266682,"replies":9,"id":775085},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1618811339","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1618811339","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":172102,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1618811339","stars":3218,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"kim886","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/d01e/151b/525984_mini.png?m=1619489001","bio":"","url":"https://www.v2ex.com/u/kim886","tagline":"","twitter":null,"created":1609204000,"avatar_large":"https://cdn.v2ex.com/avatar/d01e/151b/525984_mini.png?m=1619489001","avatar_mini":"https://cdn.v2ex.com/avatar/d01e/151b/525984_mini.png?m=1619489001","location":"","btc":null,"id":525984},"last_reply_by":"wudizaliangbing","last_touched":1620286569,"title":"明明工作强度不高，睡眠也充足，可为什么还是感觉累呢？","url":"https://www.v2ex.com/t/775166","created":1620282722,"content":"工作时间 966，晚上 11 点左右睡觉，早上 8 点起床，下班吃了饭还会去散步，可每天还是感觉好累啊，特别是下午和晚上。\r\n\r\n下了班就啥也不想做，散步还是被女票拉着去的，散步回来洗完澡就躺床上刷头条、玩游戏，制定的学习却计划迟迟没有开始。","content_rendered":"工作时间 966，晚上 11 点左右睡觉，早上 8 点起床，下班吃了饭还会去散步，可每天还是感觉好累啊，特别是下午和晚上。<br /><br />下了班就啥也不想做，散步还是被女票拉着去的，散步回来洗完澡就躺床上刷头条、玩游戏，制定的学习却计划迟迟没有开始。","last_modified":1620282722,"replies":8,"id":775166},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/03af/dbd6/63_large.png?m=1596211530","name":"java","avatar_normal":"https://cdn.v2ex.com/navatar/03af/dbd6/63_normal.png?m=1596211530","title":"Java","url":"https://www.v2ex.com/go/java","topics":4381,"footer":"","header":"The most popular programming language.","title_alternative":"Java","avatar_mini":"https://cdn.v2ex.com/navatar/03af/dbd6/63_mini.png?m=1596211530","stars":4481,"aliases":[],"root":false,"id":63,"parent_node_name":"programming"},"member":{"username":"15190049162","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/d13257216fb6e2cec6deb59afe5227d3?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/15190049162","tagline":null,"twitter":null,"created":1546348042,"avatar_large":"https://cdn.v2ex.com/gravatar/d13257216fb6e2cec6deb59afe5227d3?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/d13257216fb6e2cec6deb59afe5227d3?s=24&d=retro","location":null,"btc":null,"id":374457},"last_reply_by":"15190049162","last_touched":1620283215,"title":"求助各位大神，有没有类似的工具","url":"https://www.v2ex.com/t/775160","created":1620281886,"content":"事情是这样的，每次运营人员都要问我要数据，这些数据都是一些报表一样的东西，其实 SQL 都写好了，但是这些数据他们每周，每月可能都要拉一下。每次帮他们查就很烦！特别是在 coding 的时候！所以想要一个工具，能够让我把 sql 配置进去，里面参数可以让运营在页面上通过输入框或者选择框自己填，然后展示这些数据。\r\n\r\n需求如下\r\n1.能把 SQL 配置进去，然后展示出来表格，里面有部分参数可以自己定义。比如 select * from tb_test where\r\nname like XXX and birthday between YYY AND ZZZ ,其中 XYZ 要能自己定义的那种。\r\n2.能支持导出 EXCEL\r\n3.免费安全\r\n\r\n说白了就是一个强化版，友好版的 NAVICAT 。但是给运营 SQL 他们会砍死我啊，需要这样的工具来包装一下就好。\r\n\r\n谢谢各位大佬了。","content_rendered":"<p>事情是这样的，每次运营人员都要问我要数据，这些数据都是一些报表一样的东西，其实 SQL 都写好了，但是这些数据他们每周，每月可能都要拉一下。每次帮他们查就很烦！特别是在 coding 的时候！所以想要一个工具，能够让我把 sql 配置进去，里面参数可以让运营在页面上通过输入框或者选择框自己填，然后展示这些数据。</p>\n<p>需求如下\n1.能把 SQL 配置进去，然后展示出来表格，里面有部分参数可以自己定义。比如 select * from tb_test where\nname like XXX and birthday between YYY AND ZZZ ,其中 XYZ 要能自己定义的那种。\n2.能支持导出 EXCEL\n3.免费安全</p>\n<p>说白了就是一个强化版，友好版的 NAVICAT 。但是给运营 SQL 他们会砍死我啊，需要这样的工具来包装一下就好。</p>\n<p>谢谢各位大佬了。</p>\n","last_modified":1620281886,"replies":8,"id":775160},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1620107083","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1620107083","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":44358,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1620107083","stars":7361,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"lake325","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/96dc/9fd3/367907_mini.png?m=1544067814","bio":"","url":"https://www.v2ex.com/u/lake325","tagline":"","twitter":"","created":1543906391,"avatar_large":"https://cdn.v2ex.com/avatar/96dc/9fd3/367907_mini.png?m=1544067814","avatar_mini":"https://cdn.v2ex.com/avatar/96dc/9fd3/367907_mini.png?m=1544067814","location":"","btc":"","id":367907},"last_reply_by":"yaphets666","last_touched":1620286575,"title":"oschina 发生了什么，动弹板块怎么没了？","url":"https://www.v2ex.com/t/775150","created":1620279996,"content":"有一段时间没逛 oschina 了，今天发现动弹板块没了，发生了什么","content_rendered":"有一段时间没逛 oschina 了，今天发现动弹板块没了，发生了什么","last_modified":1620279996,"replies":8,"id":775150}]